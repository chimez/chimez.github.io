<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>chimez's blog (å…³äº library çš„æ–‡ç« )</title><link>https://chimez.github.io/</link><description></description><atom:link href="https://chimez.github.io/categories/cat_library.xml" rel="self" type="application/rss+xml"></atom:link><language>zh_cn</language><copyright>Contents Â© 2025 &lt;a href="mailto:chimez@163.com"&gt;chimez&lt;/a&gt; </copyright><lastBuildDate>Wed, 18 Jun 2025 02:51:09 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>TeNPy è°ƒç ”</title><link>https://chimez.github.io/posts/tenpy-diao-yan/</link><dc:creator>chimez</dc:creator><description>&lt;p&gt;
DMRG / MPS / å¼ é‡ç½‘ç»œçš„å¼€æºåº“æœ‰å¾ˆå¤šï¼Œä¾‹å¦‚ &lt;a href="https://github.com/tenpy/tenpy.git"&gt;TeNPy&lt;/a&gt;, &lt;a href="https://itensor.org/"&gt;ITensor&lt;/a&gt;, &lt;a href="https://github.com/jutho/TensorKit.jl"&gt;TensorKit&lt;/a&gt;, &lt;a href="https://bitbucket.org/aweichselbaum/workspace/projects/QS"&gt;QSpace&lt;/a&gt;, &lt;a href="https://github.com/g1257/dmrgpp"&gt;DMRG++&lt;/a&gt;, &lt;a href="https://uni10.gitlab.io/"&gt;uni10&lt;/a&gt;, &lt;a href="https://github.com/cmendl/pytenet"&gt;PyTeNet&lt;/a&gt;, &lt;a href="https://github.com/jcmgray/quimb"&gt;quimb&lt;/a&gt;, &lt;a href="https://github.com/dsuess/mpnum"&gt;mpnum&lt;/a&gt;, &lt;a href="https://green.physics.lsa.umich.edu/alps_legacy/index.php"&gt;ALPS project&lt;/a&gt;, &lt;a href="https://github.com/issp-center-dev/TeNeS"&gt;TeNeS&lt;/a&gt;, &lt;a href="https://syten.eu/"&gt;SyTen&lt;/a&gt;, ç­‰ç­‰ã€‚
è¿™ä¸ªç³»åˆ—æ–‡ç« å°†ä¼šä»è¿™äº›åº“ä¸­é€‰æ‹©å‡ ä¸ªæ¥å­¦ä¹ å’Œåˆ†æä¸€ä¸‹ã€‚
&lt;/p&gt;


&lt;div id="org7415f95" class="figure"&gt;
&lt;p&gt;&lt;img src="https://imgs.xkcd.com/comics/standards.png" alt="standards.png"&gt;
&lt;/p&gt;
&lt;p&gt;&lt;span class="figure-number"&gt;Figure 1: &lt;/span&gt;è®©æˆ‘ä»¬å†é€ ä¸ªè½®å­ğŸ¤£&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;
&lt;a href="https://github.com/tenpy/tenpy"&gt;TeNPy&lt;/a&gt;ç”±&lt;a href="https://johannes-hauschild.de/"&gt;Johannes Hauschild&lt;/a&gt;ä¸»è¦å¼€å‘å¹¶ç»´æŠ¤ï¼ŒHauschild çš„åšå£«å¯¼å¸ˆæ˜¯ Frank Pollmannï¼Œç°åœ¨åœ¨åˆ°å¤„åšåšåã€‚
è€ƒè™‘åˆ° Hauschild ä¸€ä½œçš„æ–‡ç« æ²¡æœ‰å‡ ä¸ªï¼Œå‘è¡¨æƒ…å†µå¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œæ‰€ä»¥æŸç§ç¨‹åº¦ä¸Šä»–æ˜¯åœ¨å…¨èŒåš TeNPy çš„å¼€å‘ã€‚
&lt;/p&gt;
&lt;div id="outline-container-orgba3ee3b" class="outline-2"&gt;
&lt;h2 id="orgba3ee3b"&gt;å®‰è£…&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgba3ee3b"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# å®‰è£…ä¾èµ–
pip install -U pip numpy scipy cython setuptools wheel build
# ä¸‹è½½æºç 
git clone https://github.com/tenpy/tenpy.git
# å®‰è£…
cd tenpy
pip install -e .
# æµ‹è¯•
cd tests
pip install pytest
pytest
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgff962a5" class="outline-2"&gt;
&lt;h2 id="orgff962a5"&gt;ä»£ç å±‚çº§&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgff962a5"&gt;
&lt;p&gt;
TeNPy çš„ä»£ç å±‚çº§å¦‚å›¾&lt;a href="https://chimez.github.io/posts/tenpy-diao-yan/#org3f0f99b"&gt;2&lt;/a&gt;ã€‚
&lt;/p&gt;

&lt;ul class="org-ul"&gt;
&lt;li&gt;&lt;code&gt;tenpy.simulations&lt;/code&gt; æ˜¯ç¨‹åºçš„å…¥å£ï¼Œæä¾›è¿è¡Œç¨‹åºï¼ˆè¿›è¡Œè¯»å–å‚æ•°ã€è¿è¡Œè®¡ç®—ã€æ‰§è¡Œæµ‹é‡ã€ä¿å­˜ç»“æœå’Œä¸­é—´è¿‡ç¨‹ç­‰ç­‰ï¼‰çš„åŠŸèƒ½&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tenpy.algorithms&lt;/code&gt; ä¸­å®ç°äº†å¤šç§ç®—æ³•ï¼ŒåŒ…æ‹¬ DMRGã€iDMRGã€TEBDå’ŒTDVP&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tenpy.models&lt;/code&gt; ä¸­å®ç°äº†å„ç§æ¨¡å‹åŒ…æ‹¬è‡ªæ—‹ã€è´¹ç±³ã€æ³¢è‰²å’Œå„ç§æ™¶æ ¼ç»“æ„ã€‚äºŒç»´æ™¶æ ¼é€šè¿‡æ˜ å°„åˆ°ä¸€ç»´æ¥å®ç°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tenpy.networks&lt;/code&gt; ä¸­å®ç°äº† MPS å’Œ MPO ç±»å‹&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tenpy.linalg&lt;/code&gt; ä¸­å®ç°äº†å¸¦æœ‰å®ˆæ’é‡çš„å¼ é‡ä»¥åŠè¿­ä»£å¯¹è§’åŒ–ç®—æ³• Lanczos å’Œ Arnoldi&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tenpy.tools&lt;/code&gt; ä¸­åŒ…æ‹¬ä¸€äº›éœ€è¦ç”¨åˆ°å…¶å®ƒåŠŸèƒ½&lt;/li&gt;
&lt;/ul&gt;


&lt;div id="org3f0f99b" class="figure"&gt;
&lt;p&gt;&lt;img src="https://tenpy.readthedocs.io/en/latest/_images/overview.png" alt="overview.png"&gt;
&lt;/p&gt;
&lt;p&gt;&lt;span class="figure-number"&gt;Figure 2: &lt;/span&gt;TeNPy çš„ä»£ç å±‚çº§&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgf1e2bfa" class="outline-2"&gt;
&lt;h2 id="orgf1e2bfa"&gt;&lt;code&gt;tenpy.linalg.np_conserved.Array&lt;/code&gt;&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgf1e2bfa"&gt;
&lt;p&gt;
TeNPy çš„åŸºæœ¬æ•°æ®ç»“æ„æ˜¯ &lt;code&gt;tenpy.linalg.np_conserved.Array&lt;/code&gt;, å¸¦æœ‰å®ˆæ’è·çš„å¼ é‡ã€‚
TeNPy é‡‡ç”¨å¸¦æœ‰ç®­å¤´çš„ MPS è®°å·æ¥è¡¨ç¤ºä¸€ä¸ªå¼ é‡ã€‚
å¼ é‡çš„æ¯ä¸ªæŒ‡æ ‡æœ‰è‹¥å¹²å¯èƒ½çš„é‡å­æ•°ï¼Œè¿™äº›ä¿¡æ¯è®°å½•åœ¨ &lt;code&gt;Array.legs&lt;/code&gt; å±æ€§é‡Œã€‚
å¯¹äºä¸€ä¸ªæœ‰ \(n\) ä¸ªæŒ‡æ ‡çš„å¼ é‡,  &lt;code&gt;Array.legs&lt;/code&gt; æ˜¯é•¿åº¦ä¸º \(n\) çš„æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯ &lt;code&gt;tenpy.linalg.charges.LegCharge&lt;/code&gt; , è¿™é‡Œè®°å½•äº†è¿™ä¸ªæŒ‡æ ‡æ‰€æœ‰å¯èƒ½çš„è·ä»¥åŠå®ƒæ˜¯å…¥æŒ‡æ ‡è¿˜æ˜¯å‡ºæŒ‡æ ‡ã€‚
å¼ é‡çš„å±æ€§ &lt;code&gt;Array.qtotal&lt;/code&gt; è®°å½•æ€»é‡å­æ•°ï¼Œåªæœ‰é‚£äº›å’Œç­‰äºæ€»é‡å­æ•°çš„å—æ‰ä¼šè¢«ä¿å­˜ã€‚
æ¯ä¸ªä¿å­˜çš„å¼ é‡å—çš„æ•°æ®æ˜¯æ•°ç»„ &lt;code&gt;Array._data&lt;/code&gt; çš„ä¸€ä¸ªå…ƒç´ ï¼Œå®ƒå¯¹äºçš„é‡å­æ•°åˆ™æ˜¯çŸ©é˜µ &lt;code&gt;Array._qdata&lt;/code&gt; çš„ä¸€è¡Œã€‚
&lt;/p&gt;

&lt;pre class="example" id="org0ee4e59"&gt;
class Array{
    legs   : List[LegCharge],
    qtotal : Charge,
    _data  : List[numpy.ndarray],
    _qdata : numpy.ndarray[len(â€‹_data), len(legs)],
}
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orga3c86c4" class="outline-2"&gt;
&lt;h2 id="orga3c86c4"&gt;&lt;code&gt;tenpy.networks.site.Site&lt;/code&gt;&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orga3c86c4"&gt;
&lt;p&gt;
&lt;code&gt;tenpy.networks.site.Site&lt;/code&gt; æ˜¯ä¸€ä¸ªæ ¼ç‚¹æˆ–è€…ä¸€ä¸ªç‰©ç†æŒ‡æ ‡æ‰€éœ€è¦çš„æ•°æ®ã€‚
å®ƒä¿å­˜äº†ç‰©ç†æŒ‡æ ‡æ‰€éœ€è¦çš„ä¿¡æ¯ &lt;code&gt;LegCharge&lt;/code&gt;, ä»¥åŠä½œç”¨åœ¨ä¸€ä¸ªæ ¼ç‚¹ä¸Šçš„æ‰€æœ‰å±€åŸŸç®—ç¬¦ &lt;code&gt;Site.ops&lt;/code&gt;, å†™æ¨¡å‹çš„å“ˆå¯†é¡¿é‡æ‰€éœ€è¦çš„æ‰€æœ‰ç®—ç¬¦éƒ½æ˜¯ä»è¿™é‡Œå¾—åˆ°çš„ã€‚
é™¤äº†ä¸€èˆ¬çš„ç®—ç¬¦ä¹‹å¤–è¿˜æœ‰ Jordan-Wigner å˜æ¢ï¼ˆå¦‚æœéœ€è¦ï¼‰è¦ç”¨åˆ°çš„ä¿¡æ¯ã€‚
&lt;/p&gt;

&lt;p&gt;
TeNPy ä¸­å®ç°çš„ &lt;code&gt;Site&lt;/code&gt; æœ‰å¦‚ä¸‹è¿™äº›
&lt;/p&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;&lt;code&gt;BosonSite&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ClockSite&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;FermionSite&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;GroupedSite&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SpinHalfFermionSite&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SpinHalfHoleSite&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SpinHalfSite&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SpinSite&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgdee0945" class="outline-2"&gt;
&lt;h2 id="orgdee0945"&gt;&lt;code&gt;tenpy.networks.mps.MPS&lt;/code&gt;&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgdee0945"&gt;
&lt;p&gt;
å¯¹äº \(n\) æ ¼ç‚¹çš„é“¾ï¼Œ &lt;code&gt;tenpy.networks.mps.MPS&lt;/code&gt; å°±æ˜¯ \(n\) ä¸ª &lt;code&gt;Site&lt;/code&gt; å’Œ \(n\) ä¸ª &lt;code&gt;Array&lt;/code&gt;, è¿™äº› &lt;code&gt;Array&lt;/code&gt; éƒ½æ˜¯ä¸‰é˜¶å¼ é‡.
TeNPy çš„ MPS è¡¨ç¤ºè®°å½•äº†æ¯ä¸ªå—çš„å½¢å¼ï¼ˆå·¦æ­£åˆ™ã€å³æ­£åˆ™ã€å¯¹ç§°å½¢å¼æˆ–è€…å« Vidal çš„ \(\Gamma \Lambda\) å½¢å¼ï¼‰ä»¥åŠéœ€è¦çš„å¥‡å¼‚å€¼ã€‚
&lt;/p&gt;

&lt;pre class="example" id="org0dfeef2"&gt;
class MPS{
    sites: List[Site],
    _B: List[Array],
    _S: List[numpy.ndarray[1d]],
    form: List[form],
}
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgffc7bbd" class="outline-2"&gt;
&lt;h2 id="orgffc7bbd"&gt;&lt;code&gt;tenpy.networks.mpo.MPO&lt;/code&gt;&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgffc7bbd"&gt;
&lt;p&gt;
&lt;code&gt;tenpy.networks.mpo.MPO&lt;/code&gt; ä¸ MPS è¡¨ç¤ºç±»ä¼¼ï¼Œåªä¸è¿‡æ¯ä¸ªå—ç°åœ¨æ˜¯å››é˜¶å¼ é‡ã€‚
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgaf30fe3" class="outline-2"&gt;
&lt;h2 id="orgaf30fe3"&gt;&lt;code&gt;tenpy.models.model.Model&lt;/code&gt;&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgaf30fe3"&gt;
&lt;p&gt;
&lt;code&gt;tenpy.models.model.Model&lt;/code&gt; ç”¨æ¥è¡¨ç¤ºæ¨¡å‹çš„å“ˆå¯†é¡¿é‡ï¼Œéœ€è¦æŒ‡å®šå…ƒèƒæ ¼ç‚¹çš„ä¿¡æ¯ &lt;code&gt;Site&lt;/code&gt; ä»¥åŠæ™¶æ ¼ç»“æ„å¦‚ä½•æ˜ å°„åˆ°ä¸€ç»´é“¾ &lt;code&gt;tenpy.models.lattice.Lattice&lt;/code&gt;.
TeNPy æä¾›çš„æ„é€ æ¨¡å‹çš„æ–¹æ³•æ˜¯é€šè¿‡ &lt;code&gt;add_onsite&lt;/code&gt;, &lt;code&gt;add_coupling&lt;/code&gt; ç­‰è®¾ç½®å“ˆå¯†é¡¿é‡é‡Œçš„å„é¡¹ï¼Œç„¶åæ ¹æ®éœ€è¦è‡ªåŠ¨æ„é€  MPOã€‚
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org6c5420b" class="outline-2"&gt;
&lt;h2 id="org6c5420b"&gt;DMRG ç®—æ³•&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org6c5420b"&gt;
&lt;p&gt;
TeNPy çš„æŠ½è±¡å±‚æ¬¡æ˜¯
&lt;/p&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;ç”± &lt;code&gt;tenpy.algorithms.algorithm.Algorithm&lt;/code&gt; æä¾›è¿è¡Œã€é‡å¯ç­‰åŠŸèƒ½&lt;/li&gt;
&lt;li&gt;ç„¶åç”± &lt;code&gt;tenpy.algorithms.mps_common.Sweep&lt;/code&gt; æä¾›æ‰«æçš„æŠ½è±¡&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªæ‰«ææ­¥éª¤åˆ™ä½¿ç”¨ &lt;code&gt;tenpy.algorithms.dmrg.DMRGEngine&lt;/code&gt; å®ƒå¯ä»¥æ˜¯ &lt;code&gt;SingleSiteDMRGEngine&lt;/code&gt; æˆ–è€… &lt;code&gt;TwoSiteDMRGEngine&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>python</category><guid>https://chimez.github.io/posts/tenpy-diao-yan/</guid><pubDate>Wed, 18 Oct 2023 03:03:14 GMT</pubDate></item><item><title>PBLAS &amp; ScaLAPACK &amp; BLACS</title><link>https://chimez.github.io/posts/pblas-scalapack/</link><dc:creator>chimez</dc:creator><description>&lt;div id="outline-container-orgbc0f84b" class="outline-2"&gt;
&lt;h2 id="orgbc0f84b"&gt;PBLAS &amp;amp; ScaLAPACK &amp;amp; BLACS&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgbc0f84b"&gt;
&lt;p&gt;
&lt;a href="https://www.netlib.org/scalapack/"&gt;ScaLAPACK&lt;/a&gt; æ˜¯åŸºäº MPI çš„å¹¶è¡Œç‰ˆæœ¬ LAPACK, &lt;a href="https://www.netlib.org/scalapack/pblas_qref.html"&gt;PBLAS&lt;/a&gt; åˆ™æ˜¯å¹¶è¡Œç‰ˆæœ¬çš„ BLAS. å…¶ä¸­ PBLAS æ˜¯åµŒå…¥åˆ° ScaLAPACK é‡Œçš„ï¼Œè¿™ä¸ LAPACK ç»å¸¸åµŒå…¥åˆ° BLAS é‡Œåˆšå¥½åè¿‡æ¥
&lt;/p&gt;
&lt;/div&gt;
&lt;div id="outline-container-org4afa186" class="outline-3"&gt;
&lt;h3 id="org4afa186"&gt;ç¼–è¯‘&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org4afa186"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;ä» github ä¸‹è½½ &lt;a href="https://github.com/Reference-ScaLAPACK/scalapack/"&gt;https://github.com/Reference-ScaLAPACK/scalapack/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ä¿®æ”¹ &lt;code&gt;SLmake.inc&lt;/code&gt; æ–‡ä»¶ä¸­çš„ &lt;code&gt;FC&lt;/code&gt;, &lt;code&gt;CC&lt;/code&gt;, &lt;code&gt;BLASLIB&lt;/code&gt;, &lt;code&gt;LAPACKLIB&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
ç¤ºä¾‹
&lt;/p&gt;
&lt;pre class="example" id="org8a2f33f"&gt;
FC            = /home/beacon/app/openmpi/bin/mpif90
CC            = /home/beacon/app/openmpi/bin/mpicc 
NOOPT         = -O0 -std=legacy
FCFLAGS       = -O3 -std=legacy
CCFLAGS       = -O3


BLASLIB       = -L/usr/lib/x86_64-linux-gnu/openblas-openmp/ -lblas
LAPACKLIB     = -L/usr/lib/x86_64-linux-gnu/openblas-openmp/ -llapack

&lt;/pre&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgbe346f5" class="outline-4"&gt;
&lt;h4 id="orgbe346f5"&gt;GCC 10 ä¸å…¼å®¹&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgbe346f5"&gt;
&lt;p&gt;
ç”±äº GCC 10 æ ¹æ®æœ€æ–°çš„ fortran æ ‡å‡†ï¼Œè¦æ±‚å‚æ•°ç±»å‹åŒ¹é…ï¼Œæ‰€ä»¥è€ä»£ç ä¸ç»™é€šè¿‡ï¼Œå¯ä»¥æ·»åŠ  &lt;code&gt;-fallow-argument-mismatch&lt;/code&gt; æˆ– &lt;code&gt;-std=legacy&lt;/code&gt; æ¥ç¼–è¯‘ã€‚
&lt;/p&gt;

&lt;p&gt;
å‚è€ƒ &lt;a href="https://gcc.gnu.org/gcc-10/porting_to.html"&gt;Porting to GCC 10&lt;/a&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org5181841" class="outline-3"&gt;
&lt;h3 id="org5181841"&gt;BLACS&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org5181841"&gt;
&lt;p&gt;
&lt;a href="https://www.netlib.org/blacs/index.html"&gt;BLACS&lt;/a&gt; çš„ç›®çš„æ˜¯æä¾›ä¸€ç»„åœ¨åˆ†å¸ƒå†…å­˜ç³»ç»Ÿä¸Šçš„çº¿æ€§ä»£æ•°çš„æ ‡å‡†é€šä¿¡æ¥å£ï¼Œä¸»è¦æ˜¯ä½œä¸º ScaLAPACK çš„é€šä¿¡å±‚ã€‚
&lt;/p&gt;

&lt;p&gt;
é™¤äº† MPI å¤–, BLACS è¿˜æ”¯æŒå¤šç§é€šä¿¡æ–¹æ¡ˆã€‚å½“ç„¶ç°åœ¨ MPI åŸºæœ¬æˆä¸ºä¸»æµï¼Œ è¿™éƒ¨åˆ†ä½œç”¨å·²ç»æ„ä¹‰ä¸å¤§äº†ã€‚
&lt;/p&gt;

&lt;p&gt;
&lt;a href="https://software.intel.com/content/www/us/en/develop/documentation/onemkl-developer-reference-c/top/blacs-routines.html"&gt;oneAPI/MKL/BLACS&lt;/a&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;div id="outline-container-org6a66968" class="outline-4"&gt;
&lt;h4 id="org6a66968"&gt;åŸºæœ¬æ¦‚å¿µ&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org6a66968"&gt;
&lt;/div&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;&lt;a id="org71ea3dd"&gt;&lt;/a&gt;è¿›ç¨‹ç½‘æ ¼å’ŒèŒƒå›´æ“ä½œ&lt;br&gt;
&lt;div class="outline-text-5" id="text-org71ea3dd"&gt;
&lt;p&gt;
ä¸€ä¸ªåˆ†å¸ƒå¼æœºå™¨ä¸Šæœ‰ \(P\) ä¸ªè¿›ç¨‹ï¼Œç¼–å·ä» \(0\) åˆ° \(P-1\), æˆ‘ä»¬äººä¸ºåœ°å°†å®ƒä»¬æ’åˆ—æˆ \(R\) è¡Œ \(C\) åˆ—çš„ç½‘æ ¼ï¼Œç”¨è¡Œåˆ—æŒ‡æ ‡ \((i,j)\) æ¥è¡¨ç¤ºå…¶ä¸­ä¸€ä¸ªè¿›ç¨‹ã€‚
&lt;/p&gt;

&lt;p&gt;
è¿™æ ·åˆ’åˆ†çš„å¥½å¤„åœ¨äºçº¿æ€§ä»£æ•°æ“ä½œæ—¶ï¼ŒäºŒç»´æ•°ç»„è¢«åˆ†æ•£åˆ° &lt;b&gt;è¿›ç¨‹ç½‘æ ¼&lt;/b&gt; (process grid)ä¸­ï¼Œæ•°æ®çš„è¡Œåˆ—ä¸è¿›ç¨‹çš„è¡Œåˆ—æœ‰ç›´æ¥çš„å¯¹åº”ï¼Œå¾ˆé€‚åˆç¼–ç¨‹ã€‚
&lt;/p&gt;

&lt;p&gt;
å½“è¿›è¡Œçš„é€šä¿¡æ¶‰åŠä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹æ—¶ï¼Œå°±å°†è¿™ç§æ“ä½œç§°ä½œ &lt;b&gt;èŒƒå›´æ“ä½œ&lt;/b&gt; (scoped operations)ã€‚
åŸºæœ¬çš„èŒƒå›´æ“ä½œæœ‰
&lt;/p&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;è¡Œé€šä¿¡&lt;/li&gt;
&lt;li&gt;åˆ—é€šä¿¡&lt;/li&gt;
&lt;li&gt;å…¨éƒ¨é€šä¿¡&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a id="org67a9702"&gt;&lt;/a&gt;ä¸Šä¸‹æ–‡&lt;br&gt;
&lt;div class="outline-text-5" id="text-org67a9702"&gt;
&lt;p&gt;
&lt;b&gt;ä¸Šä¸‹æ–‡&lt;/b&gt; (context) è¡¨ç¤ºä¸€ä¸ªé€šä¿¡ç©ºé—´ï¼Œæ¯ä¸ªè¿›ç¨‹ç½‘æ ¼éƒ½æœ‰è‡ªå·±çš„ä¸Šä¸‹æ–‡ï¼Œåœ¨åŒä¸€ä¸ªä¸Šä¸‹æ–‡å†…éƒ¨çš„é€šä¿¡ä¸ä¼šè¢«å…¶å®ƒä¸Šä¸‹æ–‡çš„è¦†ç›–ã€‚
&lt;/p&gt;

&lt;p&gt;
ä¸Šä¸‹æ–‡çš„ä¸»è¦ä½œç”¨æ˜¯å¯ä»¥å°†åŒä¸€ç»„è¿›ç¨‹æ ‡è®°æˆä¸åŒçš„è¿›ç¨‹ç½‘æ ¼ï¼Œæ¥æ–¹ä¾¿è¿›è¡Œé€šä¿¡æ“ä½œã€‚
&lt;/p&gt;

&lt;p&gt;
BLACS ä¸­æœ‰å…³ä¸Šä¸‹æ–‡çš„å‡½æ•°æœ‰
&lt;/p&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;&lt;code&gt;BLACS_GRIDINIT&lt;/code&gt;, &lt;code&gt;BLACS_GRIDMAP&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;BLACS_GRIDEXIT&lt;/code&gt;, &lt;code&gt;BLACS_EXIT&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a id="org3eb7666"&gt;&lt;/a&gt;åŸºäºæ•°ç»„çš„é€šä¿¡&lt;br&gt;
&lt;div class="outline-text-5" id="text-org3eb7666"&gt;
&lt;p&gt;
BLACS ä¸­æœ‰ä¸¤ä¸ªåŸºæœ¬çš„æ•°æ®æ¨¡å‹
&lt;/p&gt;
&lt;/div&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;&lt;a id="org7dc880f"&gt;&lt;/a&gt;çŸ©å½¢çŸ©é˜µ&lt;br&gt;
&lt;div class="outline-text-6" id="text-org7dc880f"&gt;
&lt;p&gt;
ä¸€ç»´å‘é‡æ˜¯ç‰¹æ®Šçš„çŸ©å½¢çŸ©é˜µã€‚
&lt;/p&gt;

&lt;p&gt;
çŸ©å½¢çŸ©é˜µæ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œ &lt;code&gt;M&lt;/code&gt; è¡Œ &lt;code&gt;N&lt;/code&gt; åˆ—ï¼Œä¸»ç»´æ•°æ˜¯ &lt;code&gt;LDA&lt;/code&gt;, ä¸»ç»´æ•°å°±æ˜¯ç›¸é‚»çš„ä¸¤åˆ—æ•°åœ¨å†…å­˜ä¸­çš„é—´éš”.
&lt;/p&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a id="org6483dea"&gt;&lt;/a&gt;æ¢¯å½¢çŸ©é˜µ&lt;br&gt;
&lt;div class="outline-text-6" id="text-org6483dea"&gt;
&lt;p&gt;
ä¸‰è§’çŸ©é˜µå’Œå¯¹è§’çŸ©é˜µæ˜¯ç‰¹æ®Šçš„æ¢¯å½¢çŸ©é˜µã€‚
&lt;/p&gt;

&lt;p&gt;
æ¢¯å½¢çŸ©é˜µçš„æœ€å¤§åº•è¾¹æ˜¯ &lt;code&gt;M,N&lt;/code&gt; ä¸­æœ€å¤§çš„æ•°ï¼Œå¦ä¸€ä¸ªæ˜¯æ¢¯å½¢çš„é«˜ï¼Œæ¢¯å½¢çš„çŸ­åº•è¾¹æ˜¯é•¿åº•è¾¹å’Œé«˜çš„å·®ã€‚
&lt;/p&gt;

&lt;ul class="org-ul"&gt;
&lt;li&gt;&lt;code&gt;UPLO&lt;/code&gt;: æ¢¯å½¢çŸ©é˜µï¼Œ &lt;code&gt;'U','L'&lt;/code&gt; ä¸Šä¸‹æ¢¯å½¢&lt;/li&gt;
&lt;li&gt;&lt;code&gt;DIAG&lt;/code&gt;: å•ä½å¯¹è§’çŸ©é˜µ&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a id="orgfb914ce"&gt;&lt;/a&gt;æ— ç¼–å·é€šä¿¡&lt;br&gt;
&lt;div class="outline-text-5" id="text-orgfb914ce"&gt;
&lt;p&gt;
BLACS ä¸å…¶å®ƒé€šä¿¡å±‚çš„åŒºåˆ«ä¹‹ä¸€æ˜¯ï¼ŒBLACSä¸éœ€è¦ç”¨æˆ·æŒ‡å®šæ¶ˆæ¯çš„ç¼–å· (ä¾‹å¦‚ MPI çš„ tag) ,å› ä¸ºç¼–å·çš„é€‰æ‹©æœ‰æ—¶ä¼šå¯¼è‡´ç¼–ç¨‹çš„å›°éš¾ï¼Œæ‰€ä»¥ BLACS é€šè¿‡ä¸€ä¸ªç‰¹å®šçš„ç®—æ³•è‡ªåŠ¨ç”Ÿæˆæ¶ˆæ¯ç¼–å·ï¼Œç”¨æˆ·å¯ä»¥ç”¨ &lt;code&gt;SHIFT_RANGE&lt;/code&gt; æ¥å°† BLACS çš„æ¶ˆæ¯ç¼–å·é™åˆ¶åœ¨ä¸€ä¸ªèŒƒå›´é‡Œï¼Œæ¥å’Œç”¨æˆ·è‡ªå®šä¹‰çš„æ¶ˆæ¯ç¼–å·éš”ç¦»ã€‚
&lt;/p&gt;

&lt;p&gt;
BLACS çš„é€šä¿¡ä¿è¯
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;æ¥æ”¶ç«¯çŸ¥é“æ¶ˆæ¯çš„æ¥æº&lt;/li&gt;
&lt;li&gt;æ¥æ”¶çš„é¡ºåºä¸å‘é€çš„é¡ºåºä¸€è‡´&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id="outline-container-org10c5c9a" class="outline-4"&gt;
&lt;h4 id="org10c5c9a"&gt;ç»“æ„&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org10c5c9a"&gt;
&lt;p&gt;
BLACS ç”± 4 ä¸ªéƒ¨åˆ†æ„æˆ
&lt;/p&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;ç‚¹åˆ°ç‚¹é€šä¿¡&lt;/li&gt;
&lt;li&gt;å¹¿æ’­&lt;/li&gt;
&lt;li&gt;ç»„åˆ&lt;/li&gt;
&lt;li&gt;æ”¯æŒæ¨¡å—&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;
&lt;a href="https://www.netlib.org/blacs/BLACS/QRef.html"&gt;å‡½æ•°å‚è€ƒ&lt;/a&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;&lt;a id="orgcab1afa"&gt;&lt;/a&gt;å‘½åè§„åˆ™&lt;br&gt;
&lt;div class="outline-text-5" id="text-orgcab1afa"&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;ç‚¹åˆ°ç‚¹é€šä¿¡ä¸å¹¿æ’­ï¼š &lt;code&gt;vXXYY2D&lt;/code&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;&lt;code&gt;v&lt;/code&gt; è¡¨ç¤ºæ•°æ®ç±»å‹&lt;/li&gt;
&lt;li&gt;&lt;code&gt;XX&lt;/code&gt; è¡¨ç¤ºçŸ©é˜µçš„å½¢çŠ¶&lt;/li&gt;
&lt;li&gt;&lt;code&gt;YY&lt;/code&gt; è¡¨ç¤ºé€šä¿¡çš„ç±»å‹&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;ç»„åˆ: &lt;code&gt;vGZZZ2D&lt;/code&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;&lt;code&gt;v&lt;/code&gt; è¡¨ç¤ºæ•°æ®ç±»å‹&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ZZZ&lt;/code&gt; è¡¨ç¤ºæ“ä½œç±»å‹&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;æ”¯æŒæ¨¡å—: &lt;code&gt;BLACS_&amp;lt;name&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides"&gt;


&lt;colgroup&gt;
&lt;col class="org-left"&gt;

&lt;col class="org-left"&gt;
&lt;/colgroup&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th scope="col" class="org-left"&gt;&lt;code&gt;v&lt;/code&gt;&lt;/th&gt;
&lt;th scope="col" class="org-left"&gt;æ„ä¹‰&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;I&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;æ•´æ•°&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;S&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;å•ç²¾åº¦&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;D&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;åŒç²¾åº¦&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;C&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;å•ç²¾åº¦å¤æ•°&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;Z&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;åŒç²¾åº¦å¤æ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


&lt;table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides"&gt;


&lt;colgroup&gt;
&lt;col class="org-left"&gt;

&lt;col class="org-left"&gt;
&lt;/colgroup&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th scope="col" class="org-left"&gt;&lt;code&gt;XX&lt;/code&gt;&lt;/th&gt;
&lt;th scope="col" class="org-left"&gt;æ„ä¹‰&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;GE&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;çŸ©å½¢çŸ©é˜µ&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;TR&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;æ¢¯å½¢çŸ©é˜µ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


&lt;table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides"&gt;


&lt;colgroup&gt;
&lt;col class="org-left"&gt;

&lt;col class="org-left"&gt;
&lt;/colgroup&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th scope="col" class="org-left"&gt;&lt;code&gt;YY&lt;/code&gt;&lt;/th&gt;
&lt;th scope="col" class="org-left"&gt;æ„ä¹‰&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;SD&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;ç‚¹åˆ°ç‚¹å‘é€&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;RV&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;ç‚¹åˆ°ç‚¹æ¥æ”¶&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;BS&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;å¹¿æ’­å‘é€&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;BR&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;å¹¿æ’­æ¥æ”¶&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


&lt;table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides"&gt;


&lt;colgroup&gt;
&lt;col class="org-left"&gt;

&lt;col class="org-left"&gt;
&lt;/colgroup&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th scope="col" class="org-left"&gt;&lt;code&gt;ZZZ&lt;/code&gt;&lt;/th&gt;
&lt;th scope="col" class="org-left"&gt;æ„ä¹‰&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;AMX&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;æœ€å¤§ç»å¯¹å€¼&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;AMN&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;æœ€å°ç»å¯¹å€¼&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;SUM&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;æ±‚å’Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org7b71377" class="outline-3"&gt;
&lt;h3 id="org7b71377"&gt;PBLAS&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org7b71377"&gt;
&lt;p&gt;
&lt;a href="https://www.netlib.org/scalapack/pblas_qref.html"&gt;PBLAS&lt;/a&gt; çš„å‡½æ•°ç±»ä¼¼ BLAS, ç”±äºæ˜¯ä½œä¸º ScaLAPACK çš„ä¸€éƒ¨åˆ†åˆ†å‘çš„ï¼Œæ‰€ä»¥ä¸æä¾›ç»Ÿä¸€çš„ &lt;code&gt;.h&lt;/code&gt; å¤´æ–‡ä»¶ï¼Œå¾—è‡ªå·±å†™ã€‚
&lt;/p&gt;

&lt;p&gt;
&lt;a href="https://software.intel.com/content/www/us/en/develop/documentation/onemkl-developer-reference-c/top/pblas-routines.html"&gt;oneAPI/MKL/PBLAS&lt;/a&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org7493854" class="outline-3"&gt;
&lt;h3 id="org7493854"&gt;ScaLAPACK&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org7493854"&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgd34da54" class="outline-4"&gt;
&lt;h4 id="orgd34da54"&gt;åŸºæœ¬æ–¹æ³•&lt;/h4&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>BLACS</category><category>BLAS</category><category>C</category><category>LAPACK</category><category>MPI</category><category>PBLAS</category><category>ScaLAPACK</category><guid>https://chimez.github.io/posts/pblas-scalapack/</guid><pubDate>Tue, 24 Aug 2021 04:31:22 GMT</pubDate></item><item><title>xxhash</title><link>https://chimez.github.io/posts/xxhash/</link><dc:creator>chimez</dc:creator><description>&lt;div id="outline-container-orgda76d7a" class="outline-2"&gt;
&lt;h2 id="orgda76d7a"&gt;xxHash: å¿«é€Ÿçš„å“ˆå¸Œå‡½æ•°&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgda76d7a"&gt;
&lt;p&gt;
&lt;a href="https://github.com/Cyan4973/xxHash"&gt;Cyan4973/xxHash&lt;/a&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;div id="outline-container-org50ff9ec" class="outline-3"&gt;
&lt;h3 id="org50ff9ec"&gt;å®‰è£…&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org50ff9ec"&gt;
&lt;p&gt;
meson çš„ wrapDB ä¸­æœ‰ï¼Œæ‰€ä»¥åªéœ€è¦ &lt;code&gt;meson wrap install xxhash&lt;/code&gt;
&lt;/p&gt;

&lt;p&gt;
ç¼–è¯‘æ—¶ä½¿ç”¨ &lt;code&gt;XXH_INLINE_ALL&lt;/code&gt; é€‰é¡¹æé«˜æ€§èƒ½ï¼Œå¯¹äº meson æ¥è¯´éœ€è¦å†™ &lt;code&gt;xxhash_dep = dependency('libxxhash', default_options: ['inline-all=true'])&lt;/code&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org9339520" class="outline-3"&gt;
&lt;h3 id="org9339520"&gt;åŸºæœ¬ä½¿ç”¨&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org9339520"&gt;
&lt;p&gt;
æœ€å¿«çš„å“ˆå¸Œå‡½æ•°æ˜¯ &lt;code&gt;XXH3_64bits&lt;/code&gt;
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;"xxhash.h"&lt;/span&gt;

&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="k"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kr"&gt;inline&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;XXH64_hash_t&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="nf"&gt;hash_func&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;XXH3_64bits&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;&lt;span class="w"&gt;	&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>C</category><category>hash</category><guid>https://chimez.github.io/posts/xxhash/</guid><pubDate>Fri, 06 Aug 2021 16:30:25 GMT</pubDate></item><item><title>klib</title><link>https://chimez.github.io/posts/klib/</link><dc:creator>chimez</dc:creator><description>&lt;div id="outline-container-org7c6d7b0" class="outline-2"&gt;
&lt;h2 id="org7c6d7b0"&gt;klib: è½»é‡çº§ c å¤´æ–‡ä»¶åº“&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org7c6d7b0"&gt;
&lt;p&gt;
&lt;a href="https://github.com/attractivechaos/klib"&gt;attractivechaos/klib&lt;/a&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;div id="outline-container-org6bc07c2" class="outline-3"&gt;
&lt;h3 id="org6bc07c2"&gt;khash.h&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org6bc07c2"&gt;
&lt;p&gt;
å¿«é€Ÿè½»é‡çš„å“ˆå¸Œè¡¨åº“
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;"khash.h"&lt;/span&gt;

&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="k"&gt;typedef&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;kh_myname_key_t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="k"&gt;typedef&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;kh_myname_value_t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;kh_int_t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="nf"&gt;kh_myname_hash_func&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;kh_myname_key_t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;HASH&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="nf"&gt;kh_myname_hash_equal&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;kh_myname_key_t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key_1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;kh_myname_key_t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key_2&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key_1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key_2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;KHASH_INIT&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;myname&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;kh_myname_key_t&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;kh_myname_value_t&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;kh_myname_hash_func&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;kh_myname_hash_equal&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt;

&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;khiter_t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;	&lt;/span&gt;
&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;khash_t&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;myname&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;kh_init&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;myname&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="c1"&gt;// å­˜å…¥æ•°æ®&lt;/span&gt;
&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="n"&gt;kh_myname_key_t&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;calloc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;kh_myname_key_t&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;&lt;span class="w"&gt;			&lt;/span&gt;
&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ret&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;kh_put&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;myname&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ret&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;			&lt;/span&gt;
&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="n"&gt;kh_value&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;			&lt;/span&gt;
&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="c1"&gt;// è¯»å–ï¼Œä¿®æ”¹ï¼Œåˆ é™¤&lt;/span&gt;
&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;kh_get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;myname&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;			&lt;/span&gt;

&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;kh_exist&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;||&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;kh_end&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="w"&gt;               &lt;/span&gt;&lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"not exits!&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;"&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;kh_value&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;			&lt;/span&gt;
&lt;span class="w"&gt;               &lt;/span&gt;&lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"wrong value!&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;"&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="n"&gt;kh_del&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;myname&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;			&lt;/span&gt;
&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="n"&gt;free&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;kh_key&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;&lt;span class="w"&gt;			&lt;/span&gt;
&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;kh_destroy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;myname&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;	&lt;/span&gt;

&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>C</category><category>khash</category><category>klib</category><guid>https://chimez.github.io/posts/klib/</guid><pubDate>Fri, 06 Aug 2021 16:19:52 GMT</pubDate></item><item><title>cython</title><link>https://chimez.github.io/posts/cython/</link><dc:creator>chimez</dc:creator><description>&lt;div id="outline-container-org16923ff" class="outline-2"&gt;
&lt;h2 id="org16923ff"&gt;Cython&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org16923ff"&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgc1bdbcb" class="outline-3"&gt;
&lt;h3 id="orgc1bdbcb"&gt;åŸºæœ¬æ¦‚å¿µ&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgc1bdbcb"&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgfbfb4b2" class="outline-4"&gt;
&lt;h4 id="orgfbfb4b2"&gt;æ–‡ä»¶&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgfbfb4b2"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;.pyx&lt;/code&gt; æ˜¯ &lt;code&gt;cython&lt;/code&gt; è¯­æ³•çš„æºæ–‡ä»¶&lt;/li&gt;
&lt;li&gt;&lt;code&gt;.pyd&lt;/code&gt; (windows) æ˜¯ windows å¹³å°ä¸Šç¼–è¯‘åçš„æ–‡ä»¶ï¼Œå¯¹åº” linux å¹³å°çš„ &lt;code&gt;*.so&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;.pyd&lt;/code&gt; (æºæ–‡ä»¶) æ˜¯å¤–éƒ¨å£°æ˜ï¼Œå³å¯¹ &lt;code&gt;.h&lt;/code&gt; å¤´æ–‡ä»¶çš„é‡æ–°å°è£…&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org3b22f62" class="outline-4"&gt;
&lt;h4 id="org3b22f62"&gt;åº“&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org3b22f62"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;Cython.Build&lt;/code&gt; python ç«¯è°ƒç”¨ï¼Œç”¨äºç¼–è¯‘&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cython.parallel&lt;/code&gt; cython ç«¯è°ƒç”¨ï¼Œå¹¶è¡Œ &lt;code&gt;prange&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
æ‰€æœ‰ c åº“åœ¨ &lt;a href="https://github.com/cython/cython/tree/master/Cython/Includes"&gt;Cython/Includes&lt;/a&gt; ä¸­
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;libc&lt;/code&gt; cython ç«¯è°ƒç”¨ï¼Œ c æ ‡å‡†åº“&lt;/li&gt;
&lt;li&gt;&lt;code&gt;libcpp&lt;/code&gt; cython ç«¯è°ƒç”¨ï¼Œ c++ stl åº“&lt;/li&gt;
&lt;li&gt;&lt;code&gt;numpy&lt;/code&gt; cython ç«¯è°ƒç”¨ï¼Œnumpy æ”¯æŒ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;posix&lt;/code&gt; cython ç«¯è°ƒç”¨ï¼Œposix åº“&lt;/li&gt;
&lt;li&gt;&lt;code&gt;openmp&lt;/code&gt; cython ç«¯è°ƒç”¨ï¼Œå¹¶è¡Œ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cpython&lt;/code&gt; cython ç«¯è°ƒç”¨ï¼Œ python çš„ c æ¥å£&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cython&lt;/code&gt; cython ç«¯è°ƒç”¨ï¼Œæ§åˆ¶ç‰¹æ®Šè¡Œä¸º&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org4746f4b" class="outline-4"&gt;
&lt;h4 id="org4746f4b"&gt;è¯­æ³•&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org4746f4b"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    from libc.math cimport log2 # å¼•å…¥ c å‡½æ•°
    cdef int x # å£°æ˜å˜é‡ç±»å‹
    cdef int [:,:] x # å£°æ˜å˜é‡æ˜¯ numpy çš„ 2d å‘é‡
    ctypedef struct queue: # å£°æ˜ç±»å‹
        pass

    ctypedef fused my_type: # æ³›å‹
        int
        double
        long long

    # ç±»çš„å®šä¹‰ï¼Œæ³¨æ„ä½¿ç”¨ __cinit__
    cdef class A:
        cdef int a
        def __cinit__(self):
            self.a = 1

    &amp;lt;void*&amp;gt;value # ç±»å‹è½¬æ¢æˆæŒ‡é’ˆ

    # å®šä¹‰ c å‡½æ•°ï¼Œå¼‚å¸¸æ—¶è¿”å› -1
    cdef int func(int x) execpt? -1:
        pass
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org294109a" class="outline-4"&gt;
&lt;h4 id="org294109a"&gt;æ–‡ä»¶æ³¨è§£&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org294109a"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;# distutils: language=c++&lt;/code&gt; ä½¿ç”¨ &lt;code&gt;c++&lt;/code&gt; ç¼–è¯‘&lt;/li&gt;
&lt;li&gt;&lt;code&gt;# distutils: sources = c-algorithms/src/queue.c&lt;/code&gt; æŒ‡å®šé™æ€é“¾æ¥çš„æºæ–‡ä»¶&lt;/li&gt;
&lt;li&gt;&lt;code&gt;# distutils: include_dirs = c-algorithms/src/&lt;/code&gt; æŒ‡å®šå¤´æ–‡ä»¶ç›®å½•&lt;/li&gt;
&lt;li&gt;&lt;code&gt;# distutils: extra_compile_args=-fopenmp&lt;/code&gt; æŒ‡å®šç¼–è¯‘å™¨å‚æ•°&lt;/li&gt;
&lt;li&gt;&lt;code&gt;# distutils: extra_link_args=-fopenmp&lt;/code&gt; æŒ‡å®šé“¾æ¥å‚æ•°&lt;/li&gt;
&lt;li&gt;&lt;code&gt;# cython: infer_types=True&lt;/code&gt; è‡ªåŠ¨æ¨æ–­ç±»å‹ï¼Œåªä½œç”¨äºä¸€çº§ç¼©è¿›çš„å˜é‡&lt;/li&gt;
&lt;li&gt;&lt;code&gt;# cython: profile=True&lt;/code&gt; å¼€å¯ profile&lt;/li&gt;
&lt;li&gt;&lt;code&gt;# cython: linetrace=True&lt;/code&gt; å¼€å¯ profile è¡Œè¿½è¸ª&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgb912006" class="outline-4"&gt;
&lt;h4 id="orgb912006"&gt;å‡½æ•°æ³¨è§£&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgb912006"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;@cython.boundscheck(False)&lt;/code&gt; å…³é—­æ•°ç»„è¾¹ç•Œæ£€æŸ¥&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@cython.wraparound(False)&lt;/code&gt; å…³é—­è´ŸæŒ‡æ ‡&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org17fdb46" class="outline-3"&gt;
&lt;h3 id="org17fdb46"&gt;ç¼–è¯‘&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org17fdb46"&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgb555925" class="outline-4"&gt;
&lt;h4 id="orgb555925"&gt;åŸºæœ¬ç»“æ„&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgb555925"&gt;
&lt;p&gt;
&lt;code&gt;setup.py&lt;/code&gt;
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="kn"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;setuptools&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;setup&lt;/span&gt;
    &lt;span class="kn"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;Cython.Build&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;cythonize&lt;/span&gt;

    &lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;ext_modules&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cythonize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"helloworld.pyx"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
&lt;code&gt;helloworld.pyx&lt;/code&gt;
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"Hello World"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
æ‰§è¡Œå‘½ä»¤
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    python setup.py build_ext --inplace
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
è¿™ç¼–è¯‘å¾—åˆ°çš„ &lt;code&gt;helloworld.so&lt;/code&gt; æˆ– &lt;code&gt;helloworld.pyd&lt;/code&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgc0d6ffd" class="outline-4"&gt;
&lt;h4 id="orgc0d6ffd"&gt;åŠ¨æ€é“¾æ¥&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgc0d6ffd"&gt;
&lt;p&gt;
&lt;a href="https://cython.readthedocs.io/en/latest/src/tutorial/external.html#dynamic-linking"&gt;å‚è€ƒ&lt;/a&gt;
&lt;/p&gt;

&lt;p&gt;
éœ€è¦æŒ‡æ˜ &lt;code&gt;libraries&lt;/code&gt; å‚æ•°
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="kn"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;setuptools&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Extension&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;setup&lt;/span&gt;
    &lt;span class="kn"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;Cython.Build&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;cythonize&lt;/span&gt;

    &lt;span class="n"&gt;ext_modules&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
        &lt;span class="n"&gt;Extension&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"demo"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                  &lt;span class="n"&gt;sources&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"demo.pyx"&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
                  &lt;span class="n"&gt;libraries&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"m"&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;  &lt;span class="c1"&gt;# Unix-like specific&lt;/span&gt;
                  &lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;]&lt;/span&gt;

    &lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"Demos"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
          &lt;span class="n"&gt;ext_modules&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;cythonize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ext_modules&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgff29659" class="outline-4"&gt;
&lt;h4 id="orgff29659"&gt;é™æ€é“¾æ¥&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgff29659"&gt;
&lt;p&gt;
ä½¿ç”¨æ³¨è§£ 
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    # distutils: sources = c-algorithms/src/queue.c
    # distutils: include_dirs = c-algorithms/src/

    pass
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgb06c25f" class="outline-3"&gt;
&lt;h3 id="orgb06c25f"&gt;ä½¿ç”¨ c åº“&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgb06c25f"&gt;
&lt;/div&gt;
&lt;div id="outline-container-org302728e" class="outline-4"&gt;
&lt;h4 id="org302728e"&gt;å¤–éƒ¨å£°æ˜&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org302728e"&gt;
&lt;p&gt;
ä½¿ç”¨å¤´æ–‡ä»¶, å¤–éƒ¨å£°æ˜å¯ä»¥æ”¾åœ¨ &lt;code&gt;.pyd&lt;/code&gt; æ–‡ä»¶ä¸­
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    cdef extern from "math.h":
        double sin(double x)
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgcb4c058" class="outline-4"&gt;
&lt;h4 id="orgcb4c058"&gt;å¼‚å¸¸å¤„ç†&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgcb4c058"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;except? -1&lt;/code&gt; è¯­æ³•è¡¨ç¤ºå½“å‘ç”Ÿä»»ä½•é”™è¯¯æ—¶ï¼Œè¿”å› &lt;code&gt;-1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;execpt *&lt;/code&gt; è¡¨ç¤ºè¿”å›æ—¶è°ƒç”¨ &lt;code&gt;PyErr_Occurred()&lt;/code&gt; ï¼Œå½“å‡½æ•°è¿”å› &lt;code&gt;void&lt;/code&gt; å¹¶ä¸”éœ€è¦ä¼ é€’é”™è¯¯æ—¶ä½¿ç”¨è¿™ä¸ª&lt;/li&gt;
&lt;/ol&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    cdef int pop(self) except? -1:
        if cqueue.queue_is_empty(self._c_queue):
            raise IndexError("Queue is empty")
        return &amp;lt;Py_ssize_t&amp;gt;cqueue.queue_pop_head(self._c_queue)

    cdef int spam() except *:
        ...
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org1e09148" class="outline-3"&gt;
&lt;h3 id="org1e09148"&gt;ä½¿ç”¨ numpy&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org1e09148"&gt;
&lt;p&gt;
numpy çš„ &lt;code&gt;ndarray&lt;/code&gt; åœ¨ cython ä¸­ç”¨åš typed memoryview
&lt;/p&gt;
&lt;/div&gt;
&lt;div id="outline-container-org4be22e3" class="outline-4"&gt;
&lt;h4 id="org4be22e3"&gt;åŸºæœ¬ä¾‹å­&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org4be22e3"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    import numpy as np

    DTYPE = np.intc


    cdef int clip(int a, int min_value, int max_value):
        return min(max(a, min_value), max_value)


    def compute(int[:, :] array_1, int[:, :] array_2, int a, int b, int c):

        cdef Py_ssize_t x_max = array_1.shape[0]
        cdef Py_ssize_t y_max = array_1.shape[1]
        assert tuple(array_1.shape) == tuple(array_2.shape)

        result = np.zeros((x_max, y_max), dtype=DTYPE)
        cdef int[:, :] result_view = result

        cdef int tmp
        cdef Py_ssize_t x, y

        for x in range(x_max):
            for y in range(y_max):

                tmp = clip(array_1[x, y], 2, 10)
                tmp = tmp * a + array_2[x, y] * b
                result_view[x, y] = tmp + c

        return result
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org986ea37" class="outline-3"&gt;
&lt;h3 id="org986ea37"&gt;å¹¶è¡Œ&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org986ea37"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;prange&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;
ä½¿ç”¨ &lt;code&gt;nogil&lt;/code&gt;
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;      from cython.parallel import prange
      cdef int func(int x) nogil:
          cdef int i
          cdef int y
          for i in prange(x, nogil=True):
              y += i 
          return y
&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>cython</category><category>python</category><guid>https://chimez.github.io/posts/cython/</guid><pubDate>Thu, 05 Aug 2021 12:47:25 GMT</pubDate></item><item><title>MPI</title><link>https://chimez.github.io/posts/mpi/</link><dc:creator>chimez</dc:creator><description>&lt;div id="outline-container-org68c3d6d" class="outline-2"&gt;
&lt;h2 id="org68c3d6d"&gt;MPI: Message Passing Interface&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org68c3d6d"&gt;
&lt;p&gt;
MPI æ˜¯æ¶ˆæ¯ä¼ é€’æ¥å£æ ‡å‡†ï¼Œä¸»è¦çš„å®ç°æœ‰ Intel MPI, OpenMPI å’Œ MPICH ç­‰. MPI æ ‡å‡†ç›®å‰æœ‰ä¸‰ç‰ˆ MPI-1,MPI-2, MPI-3, æ ‡å‡†æ”¯æŒçš„è¯­è¨€æ˜¯ c å’Œ fortran, c++ æ”¯æŒåœ¨ MPI-3 ä¸­ç§»é™¤äº†ã€‚
&lt;/p&gt;

&lt;p&gt;
MPI çš„ä¼˜åŠ¿ï¼š
&lt;/p&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;æ ‡å‡†ï¼šæ‰€æœ‰è¶…çº§è®¡ç®—æœºéƒ½æ”¯æŒ&lt;/li&gt;
&lt;li&gt;å¯ç§»æ¤ï¼šæ— éœ€ä¿®æ”¹ç¨‹åºå°±èƒ½åœ¨æ‰€æœ‰æ”¯æŒ MPI çš„å¹³å°ä¸Šè¿è¡Œ&lt;/li&gt;
&lt;li&gt;é«˜æ€§èƒ½ï¼šæ‰€æœ‰å®ç°éƒ½ä¼šæ ¹æ®æœºå™¨åšä¼˜åŒ–&lt;/li&gt;
&lt;li&gt;åŠŸèƒ½é½å…¨ï¼šMPI-3 ä¸­æœ‰è¶…è¿‡ 430 ä¸ªå‡½æ•°ï¼Œå°½ç®¡å¤§å¤šæ•°ç¨‹åºå¯èƒ½å°±ç”¨å‡ åä¸ªå‡½æ•°&lt;/li&gt;
&lt;li&gt;å¯ç”¨ï¼šç›¸å½“å¤šçš„å®ç°éƒ½å¯ç”¨ï¼ŒåŒ…æ‹¬ä¾›åº”å•†æä¾›çš„å’Œå¼€æ”¾è·å–çš„&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgaff38e8" class="outline-3"&gt;
&lt;h3 id="orgaff38e8"&gt;åŸºæœ¬ç»“æ„&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgaff38e8"&gt;
&lt;/div&gt;
&lt;div id="outline-container-org087b803" class="outline-4"&gt;
&lt;h4 id="org087b803"&gt;ç¨‹åºç»“æ„&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org087b803"&gt;
&lt;p&gt;
æ‰€æœ‰ MPI ç¨‹åºéƒ½åˆ†ä»¥ä¸‹å‡ æ­¥
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;å¼•ç”¨å¤´æ–‡ä»¶ &lt;code&gt;"mpi.h"&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œé¡ºåºä»£ç &lt;/li&gt;
&lt;li&gt;åˆå§‹åŒ– MPI ç¯å¢ƒ&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œå¹¶è¡Œä»»åŠ¡&lt;/li&gt;
&lt;li&gt;ç»ˆæ­¢ MPI ç¯å¢ƒ&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œé¡ºåºä»£ç &lt;/li&gt;
&lt;li&gt;ç¨‹åºç»“æŸ&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgc9a5892" class="outline-4"&gt;
&lt;h4 id="orgc9a5892"&gt;æ¥å£çº¦å®š&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgc9a5892"&gt;
&lt;p&gt;
æ‰€æœ‰ MPI çš„å‡½æ•°éƒ½ä»¥ &lt;code&gt;MPI_&lt;/code&gt; å¼€å¤´ï¼Œå¹¶ä¸”ä¸‹åˆ’çº¿åçš„ç¬¬ä¸€ä¸ªå­—æ¯å¤§å†™ï¼Œå‡½æ•°è¿”å›æ¶ˆæ¯ç  &lt;code&gt;rc&lt;/code&gt; , å¦‚æœæˆåŠŸå°±æ˜¯ &lt;code&gt;MPI_SUCCESS&lt;/code&gt;, å³ &lt;code&gt;0&lt;/code&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgbdca607" class="outline-4"&gt;
&lt;h4 id="orgbdca607"&gt;åŸºæœ¬æ¦‚å¿µ&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgbdca607"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;b&gt;communicator&lt;/b&gt;: é€šä¿¡å™¨ï¼Œå®šä¹‰å“ªäº›è¿›ç¨‹ä¹‹é—´éœ€è¦é€šä¿¡
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;MPI_COMM_WORLD&lt;/code&gt; é€šä¿¡å™¨è¡¨ç¤ºæ‰€æœ‰è¿›ç¨‹éƒ½ç›¸äº’é€šä¿¡&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;b&gt;group&lt;/b&gt;: è¿›ç¨‹çš„åˆ†ç»„&lt;/li&gt;
&lt;li&gt;&lt;b&gt;rank&lt;/b&gt;: ç§©ï¼ŒæŒ‡çš„æ˜¯ä¸€ä¸ªé€šä¿¡å™¨ä¸­æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±å•ç‹¬çš„ç¼–å·ï¼Œæœ‰æ—¶å€™ä¹Ÿå«åš &lt;b&gt;ä»»åŠ¡ ID&lt;/b&gt; ï¼Œç§©æ˜¯ä» 0 å¼€å§‹è¿ç»­çš„æ•´æ•°&lt;/li&gt;
&lt;li&gt;&lt;b&gt;é”™è¯¯å¤„ç†&lt;/b&gt;: å°½ç®¡å¤§å¤šæ•°å‡½æ•°éƒ½è¿”å›ä¸€ä¸ªé”™è¯¯ç ï¼Œä½†æ˜¯ MPI æ ‡å‡†æŒ‡å‡ºï¼Œå½“é”™è¯¯å‘ç”Ÿæ—¶ç¨‹åºåº”ç«‹åˆ»ç»ˆæ­¢ï¼Œæ‰€ä»¥å¹¶ä¸éœ€è¦è‡ªå·±æ•è·å’Œå¤„ç†æ‰€æœ‰é”™è¯¯ç &lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgd87fe70" class="outline-4"&gt;
&lt;h4 id="orgd87fe70"&gt;MPI ç‰ˆæœ¬&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgd87fe70"&gt;
&lt;p&gt;
&lt;b&gt;MPI-1&lt;/b&gt; (1994) ï¼šæœ€æ—©çš„ç‰ˆæœ¬ï¼Œæ„å»ºèµ·äº† MPI çš„åŸºæœ¬æ¡†æ¶ï¼ŒåŒ…æ‹¬
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;åŸºæœ¬çš„ç¯å¢ƒç®¡ç†&lt;/li&gt;
&lt;li&gt;ç‚¹åˆ°ç‚¹é€šä¿¡&lt;/li&gt;
&lt;li&gt;é›†ä½“é€šä¿¡&lt;/li&gt;
&lt;li&gt;ç»„å’Œé€šä¿¡å™¨&lt;/li&gt;
&lt;li&gt;è™šæ‹Ÿæ‹“æ‰‘&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
&lt;b&gt;MPI-2&lt;/b&gt; (1998) ï¼š ä¸º MPI-1 æ·»åŠ å¤§é‡æ–°å‡½æ•°
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;åŠ¨æ€è¿›ç¨‹ï¼šå¯ä»¥åœ¨ä»»åŠ¡å¯åŠ¨ååˆ›å»ºæ–°çš„è¿›ç¨‹&lt;/li&gt;
&lt;li&gt;å•è¾¹é€šä¿¡ï¼šæä¾›å•å‘é€šä¿¡åŠŸèƒ½ï¼ŒåŒ…æ‹¬å…±äº«å†…å­˜å’Œè¿œç¨‹ç´¯åŠ æ“ä½œ&lt;/li&gt;
&lt;li&gt;æ‰©å±•é›†ä½“é€šä¿¡ï¼šå…è®¸é€šä¿¡å™¨é—´çš„é›†ä½“é€šä¿¡&lt;/li&gt;
&lt;li&gt;æ‰©å±•æ¥å£ï¼šå…è®¸åœ¨ MPI ä¹‹ä¸Šæ„é€ å¼€å‘æ›¾ï¼ŒåŒ…æ‹¬ debugger å’Œ profiler ç­‰&lt;/li&gt;
&lt;li&gt;é¢å¤–è¯­è¨€ç»‘å®šï¼šæ”¯æŒ fortran 90&lt;/li&gt;
&lt;li&gt;å¹¶è¡Œ I/O&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
&lt;b&gt;MPI-3&lt;/b&gt; (2012) ï¼šå¯¹ MPI-1 å’Œ MPI-2 æ›´å¤šçš„æ‰©å±•
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;éé˜»å¡é›†ä½“æ“ä½œ&lt;/li&gt;
&lt;li&gt;æ–°çš„å•è¾¹é€šä¿¡æ“ä½œ&lt;/li&gt;
&lt;li&gt;è¿‘é‚»é›†ä½“ï¼šæ‰©å±•æ›´å¤šè™šæ‹Ÿæ‹“æ‰‘ç»“æ„&lt;/li&gt;
&lt;li&gt;æ”¯æŒ fortran 2008&lt;/li&gt;
&lt;li&gt;MPIT Tool Interface å…è®¸ MPI å®ç°å¼€æ”¾ä¸€äº›å†…éƒ¨å˜é‡ç»™ç”¨æˆ·ï¼Œç”¨äºæ€§èƒ½æå‡&lt;/li&gt;
&lt;li&gt;Matched Probe: æ”¹è¿›å¤šçº¿ç¨‹ä¸­çš„ probe åŠŸèƒ½&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
&lt;b&gt;MPI-4&lt;/b&gt; (2021) : TODO
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;å¢åŠ å¤§ count å‚æ•°æ”¯æŒ&lt;/li&gt;
&lt;li&gt;æŒä¹…é›†ä½“&lt;/li&gt;
&lt;li&gt;éƒ¨åˆ†é€šä¿¡&lt;/li&gt;
&lt;li&gt;æ–°çš„åˆå§‹åŒ–æ–¹å¼&lt;/li&gt;
&lt;li&gt;æ”¹è¿›ä¿¡æ¯å’Œé”™è¯¯å¤„ç†&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgeb9d864" class="outline-3"&gt;
&lt;h3 id="orgeb9d864"&gt;ç¯å¢ƒç®¡ç†å‡½æ•°&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgeb9d864"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;MPI_Init (&amp;amp;argc,&amp;amp;argv)&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;åˆå§‹åŒ– MPI ç¯å¢ƒï¼Œåº”åœ¨æ‰€æœ‰ MPI å‡½æ•°ä¹‹å‰è°ƒç”¨ï¼Œå¹¶ä¸”åªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼Œè¿™ä¸ªå‡½æ•°å…·ä½“åšçš„äº‹æƒ…æ˜¯å®ç°ä¾èµ–çš„&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Comm_size (comm,&amp;amp;size)&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;è·å¾—é€šä¿¡å™¨ &lt;code&gt;comm&lt;/code&gt; ä¸­ MPI è¿›ç¨‹çš„æ€»æ•°&lt;/li&gt;
&lt;li&gt;å¦‚æœé€šä¿¡å™¨æ˜¯ &lt;code&gt;MPI_COMM_WORLD&lt;/code&gt; é‚£ä¹ˆå°±ä¼šå¾—åˆ°ç¨‹åºçš„æ€»è¿›ç¨‹æ•°&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Comm_rank (comm,&amp;amp;rank)&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;è·å¾—è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„è¿›ç¨‹åœ¨é€šä¿¡å™¨ &lt;code&gt;comm&lt;/code&gt; ä¸­çš„ç§©ï¼Œ&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Abort (comm,errorcode)&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;ç»ˆæ­¢é€šä¿¡å™¨ &lt;code&gt;comm&lt;/code&gt; ä¸­çš„æ‰€æœ‰è¿›ç¨‹&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Get_processor_name (&amp;amp;name,&amp;amp;resultlength)&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;è·å¾—è¿›ç¨‹çš„åå­—å’Œåå­—çš„é•¿åº¦&lt;/li&gt;
&lt;li&gt;åå­—çš„ç¼“å†²åŒºå¤§å°è‡³å°‘æ˜¯ &lt;code&gt;MPI_MAX_PROCESSOR_NAME&lt;/code&gt; ä¸ª &lt;code&gt;sizeof(char)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å…·ä½“è¿”å›çš„åå­—æ˜¯ä»€ä¹ˆæ˜¯å®ç°ä¾èµ–çš„&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Get_version (&amp;amp;version,&amp;amp;subversion)&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;è·å¾— MPI æ ‡å‡†çš„ç‰ˆæœ¬å·å’Œå­ç‰ˆæœ¬å·&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Initialized (&amp;amp;flag)&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;æµ‹è¯•æ˜¯å¦å·²ç»è°ƒç”¨è¿‡ &lt;code&gt;MPI_Init()&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Wtime ()&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;è¿”å›è¯¥è¿›ç¨‹æ‰€å¤„çš„æ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½&lt;/li&gt;
&lt;li&gt;ä¸åŒè¿›ç¨‹çš„æ—¶é—´å¯èƒ½ä¸ä¸€æ ·ï¼Œä½†å¤§å¤šæ•°å®ç°ä¼šåŒæ­¥è¿™ä¸ªæ—¶é—´&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Wtick ()&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;è¿”å› &lt;code&gt;MPI_Wtime()&lt;/code&gt; çš„ç²¾åº¦&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Finalize ()&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;ç»ˆæ­¢ MPI ç¯å¢ƒï¼Œæ¯ä¸ª MPI ç¨‹åºåªèƒ½è°ƒç”¨ä¸€æ¬¡&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;"mpi.h"&lt;/span&gt;

&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;argc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;[])&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;MPI_Init&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;argc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;num_tasks&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;MPI_Comm_size&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MPI_COMM_WORLD&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;num_tasks&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;rank&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;MPI_Comm_rank&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MPI_COMM_WORLD&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;rank&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;hostname&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;MPI_MAX_PROCESSOR_NAME&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name_len&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;MPI_Get_processor_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hostname&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;name_len&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;MPI_Finalize&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org1eff52f" class="outline-3"&gt;
&lt;h3 id="org1eff52f"&gt;ç‚¹åˆ°ç‚¹é€šä¿¡&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org1eff52f"&gt;
&lt;/div&gt;
&lt;div id="outline-container-org9bee9c0" class="outline-4"&gt;
&lt;h4 id="org9bee9c0"&gt;ä¸€èˆ¬å‚æ•°è¯´æ˜&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org9bee9c0"&gt;
&lt;table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides"&gt;


&lt;colgroup&gt;
&lt;col class="org-left"&gt;

&lt;col class="org-left"&gt;
&lt;/colgroup&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th scope="col" class="org-left"&gt;ç±»å‹&lt;/th&gt;
&lt;th scope="col" class="org-left"&gt;ä¸¾ä¾‹çš„å‡½æ•°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class="org-left"&gt;Blocking sends&lt;/td&gt;
&lt;td class="org-left"&gt;MPI&lt;sub&gt;Send&lt;/sub&gt;(buffer,count,type,dest,tag,comm)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;Non-blocking sends&lt;/td&gt;
&lt;td class="org-left"&gt;MPI&lt;sub&gt;Isend&lt;/sub&gt;(buffer,count,type,dest,tag,comm,request)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;Blocking receive&lt;/td&gt;
&lt;td class="org-left"&gt;MPI&lt;sub&gt;Recv&lt;/sub&gt;(buffer,count,type,source,tag,comm,status)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;Non-blocking receive&lt;/td&gt;
&lt;td class="org-left"&gt;MPI&lt;sub&gt;Irecv&lt;/sub&gt;(buffer,count,type,source,tag,comm,request)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;
å‚æ•°è¯´æ˜ï¼š
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;b&gt;buffer&lt;/b&gt;: è¦è¢«æ”¶å‘çš„å†…å®¹ï¼Œå†…å­˜åœ°å€ï¼Œä¹Ÿå°±æ˜¯æŒ‡é’ˆ&lt;/li&gt;
&lt;li&gt;&lt;b&gt;count&lt;/b&gt;: è¦æ”¶å‘çš„æ•°æ®å¤§å°&lt;/li&gt;
&lt;li&gt;&lt;b&gt;type&lt;/b&gt;: æ•°æ®ç±»å‹ï¼Œå…¨å¤§å†™çš„ä¸€ä¸ªé‡ &lt;code&gt;MPI_CHAR&lt;/code&gt; ç­‰ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰&lt;/li&gt;
&lt;li&gt;&lt;b&gt;destination&lt;/b&gt;: å‘é€çš„ç›®æ ‡è¿›ç¨‹çš„ rank&lt;/li&gt;
&lt;li&gt;&lt;b&gt;source&lt;/b&gt;: æ¥å—çš„æºè¿›ç¨‹çš„ rankï¼Œ
&lt;ol class="org-ol"&gt;
&lt;li&gt;å¦‚æœæ˜¯ &lt;code&gt;MPI_ANY_SOURCE&lt;/code&gt; é‚£ä¹ˆå°±ä»æ‰€æœ‰è¿›ç¨‹æ¥æ”¶&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;b&gt;tag&lt;/b&gt;: ä¸€ä¸ªä»»æ„çš„éè´Ÿæ•´æ•°å‚æ•°ï¼Œç”¨æ¥æ ‡è®°ä¸åŒçš„ä¿¡æ¯ï¼Œæ¥æ”¶å’Œå‘é€ä¸¤æ–¹çš„ &lt;code&gt;tag&lt;/code&gt; è¦ç›¸åŒï¼Œ
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;MPI_ANY_TAG&lt;/code&gt; ä¼šæ¥æ”¶æ‰€æœ‰ tag&lt;/li&gt;
&lt;li&gt;MPI æ ‡å‡†æŒ‡å‡º tag åº”è¯¥åœ¨ 0-32767, ä¸è¿‡å¤§å¤šæ•°å®ç°éƒ½æ”¯æŒæ›´å¤§çš„æ•°&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;b&gt;comm&lt;/b&gt;: é€šä¿¡å™¨&lt;/li&gt;
&lt;li&gt;&lt;b&gt;status&lt;/b&gt;: æ˜¯æ”¶åˆ°çš„æ¶ˆæ¯çš„å±æ€§ï¼Œç±»å‹æ˜¯ &lt;code&gt;MPI_Status&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;MPI_Get_count()&lt;/code&gt; å¯ä»¥è·å–æ”¶åˆ°çš„æ¶ˆæ¯çš„å¤§å°&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;b&gt;request&lt;/b&gt;: éé˜»å¡æ”¶å‘çš„å›è°ƒï¼Œç±»å‹æ˜¯ &lt;code&gt;MPI_Request&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgcdd630e" class="outline-4"&gt;
&lt;h4 id="orgcdd630e"&gt;å¸¸ç”¨é˜»å¡ç‚¹åˆ°ç‚¹é€šä¿¡å‡½æ•°&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgcdd630e"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;MPI_Send()&lt;/code&gt; åŸºæœ¬çš„å‘é€æ¶ˆæ¯, åªæœ‰å½“å‘é€ä¿¡é“å†æ¬¡å¯ç”¨æ—¶æ‰è¿”å›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Recv()&lt;/code&gt; åŸºæœ¬çš„æ¥æ”¶æ¶ˆæ¯ï¼Œé˜»å¡ç›´åˆ°æ¥æ”¶ä¿¡é“å†æ¬¡å¯ç”¨&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Ssend()&lt;/code&gt; åŒæ­¥é˜»å¡å‘é€ï¼Œé˜»å¡ç›´åˆ°å‘é€ä¿¡é“å¯ç”¨å¹¶ä¸”æ¥æ”¶æ–¹å¼€å§‹æ¥æ”¶è¿™ä¸ªæ¶ˆæ¯&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Sendrecv()&lt;/code&gt; å‘é€æ¶ˆæ¯å¹¶å‘é€å›æ‰§ï¼Œé˜»å¡ç›´åˆ°å‘é€ä¿¡é“å¯ç”¨ï¼Œå¹¶ä¸”æ¥æ”¶æ–¹å·²ç»æ”¶åˆ°æ¶ˆæ¯&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Wait()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Waitany()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Waitall()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Waitsome()&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;é˜»å¡ç›´åˆ°æŸä¸ªéé˜»å¡çš„æ”¶å‘å®Œæˆ&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Probe()&lt;/code&gt; è¿›è¡Œé˜»å¡æµ‹è¯•&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Get_count()&lt;/code&gt; è¿”å›æ”¶åˆ°çš„æ¶ˆæ¯çš„æºã€æ ‡ç­¾å’Œå¤§å°
&lt;ol class="org-ol"&gt;
&lt;li&gt;è¾“å‡ºç±»å‹æ˜¯ &lt;code&gt;MPI_SOURCE&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org1f6ffe5" class="outline-4"&gt;
&lt;h4 id="org1f6ffe5"&gt;å¸¸ç”¨éé˜»å¡ç‚¹åˆ°ç‚¹é€šä¿¡å‡½æ•°&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org1f6ffe5"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;MPI_Isend()&lt;/code&gt; éé˜»å¡å‘é€ï¼Œæ‰€æŒ‡å®šçš„å‘é€ buffer åº”è¯¥åœ¨ &lt;code&gt;MPI_Probe()&lt;/code&gt; ç¡®å®šå·²ç»å‘é€å®Œæˆä¹‹å‰ä¸ä¿®æ”¹&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Irecv()&lt;/code&gt; éé˜»å¡æ¥æ”¶ï¼ŒåŒæ ·ä¸åº”è¯¥åœ¨ç¡®å®šæ¥æ”¶å®Œæˆå‰ä¿®æ”¹ buffer&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Issend()&lt;/code&gt; éé˜»å¡åŒæ­¥å‘é€ï¼Œç±»ä¼¼ &lt;code&gt;MPI_Isend()&lt;/code&gt; åªæ˜¯ &lt;code&gt;MPI_Probe()&lt;/code&gt; ä¼šç¡®å®šæ¥æ”¶æ–¹å·²ç»æ”¶åˆ°æ¶ˆæ¯&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Test()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Testany()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Testall()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Testsome()&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;æ£€æŸ¥éé˜»å¡æ”¶å‘æ“ä½œçš„çŠ¶æ€ï¼Œè¾“å‡ºå€¼ &lt;code&gt;flag&lt;/code&gt; ä¸º &lt;code&gt;0&lt;/code&gt; è¡¨ç¤ºæ²¡å®Œæˆï¼Œ &lt;code&gt;1&lt;/code&gt; è¡¨ç¤ºå·²å®Œæˆ&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Iprobe()&lt;/code&gt; è¿›è¡Œéé˜»å¡æµ‹è¯•, å¦‚æœæ¶ˆæ¯å·²ç»åˆ°äº† &lt;code&gt;flag&lt;/code&gt; ä¸º &lt;code&gt;1&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org718159c" class="outline-3"&gt;
&lt;h3 id="org718159c"&gt;é›†ä½“é€šä¿¡&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org718159c"&gt;

&lt;div id="orga8349e3" class="figure"&gt;
&lt;p&gt;&lt;img src="https://chimez.github.io/img/MPI:_Message_Passing_Interface/2021-07-04_18-47-40_collective_comm.gif" alt="nil"&gt;
&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;
é›†ä½“é€šä¿¡æ“ä½œçš„ç±»å‹æœ‰
&lt;/p&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;&lt;b&gt;åŒæ­¥&lt;/b&gt; é˜»å¡ç›´åˆ°æ‰€æœ‰è¿›ç¨‹éƒ½åˆ°è¾¾åŒæ­¥ç‚¹&lt;/li&gt;
&lt;li&gt;&lt;b&gt;æ•°æ®ç§»åŠ¨&lt;/b&gt; broadcast, scatter, gather, all to all&lt;/li&gt;
&lt;li&gt;&lt;b&gt;é›†ä½“è®¡ç®—(å½’çº¦)&lt;/b&gt; min, max, add, multiply ç­‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id="outline-container-org5b3b4c0" class="outline-4"&gt;
&lt;h4 id="org5b3b4c0"&gt;å¸¸ç”¨é›†ä½“é€šä¿¡å‡½æ•°&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org5b3b4c0"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;MPI_Barrier (comm)&lt;/code&gt; åŒæ­¥æ‰€æœ‰è¿›ç¨‹&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Bcast (&amp;amp;buffer,count,datatype,root,comm)&lt;/code&gt; å°†æ•°æ®ä» &lt;code&gt;root&lt;/code&gt; è¿›ç¨‹å¹¿æ’­åˆ°æ‰€æœ‰è¿›ç¨‹&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Scatter (&amp;amp;sendbuf,sendcnt,sendtype,&amp;amp;recvbuf,recvcnt,recvtype,root,comm)&lt;/code&gt; å°†æ•°æ®åˆ†æ•£åˆ°æ‰€æœ‰è¿›ç¨‹&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Gather (&amp;amp;sendbuf,sendcnt,sendtype,&amp;amp;recvbuf,recvcount,recvtype,root,comm)&lt;/code&gt; ä»æ‰€æœ‰è¿›ç¨‹è·å–æ•°æ®åˆ° &lt;code&gt;root&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Allgather (&amp;amp;sendbuf,sendcount,sendtype,&amp;amp;recvbuf,recvcount,recvtype,comm)&lt;/code&gt; æ‰€æœ‰è¿›ç¨‹éƒ½è·å¾—æ€»çš„æ•°æ®&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Reduce (&amp;amp;sendbuf,&amp;amp;recvbuf,count,datatype,op,root,comm)&lt;/code&gt; æ‰§è¡Œä¸€ä¸ªå½’çº¦æ“ä½œ &lt;code&gt;op&lt;/code&gt; åˆ°è¿›ç¨‹ &lt;code&gt;root&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Allreduce (&amp;amp;sendbuf,&amp;amp;recvbuf,count,datatype,op,comm)&lt;/code&gt; æ‰§è¡Œå½’çº¦æ“ä½œåˆ°æ‰€æœ‰è¿›ç¨‹&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Reduce_scatter (&amp;amp;sendbuf,&amp;amp;recvbuf,recvcount,datatype,op,comm)&lt;/code&gt; å…ˆ reduce å† scatter&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Alltoall (&amp;amp;sendbuf,sendcount,sendtype,&amp;amp;recvbuf,recvcnt,recvtype,comm)&lt;/code&gt; æ¯ä¸ªè¿›ç¨‹éƒ½æ‰§è¡Œ scatter&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Scan (&amp;amp;sendbuf,&amp;amp;recvbuf,count,datatype,op,comm)&lt;/code&gt; æ‰«ææ“ä½œ&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgf664249" class="outline-3"&gt;
&lt;h3 id="orgf664249"&gt;è‡ªå®šä¹‰æ•°æ®ç±»å‹&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgf664249"&gt;
&lt;p&gt;
ç”¨æˆ·å®šä¹‰çš„æ•°æ®ç±»å‹ï¼Œç§°ä½œ &lt;b&gt;derived data types&lt;/b&gt;
&lt;/p&gt;

&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;MPI_Type_contiguous (count,oldtype,&amp;amp;newtype)&lt;/code&gt; åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®ç±»å‹ï¼Œæ˜¯ &lt;code&gt;count&lt;/code&gt; ä¸ªæ—§ç±»å‹æ•°æ®çš„ç»„åˆ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Type_vector (count,blocklength,stride,oldtype,&amp;amp;newtype)&lt;/code&gt; ä¸ &lt;code&gt;MPI_Type_contiguous&lt;/code&gt; ç›¸åŒï¼Œåªä¸è¿‡æ¯ä¸ªæ•°æ®é—´å¯ä»¥æœ‰é—´éš”&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Type_indexed (count,blocklens[],offsets[],old_type,&amp;amp;newtype)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Type_create_struct&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Type_get_extent&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Type_commit (&amp;amp;datatype)&lt;/code&gt; å‘ç³»ç»Ÿæäº¤ç±»å‹&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Type_free (&amp;amp;datatype)&lt;/code&gt; é‡Šæ”¾æŒ‡å®šç±»å‹çš„å¯¹è±¡&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgffb367c" class="outline-4"&gt;
&lt;h4 id="orgffb367c"&gt;è‡ªå®šä¹‰ç»“æ„ä½“&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgffb367c"&gt;
&lt;p&gt;
&lt;code&gt;MPI_Type_create_struct(count, array_of_blocklengths, array_of_displacements, array_of_types, newtype)&lt;/code&gt;
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;count&lt;/code&gt; ç»“æ„ä½“ä¸­çš„å…ƒç´ æ•°ï¼Œä¹Ÿæ˜¯ä¸‹é¢ä¸‰ä¸ªæ•°ç»„çš„é•¿åº¦&lt;/li&gt;
&lt;li&gt;&lt;code&gt;array_of_blocklengths&lt;/code&gt; æ¯ä¸ªå—ä¸­çš„å…ƒç´ ä¸ªæ•°&lt;/li&gt;
&lt;li&gt;&lt;code&gt;array_of_displacements&lt;/code&gt; æ¯ä¸ªå—çš„åç§»é‡&lt;/li&gt;
&lt;li&gt;&lt;code&gt;array_of_types&lt;/code&gt; æ¯ä¸ªå—çš„ç±»å‹&lt;/li&gt;
&lt;li&gt;&lt;code&gt;newtype&lt;/code&gt; è¾“å‡º&lt;/li&gt;
&lt;/ol&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;struct&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;object&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="kt"&gt;double&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Datatype&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;newtype&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;object_len&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;blocklengths&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Datatype&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;types&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Aint&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;displacements&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Aint&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;current_displacement&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;blocklength&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;types&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MPI_CHAR&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;displacements&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;offsetof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;struct&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;object&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;blocklength&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;types&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MPI_DOUBLE&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;displacements&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;offsetof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;struct&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;object&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;blocklength&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;types&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MPI_INT&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;displacements&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;offsetof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;struct&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;object&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Type_create_struct&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;object_len&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;blocklengths&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;displacements&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;types&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;newtype&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Type_commit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;newtype&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;struct&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;object&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;proc_id&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;MPI_Send&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;newtype&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;comm&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;proc_id&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;MPI_Recv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;newtype&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;comm&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MPI_STATUS_IGNORE&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Type_free&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;newtype&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgb82a4b1" class="outline-3"&gt;
&lt;h3 id="orgb82a4b1"&gt;ç»„å’Œé€šä¿¡å™¨ç®¡ç†&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgb82a4b1"&gt;
&lt;p&gt;
&lt;b&gt;group&lt;/b&gt; ç»„æ˜¯ä¸€äº›è¿›ç¨‹çš„æœ‰åºé›†åˆï¼Œæ¯ä¸ªè¿›ç¨‹ç¼–å·ä» 0 åˆ° N-1, &lt;b&gt;communicator&lt;/b&gt; é€šä¿¡å™¨æ˜¯ä¸€ç»„éœ€è¦ç›¸äº’é€šä¿¡çš„è¿›ç¨‹ï¼Œæ¯ä¸ªç»„éƒ½æœ‰ä¸€ä¸ªé€šä¿¡å™¨ã€‚ä»ç¼–ç¨‹çš„è§’åº¦çœ‹ï¼Œç»„æ˜¯ç”¨æ¥æŒ‡å®šå“ªäº›è¿›ç¨‹ç›¸äº’é€šä¿¡ï¼Œè¿›è€Œåˆ›å»ºé€šä¿¡å™¨çš„ã€‚
&lt;/p&gt;

&lt;p&gt;
å…¸å‹çš„è¿‡ç¨‹ï¼š
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;MPI_Comm_group()&lt;/code&gt; ä» &lt;code&gt;MPI_COMM_WORLD&lt;/code&gt; ä¸­å–å‡ºå…¨å±€ç»„çš„å¥æŸ„&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;MPI_Group_incl()&lt;/code&gt; ä»å…¨å±€ç»„çš„å­é›†ä¸­åˆ›å»ºæ–°çš„ç»„&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;MPI_Comm_create()&lt;/code&gt; ä¸ºæ–°çš„ç»„åˆ›å»ºé€šä¿¡å™¨&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;MPI_Comm_rank()&lt;/code&gt; ç¡®å®šæ–°çš„é€šä¿¡å™¨ä¸­çš„ rank&lt;/li&gt;
&lt;li&gt;è¿›è¡Œé€šä¿¡&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;MPI_Comm_free()&lt;/code&gt; å’Œ &lt;code&gt;MPI_Group_free()&lt;/code&gt; é‡Šæ”¾ä¸ç”¨çš„ç»„å’Œé€šä¿¡å™¨å¯¹è±¡&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgec1af73" class="outline-4"&gt;
&lt;h4 id="orgec1af73"&gt;åŸºæœ¬é€šä¿¡å™¨&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgec1af73"&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;&lt;code&gt;MPI_COMM_WORLD&lt;/code&gt; å…¨éƒ¨çš„è¿›ç¨‹&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_COMM_SELF&lt;/code&gt; åªåŒ…å«å½“å‰è¿›ç¨‹&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_COMM_NULL&lt;/code&gt; æ— æ•ˆé€šä¿¡å™¨ï¼Œç”¨äºä¸€äº›å‡½æ•°çš„é”™è¯¯ç &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;
é€šä¿¡å™¨çš„ç±»å‹æ˜¯ &lt;code&gt;MPI_Comm&lt;/code&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org930fb92" class="outline-4"&gt;
&lt;h4 id="org930fb92"&gt;å¤åˆ¶é€šä¿¡å™¨&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org930fb92"&gt;
&lt;p&gt;
å¤åˆ¶ä¸€ä¸ªä¸€æ ·çš„é€šä¿¡å™¨ï¼Œä¸»è¦ç”¨äºåº“å‡½æ•°ç¼–å†™æ—¶é˜²æ­¢ä¿®æ”¹å…¨å±€å‚æ•°    
&lt;/p&gt;

&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;MPI_Comm_dup()&lt;/code&gt; å¤åˆ¶ä¸€ä¸ªé€šä¿¡å™¨&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Comm_idup()&lt;/code&gt; å¤åˆ¶é€šä¿¡å™¨ï¼Œéé˜»å¡&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Comm_dup_with_info()&lt;/code&gt; å¤åˆ¶é€šä¿¡å™¨å¹¶ä¼ é€’ info&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Comm_idup_with_info()&lt;/code&gt; å¤åˆ¶é€šä¿¡å™¨å¹¶ä¼ é€’ info, éé˜»å¡&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgd085196" class="outline-4"&gt;
&lt;h4 id="orgd085196"&gt;åˆ’åˆ†é€šä¿¡å™¨&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgd085196"&gt;
&lt;p&gt;
ä½¿ç”¨ &lt;code&gt;MPI_Comm_split(comm, color, key, newcomm)&lt;/code&gt;  å°† &lt;code&gt;comm&lt;/code&gt; ä¸­æœ‰ç›¸åŒ &lt;code&gt;color&lt;/code&gt; çš„è¿›ç¨‹ç»„æˆä¸€ä¸ªæ–°çš„é€šä¿¡å™¨ &lt;code&gt;newcomm&lt;/code&gt;, æ–°é€šä¿¡å™¨ä¸­çš„ rank ç”± &lt;code&gt;key&lt;/code&gt; æŒ‡å®š
&lt;/p&gt;

&lt;p&gt;
æ³¨æ„
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;ä»£ç ä¼šåœ¨æ‰€æœ‰è¿›ç¨‹ä¸­æ‰§è¡Œï¼Œæ‰€ä»¥åªè¦è¿›ç¨‹ä¸­ç”Ÿæˆè‡ªå·±çš„ &lt;code&gt;color&lt;/code&gt; å’Œ &lt;code&gt;key&lt;/code&gt; ,è¿”å›çš„é€šä¿¡å™¨å°±åŒ…æ‹¬è¿™äº›è¿›ç¨‹&lt;/li&gt;
&lt;li&gt;ä¸€èˆ¬æ–°é€šä¿¡å™¨ä¸­çš„ &lt;code&gt;rank&lt;/code&gt; è·Ÿå…¨å±€çš„ä¿å­˜ä¸€è‡´å°±è¡Œäº†ï¼Œ &lt;code&gt;MPI_Comm_rank(MPI_COMM_WORLD, &amp;amp;my_key)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Comm_spawn()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Comm_free()&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org1686f0a" class="outline-4"&gt;
&lt;h4 id="org1686f0a"&gt;ä»ç»„åˆ›å»ºé€šä¿¡å™¨&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org1686f0a"&gt;
&lt;p&gt;
ç»„çš„ç±»å‹æ˜¯ &lt;code&gt;MPI_Group&lt;/code&gt;
&lt;/p&gt;

&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;MPI_Comm_group()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Group_incl(group, n, ranks, newgroup)&lt;/code&gt; å°†ç»„ä¸­ &lt;code&gt;ranks&lt;/code&gt; çš„è¿›ç¨‹æ·»åŠ åˆ°æ–°ç»„&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Group_excl(group, n, ranks, newgroup)&lt;/code&gt; é™¤äº† &lt;code&gt;ranks&lt;/code&gt; ä»¥å¤–çš„è¿›ç¨‹æ·»åŠ åˆ°æ–°ç»„&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Group_difference()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Group_union()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Group_intersection()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Group_difference()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Group_size()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Group_rank()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Comm_create_group()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Comm_create(comm, group, newcomm)&lt;/code&gt; ä»ç»„åˆ›å»ºé€šä¿¡å™¨&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org593c912" class="outline-4"&gt;
&lt;h4 id="org593c912"&gt;é€šä¿¡å™¨é—´çš„é€šä¿¡å™¨&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org593c912"&gt;
&lt;p&gt;
&lt;code&gt;MPI_Intercomm_create(local_comm, local_leader, peer_comm, remote_leader, tag, newintercomm)&lt;/code&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org012852f" class="outline-3"&gt;
&lt;h3 id="org012852f"&gt;è™šæ‹Ÿæ‹“æ‰‘&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org012852f"&gt;
&lt;p&gt;
MPI çš„æœ¯è¯­ &lt;b&gt;virtual topologies&lt;/b&gt; æŒ‡çš„æ˜¯ä¸€äº›è¿›ç¨‹ç›¸äº’è¿æ¥æ„æˆä¸€ä¸ªå‡ ä½•å½¢çŠ¶ï¼Œè¿™ä¸ªç½‘ç»œæ‹“æ‰‘æ˜¯è™šæ‹Ÿçš„ï¼Œä¸ç‰©ç†å®é™…çš„è¿æ¥æ— å…³ã€‚
&lt;/p&gt;

&lt;p&gt;
å½“ç‰¹æ®Šçš„é€šä¿¡æ¨¡å¼ä¸ä¸€ä¸ªæ‹“æ‰‘ç»“æœç›¸åŒ¹é…æ—¶ MPI è™šæ‹Ÿæ‹“æ‰‘å°±å¾ˆæœ‰ç”¨äº†ã€‚
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orge748617" class="outline-3"&gt;
&lt;h3 id="orge748617"&gt;å•è¾¹é€šä¿¡&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orge748617"&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgff5a190" class="outline-4"&gt;
&lt;h4 id="orgff5a190"&gt;åŸºæœ¬æ¦‚å¿µ&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgff5a190"&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;Remote Memory Access(RMA), Remote Direct Momory Access (RDMA), è¿œç¨‹å†…å­˜è®¿é—®
&lt;ul class="org-ul"&gt;
&lt;li&gt;æŒ‡çš„æ˜¯ä¸¤ä¸ªè¿›ç¨‹ origin å’Œ target, origin å‘èµ·åŠ¨ä½œ put/get, è®¿é—® target çš„å†…å­˜&lt;/li&gt;
&lt;li&gt;ä¹‹æ‰€ä»¥å«å•è¾¹é€šä¿¡ï¼Œæ˜¯å› ä¸º target è¿›ç¨‹å®Œå…¨ä¸çŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆ&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;window
&lt;ul class="org-ul"&gt;
&lt;li&gt;å•è¾¹é€šä¿¡åªèƒ½è®¿é—® target è¿›ç¨‹æ‰€æŒ‡å®šçš„ä¸€å—å†…å­˜ï¼Œç§°ä¸º window&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;distributed shared memory, virtual shared memory
&lt;ul class="org-ul"&gt;
&lt;li&gt;æ˜¯é™¤äº† window ä¹‹å¤–çš„å¦ä¸€ç§å®ç°è¿œç¨‹å†…å­˜è®¿é—®çš„æ–¹æ³•&lt;/li&gt;
&lt;li&gt;åªæœ‰æ‰€è°“çš„ Partitioned Global Address Space(PGAS)è¯­è¨€æ”¯æŒï¼Œä¾‹å¦‚ Unified Parallel C (UPC)&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;active RMA å’Œ passive RMA
&lt;ul class="org-ul"&gt;
&lt;li&gt;active RMA ä¹Ÿå«åš active target synchronization, target è¿›ç¨‹è®¾ç½®ä¸€ä¸ªæ—¶é—´å‘¨æœŸ(epoch)ï¼Œåœ¨è¿™å…¶ä¸­ window å¯ä»¥è¢«è®¿é—®ï¼Œç±»ä¼¼äºåŒæ­¥æ•°æ®è½¬ç§»&lt;/li&gt;
&lt;li&gt;passive RMA ä¹Ÿå«åš passive target synchronization, target è¿›ç¨‹ä¸å¯¹ window çš„è®¿é—®åšé™åˆ¶ï¼Œè¿™ç§æ–¹å¼å¾ˆé«˜æ•ˆï¼Œä½†æ˜¯éå¸¸éš¾ debug å¹¶ä¸”å¾ˆå®¹æ˜“æ­»é”&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgf0334ad" class="outline-4"&gt;
&lt;h4 id="orgf0334ad"&gt;çª—å£&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgf0334ad"&gt;
&lt;p&gt;
ç”¨äºå•è¾¹é€šä¿¡çš„å†…å­˜åŒºåŸŸå°±æ˜¯çª—å£ï¼Œå˜é‡ç±»å‹ä¸º &lt;code&gt;MPI_Win&lt;/code&gt;, è¿›ç¨‹å¯ä»¥å‘å…¶ä¸­å­˜å–ä»»ä½•ä¸œè¥¿
&lt;/p&gt;

&lt;p&gt;
è¯´æ˜
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;çª—å£æ˜¯å®šä¹‰åœ¨é€šä¿¡å™¨ä¸Šçš„ï¼Œåˆ›å»ºçª—å£æ“ä½œæ˜¯é›†ä½“é€šä¿¡ï¼Œå³çª—å£çš„ä¸åŒéƒ¨åˆ†è¢«ä¸åŒçš„è¿›ç¨‹æ‰€æ‹¥æœ‰&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªè¿›ç¨‹çš„çª—å£å¤§å°ç‹¬ç«‹è®¾ç½®ï¼Œå¯ä»¥è®¾ä¸º 0&lt;/li&gt;
&lt;li&gt;çª—å£çš„å†…å­˜åˆ†é…å’Œé‡Šæ”¾è¦æ˜¾å¼è¿›è¡Œ&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
å¸¸ç”¨å‡½æ•°
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;MPI_Win_allocate()&lt;/code&gt; åˆ†é…çª—å£çš„å†…å­˜&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Win_free()&lt;/code&gt; é‡Šæ”¾å†…å­˜&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Win_create()&lt;/code&gt; åŸºäºæŒ‡å®šçš„ buffer åˆ›å»ºçª—å£&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Win_allocate_shared()&lt;/code&gt; åœ¨å…±äº«å†…å­˜çš„é€šä¿¡å™¨ä¸Šåˆ›å»ºçª—å£&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Win_create_dynamic()&lt;/code&gt; åˆ›å»ºçª—å£ï¼Œä½†ä¸åˆ†é…å†…å­˜&lt;/li&gt;
&lt;/ol&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Info&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Win&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;window&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Win_allocate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;disp_unit&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;comm&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;memory&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;window&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* è¿›è¡Œæ“ä½œ */&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Win_free&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;window&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgb387fa1" class="outline-4"&gt;
&lt;h4 id="orgb387fa1"&gt;åŠ¨æ€åˆ†é…å†…å­˜&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgb387fa1"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;MPI_Win_create_dynamic(MPI_Info info, MPI_Comm comm, MPI_Win *win)&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;åˆ›å»ºçª—å£ï¼Œå¯ä»¥å‘å…¶ä¸­åŠ¨æ€çš„åŠ å…¥å†…å­˜&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;int MPI_Win_free(MPI_Win *win)&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;é‡Šæ”¾çª—å£çš„å†…å­˜&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;int MPI_Alloc_mem(MPI_Aint size, MPI_Info info, void *baseptr)&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;åˆ†é…å†…å­˜&lt;/li&gt;
&lt;li&gt;&lt;code&gt;size&lt;/code&gt; æ˜¯å†…å­˜å¤§å°&lt;/li&gt;
&lt;li&gt;&lt;code&gt;baseptr&lt;/code&gt; æ˜¯è¾“å‡ºçš„æŒ‡é’ˆ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;info&lt;/code&gt; å¯ä»¥æ˜¯ &lt;code&gt;MPI_INFO_NULL&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;int MPI_Free_mem(void *base)&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;é‡Šæ”¾åˆ†é…çš„å†…å­˜&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Win_attach(MPI_Win win, void *base, MPI_Aint size)&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;å‘çª—å£ä¸­æ·»åŠ å†…å­˜&lt;/li&gt;
&lt;li&gt;&lt;code&gt;win&lt;/code&gt; å¿…é¡»æ˜¯ &lt;code&gt;MPI_Win_create_dynamic()&lt;/code&gt; åˆ›å»ºçš„çª—å£&lt;/li&gt;
&lt;li&gt;çª—å£ä¸­çš„å†…å­˜å°±æ˜¯è¿™é‡ŒæŒ‡é’ˆçš„å†…å­˜ï¼Œæ²¡æœ‰å¤åˆ¶&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Win_detach(MPI_Win win, void *base)&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;ä»çª—å£ä¸­å»æ‰æ·»åŠ çš„å†…å­˜&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;int MPI_Win_lock(int lock_type, int rank, int assert, MPI_Win win)&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;å¯¹çª—å£æ•´ä½“åŠ é”&lt;/li&gt;
&lt;li&gt;&lt;code&gt;lock_type&lt;/code&gt; æ˜¯ &lt;code&gt;MPI_LOCK_EXCLUSIVE&lt;/code&gt; æˆ– &lt;code&gt;MPI_LOCK_SHARED&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;rank&lt;/code&gt; æ˜¯è·å¾—é”çš„è¿›ç¨‹&lt;/li&gt;
&lt;li&gt;&lt;code&gt;assert&lt;/code&gt; æ˜¯ç”¨äºåšä¼˜åŒ–çš„å‚æ•°ï¼Œä¸éœ€è¦å°±è®¾ &lt;code&gt;assert=0&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;int MPI_Win_unlock(int rank, MPI_Win win)&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;è§£é”&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;int MPI_Get_address(const void *location, MPI_Aint *address)&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;è·å¾—è°ƒç”¨å†…å­˜ä¸­ä½ç½®çš„åœ°å€&lt;/li&gt;
&lt;li&gt;åº”è¯¥ç”¨è¿™ä¸ªå‡½æ•°è·å¾—çš„ &lt;code&gt;MPI_Alloc_mem()&lt;/code&gt; åˆ†é…çš„åœ°å€ä½œä¸ºå€¼å¹¿æ’­ç»™å…¶å®ƒéœ€è¦ç”¨åˆ°è¿™ä¸ªå€¼çš„è¿›ç¨‹&lt;/li&gt;
&lt;li&gt;å¯¹äºåœ¨çª—å£ä¸­çš„æŒ‡é’ˆï¼Œè¿™é‡Œè·å¾—çš„åœ°å€å°±æ˜¯åç§»é‡&lt;/li&gt;
&lt;li&gt;å¯ä»¥æŠŠåç§»é‡çœ‹åšæ˜¯çª—å£ä¸­çš„æŒ‡é’ˆ&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Put(const void *origin_addr, int origin_count, MPI_Datatype origin_datatype, int target_rank, MPI_Aint target_disp, int target_count, MPI_Datatype target_datatype, MPI_Win win)&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;ä» &lt;code&gt;origin_addr&lt;/code&gt; å¤åˆ¶å†…å­˜åˆ° &lt;code&gt;target_rank&lt;/code&gt; è¿›ç¨‹çš„ä» &lt;code&gt;win&lt;/code&gt; çª—å£çš„åç§» &lt;code&gt;target_disp&lt;/code&gt; å¼€å§‹çš„åœ°å€&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_Get(void *origin_addr, int origin_count, MPI_Datatype origin_datatype, int target_rank, MPI_Aint target_disp, int target_count, MPI_Datatype target_datatype, MPI_Win win)&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;ä» &lt;code&gt;target_rank&lt;/code&gt; è¿›ç¨‹çš„ &lt;code&gt;win&lt;/code&gt; çª—å£åç§» &lt;code&gt;target_disp&lt;/code&gt; å¤åˆ¶å†…å­˜åˆ° &lt;code&gt;origin_addr&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;int MPI_Compare_and_swap(const void *origin_addr, const void *compare_addr, void *result_addr, MPI_Datatype datatype, int target_rank, MPI_Aint target_disp, MPI_Win win)&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;æ¯”è¾ƒå¹¶äº¤æ¢ï¼ŒåŸå­æ“ä½œ&lt;/li&gt;
&lt;li&gt;æ¯”è¾ƒå½“å‰å†…å­˜ä¸­çš„æ—§å€¼ &lt;code&gt;*result_addr&lt;/code&gt; å’Œä¹‹å‰è¯»å–åˆ°çš„æ—§å€¼ &lt;code&gt;*compare_addr&lt;/code&gt; ï¼Œå¦‚æœä¸€æ ·ï¼Œåˆ™è¯´æ˜ä¸­é—´å†…å­˜æœªè¢«ä¿®æ”¹è¿‡ï¼Œé‚£ä¹ˆå°±ç”¨æ–°å€¼ &lt;code&gt;*origin_addr&lt;/code&gt; æ›¿æ¢æ—§å€¼ &lt;code&gt;*result_addr&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;è¢«ä¿®æ”¹çš„å€¼å±äº &lt;code&gt;target_rank&lt;/code&gt; è¿›ç¨‹&lt;/li&gt;
&lt;li&gt;&lt;code&gt;target_disp&lt;/code&gt; æ˜¯ä»çª—å£çš„èµ·ç‚¹åˆ° &lt;code&gt;target_rank&lt;/code&gt; è¿›ç¨‹ä¸­è¢«æ›¿æ¢çš„å†…å­˜ &lt;code&gt;result_addr&lt;/code&gt; çš„èµ·ç‚¹ä¹‹é—´çš„åç§»é‡&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;int MPI_Win_fence(int assert, MPI_Win win)&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;åŒæ­¥çª—å£åœ¨æ‰€æœ‰è¿›ç¨‹ä¸­&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
å‚è€ƒï¼š
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;è¿™é‡Œå®ç°äº†ä¸€ä¸ªé“¾è¡¨ &lt;a href="https://svn.mcs.anl.gov/repos/mpi/mpich2/trunk/test/mpi/rma/linked_list.c"&gt;https://svn.mcs.anl.gov/repos/mpi/mpich2/trunk/test/mpi/rma/linked_list.c&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;æŒ‡é’ˆçš„å†…å­˜è¦åœ¨è¿›ç¨‹ä¸­è‡ªå·±é‡Šæ”¾ï¼Œçª—å£ä¸­å®é™…æ²¡æœ‰ä¿å­˜æ•°æ®&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
ä¾‹å­
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* åˆ›å»ºçª—å£ */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Win&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;win&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Win_create_dynamic&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MPI_INFO_NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MPI_COMM_WORLD&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;win&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* åˆ†é…å†…å­˜ï¼Œå¹¶æŠŠå®ƒé™„åŠ åˆ°çª—å£ä¸­ï¼ŒåŒæ—¶è·å¾—çª—å£ä¸­å¯¹åº”çš„åç§»é‡ï¼Œä¹Ÿå°±æ˜¯çª—å£ä¸­çš„æŒ‡é’ˆ */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i_ptr&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Alloc_mem&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MPI_INFO_NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;i_ptr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Win_attach&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;win&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i_ptr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Aint&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i_disp&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Get_address&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i_ptr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;i_disp&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;i_ptr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"%d, i_ptr=%p, %d, i_disp=%ld&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i_ptr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;i_ptr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i_disp&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"i ptr dead&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;"&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* è¯»æ•°æ® */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Win_lock&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MPI_LOCK_EXCLUSIVE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;win&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MPI_INT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i_disp&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MPI_INT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;win&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"%d: get= %d&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Win_unlock&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;win&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* å†™æ•°æ® */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Win_lock&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MPI_LOCK_EXCLUSIVE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;win&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;put&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Put&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;put&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MPI_INT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i_disp&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MPI_INT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;win&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Win_unlock&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;win&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* åŒæ­¥ */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Win_fence&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;win&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Win_lock&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MPI_LOCK_EXCLUSIVE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;win&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MPI_INT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i_disp&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MPI_INT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;win&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"%d: get again= %d&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Win_unlock&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;win&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* é‡Šæ”¾å†…å­˜æ—¶ï¼Œè¦ç”¨æœ¬åœ°æŒ‡é’ˆé‡Šæ”¾ */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Free_mem&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i_ptr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Win_free&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;win&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org83cae62" class="outline-4"&gt;
&lt;h4 id="org83cae62"&gt;å…±äº«å†…å­˜&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org83cae62"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;int MPI_Comm_split_type(MPI_Comm comm, int split_type, int key, MPI_Info info, MPI_Comm *newcomm)&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;è·å¾—åŒä¸€èŠ‚ç‚¹ä¸Šçš„è¿›ç¨‹çš„é€šä¿¡å™¨&lt;/li&gt;
&lt;li&gt;&lt;code&gt;split_type = MPI_COMM_TYPE_SHARED&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;comm = MPI_COMM_WORLD&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;key = proc_rank_world&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;int MPI_Win_allocate_shared (MPI_Aint size, int disp_unit, MPI_Info info, MPI_Comm comm, void *baseptr, MPI_Win *win)&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;åˆ›å»ºå…±äº«å†…å­˜æ•°æ®&lt;/li&gt;
&lt;li&gt;&lt;code&gt;size&lt;/code&gt; æ˜¯æ•°æ®çš„æ¯”ç‰¹å¤§å°ï¼Œå³ ä¸ªæ•° * sizeof(type)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;disp_unit&lt;/code&gt; æ˜¯å•ä¸ªæ•°æ®çš„æ¯”ç‰¹å¤§å°ï¼Œå³ sizeof(type)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;baseptr&lt;/code&gt; æ˜¯æœ¬åœ°æ•°æ®çš„æŒ‡é’ˆ&lt;/li&gt;
&lt;li&gt;è¿™ä¸ªå†…å­˜ä¼šåœ¨ &lt;code&gt;MPI_Win_free()&lt;/code&gt; æ—¶é‡Šæ”¾æ‰&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;int MPI_Win_shared_query (MPI_Win win, int rank, MPI_Aint *size, int *disp_unit, void *baseptr)&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;è·å¾—å±äº &lt;code&gt;rank&lt;/code&gt; è¿›ç¨‹çš„å†…å­˜åœ¨å½“å‰è¿›ç¨‹ä¸­çš„åœ°å€&lt;/li&gt;
&lt;li&gt;&lt;code&gt;size&lt;/code&gt; win å¤§å°&lt;/li&gt;
&lt;li&gt;&lt;code&gt;disp_unit&lt;/code&gt; å•ä½æ•°æ®å¤§å°&lt;/li&gt;
&lt;li&gt;&lt;code&gt;baseptr&lt;/code&gt; å½“å‰è¿›ç¨‹ä¸­ç”¨æ¥è®¿é—®è¿™ä¸ªå†…å­˜çš„æŒ‡é’ˆ&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Comm_rank&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MPI_COMM_WORLD&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* è·å¾—åŒä¸€èŠ‚ç‚¹ä¸Šçš„é€šä¿¡å™¨ï¼Œä»¥åŠå¯¹åº”çš„ rank */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Comm&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;comm_node&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proc_rank_node&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Comm_split_type&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MPI_COMM_WORLD&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MPI_COMM_TYPE_SHARED&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MPI_INFO_NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;comm_node&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Comm_rank&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;comm_node&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;proc_rank_node&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* è·å¾—ä¸åŒèŠ‚ç‚¹ä¸Šç¼–å·ä¸º 0 çš„è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡å™¨ */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Comm&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;comm_0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proc_rank_0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Comm_split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MPI_COMM_WORLD&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proc_rank_node&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;comm_0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Comm_rank&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;comm_0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proc_rank_0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* åˆ†é…å†…å­˜, åªæœ‰ç¼–å·ä¸º 0 çš„è¿›ç¨‹æ‰åˆ†é…ï¼Œå…¶å®ƒè¿›ç¨‹çš„å¤§å°æ˜¯ 0 */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Win&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;data_win&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;win_size&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;win_size&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;win_size&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Win_allocate_shared&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;win_size&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MPI_INFO_NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;comm_node&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;data_win&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* åœ¨å…¨å±€ç¼–å· 0 çš„è¿›ç¨‹ä¸Šåˆ›å»ºæ•°æ® */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Barrier&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;comm_node&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Win_fence&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;data_win&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* åˆ†äº«æ•°æ®ç»™æ‰€æœ‰èŠ‚ç‚¹ä¸Šç¼–å· 0 çš„è¿›ç¨‹ */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Bcast&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MPI_INT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;comm_0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* å…¶å®ƒè¿›ç¨‹è·å¾—èŠ‚ç‚¹ç¼–å· 0 è¿›ç¨‹ä¸Šçš„æŒ‡é’ˆ */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Aint&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;disp_uint&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Win_shared_query&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data_win&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;disp_unit&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;data_0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* é‡Šæ”¾å†…å­˜ */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;MPI_Win_free&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;data_win&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org37608b6" class="outline-3"&gt;
&lt;h3 id="org37608b6"&gt;æ··åˆå¤šçº¿ç¨‹&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org37608b6"&gt;
&lt;p&gt;
æ··åˆå¤šçº¿ç¨‹çš„ç­–ç•¥ï¼š
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;çº¯ MPI&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªèŠ‚ç‚¹ä¸€ä¸ª MPI è¿›ç¨‹ï¼Œå…¨éƒ¨çš„çº¿ç¨‹&lt;/li&gt;
&lt;li&gt;æ¯ä¸ª socket ä¸€ä¸ª MPI è¿›ç¨‹ï¼Œå’Œå‰©ä¸‹çš„çº¿ç¨‹ï¼Œæ¯”å¦‚20æ ¸çš„èŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸¤ä¸ªè¿›ç¨‹ï¼Œæ¯ä¸ªè¿›ç¨‹10çº¿ç¨‹&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
å¤§é‡å®è·µè®¤ä¸ºæ··åˆå¤šçº¿ç¨‹å¹¶ä¸ä¼šæ¯”çº¯ MPI é€Ÿåº¦å¿«ã€‚
&lt;/p&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgc148524" class="outline-4"&gt;
&lt;h4 id="orgc148524"&gt;çº¿ç¨‹åˆå§‹åŒ–&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgc148524"&gt;
&lt;p&gt;
ä½¿ç”¨ &lt;code&gt;MPI_Init_thread()&lt;/code&gt; åˆå§‹åŒ–å¸¦æœ‰çº¿ç¨‹çš„ MPIï¼Œå¯ç”¨çš„é€‰é¡¹æœ‰ï¼ˆæ³¨æ„å¹¶ä¸æ˜¯æ‰€æœ‰MPIå®ç°éƒ½æä¾›ä¸‹é¢å…¨éƒ¨çš„æ¨¡å¼ï¼‰
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;MPI_THREAD_SINGLE&lt;/code&gt; æ¯ä¸ªè¿›ç¨‹ä¸€ä¸ªçº¿ç¨‹&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_THREAD_FUNNELED&lt;/code&gt; æ¯ä¸ªè¿›ç¨‹æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œä½†åªæœ‰ä¸»çº¿ç¨‹å¯ä»¥è°ƒç”¨ MPI å‡½æ•°&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_THREAD_SERIALIZED&lt;/code&gt; ä½¿ç”¨å¤šä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½å¯ä»¥è°ƒç”¨ MPIï¼Œä½†æ˜¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è°ƒç”¨åŒæ­¥é€šä¿¡&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MPI_THREAD_MULTIPLE&lt;/code&gt; ä½¿ç”¨å¤šä¸ªçº¿ç¨‹ï¼Œæ²¡æœ‰ä»»ä½•é™åˆ¶&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
ä½¿ç”¨ &lt;code&gt;MPI_Query_thread()&lt;/code&gt; æ¥ç¡®å®šåˆå§‹åŒ–ä¹‹åæä¾›çš„æ˜¯å“ªç§æ¨¡å¼
&lt;/p&gt;

&lt;p&gt;
ä½¿ç”¨ &lt;code&gt;MPI_Is_thread_main()&lt;/code&gt; æ¥ç¡®å®šçº¿ç¨‹æ˜¯å¦æ˜¯ä¸»çº¿ç¨‹
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgba66bc2" class="outline-2"&gt;
&lt;h2 id="orgba66bc2"&gt;è®¾è®¡æ¨¡å¼&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgba66bc2"&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgdf3bb64" class="outline-3"&gt;
&lt;h3 id="orgdf3bb64"&gt;ä¸ºæ¯ä¸ªèŠ‚ç‚¹åˆ›å»ºä¸€ä¸ªé€šä¿¡å™¨&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgdf3bb64"&gt;
&lt;p&gt;
ç”¨äºåˆ›å»ºèŠ‚ç‚¹å†…éƒ¨çš„å…±äº«å†…å­˜çª—å£
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="cm"&gt;/* è·å¾—åŒä¸€èŠ‚ç‚¹ä¸Šçš„é€šä¿¡å™¨ï¼Œä»¥åŠå¯¹åº”çš„ rank */&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;MPI_Comm&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;comm_node&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proc_rank_node&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;MPI_Comm_split_type&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MPI_COMM_WORLD&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MPI_COMM_TYPE_SHARED&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MPI_INFO_NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;comm_node&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;MPI_Comm_rank&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;comm_node&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;proc_rank_node&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="cm"&gt;/* è·å¾—ä¸åŒèŠ‚ç‚¹ä¸Šç¼–å·ä¸º 0 çš„è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡å™¨ */&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;MPI_Comm&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;comm_0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proc_rank_0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;MPI_Comm_split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MPI_COMM_WORLD&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proc_rank_node&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;comm_0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;MPI_Comm_rank&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;comm_0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;proc_rank_0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;MPI_Comm_free&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;comm_node&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;MPI_Comm_free&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;comm_0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org84f97a9" class="outline-3"&gt;
&lt;h3 id="org84f97a9"&gt;éè‡ªæ—‹ç­‰å¾…&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org84f97a9"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;é˜»å¡é€šä¿¡æ˜¯è‡ªæ—‹é”ï¼Œä¼šä¸€ç›´ç‡ƒçƒ§ CPUï¼Œ ä¸ºäº†ç»™æŸä¸ªè¿›ç¨‹ä¸Šçš„å¤šçº¿ç¨‹ä»»åŠ¡è®©å‡º CPUï¼Œéœ€è¦è®©å…¶å®ƒè¿›ç¨‹éè‡ªæ—‹ç­‰å¾…&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;MPI_Iprobe()&lt;/code&gt; éé˜»å¡åœ°æ¢æµ‹ä¿¡å·ï¼Œå¹¶åœ¨æ¢æµ‹å‘¨æœŸä¸­ &lt;code&gt;sleep()&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;MPI_Comm_rank&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MPI_COMM_WORLD&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;finish&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;MPI_Request&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;finish_request&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;

&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="cm"&gt;/* do sth pthread or openmp */&lt;/span&gt;

&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;finish&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proc_total&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;MPI_Comm_size&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MPI_COMM_WORLD&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;proc_total&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proc_total&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="n"&gt;MPI_Isend&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;finish&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MPI_INT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MPI_COMM_WORLD&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;finish_request&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="n"&gt;MPI_Wait&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;finish_request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MPI_STATUS_IGNORE&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;flag&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;MPI_Status&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;finish_status&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;flag&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="n"&gt;MPI_Iprobe&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MPI_ANY_TAG&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MPI_COMM_WORLD&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;flag&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;finish_status&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;flag&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
&lt;span class="w"&gt;               &lt;/span&gt;&lt;span class="n"&gt;MPI_Irecv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;finish&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MPI_INT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MPI_COMM_WORLD&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;finish_request&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;               &lt;/span&gt;&lt;span class="n"&gt;MPI_Wait&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;finish_request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MPI_STATUS_IGNORE&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;               &lt;/span&gt;&lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="n"&gt;sleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgb2d0c27" class="outline-3"&gt;
&lt;h3 id="orgb2d0c27"&gt;æ¨¡æ‹Ÿå•çº¿ç¨‹&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgb2d0c27"&gt;
&lt;p&gt;
éšä¾¿å†™ä¸€ä¸ªå˜é‡ï¼ŒæŒ‰ç…§é¡ºåºä¸€ä¸ªæ¥ä¸€ä¸ªçš„å‘é€ä¸‹å»
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;   &lt;span class="kn"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;mpi4py&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;MPI&lt;/span&gt;

   &lt;span class="n"&gt;comm&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;MPI&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;COMM_WORLD&lt;/span&gt;
   &lt;span class="n"&gt;proc_rank&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;comm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Get_rank&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
   &lt;span class="n"&gt;proc_num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;comm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Get_size&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

   &lt;span class="n"&gt;myturn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;

   &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;proc_rank&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
       &lt;span class="n"&gt;myturn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
   &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
       &lt;span class="n"&gt;myturn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;comm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;recv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;source&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tag&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

   &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="si"&gt;=}&lt;/span&gt;&lt;span class="s2"&gt;, &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;myturn&lt;/span&gt;&lt;span class="si"&gt;=}&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

   &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;proc_rank&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;proc_num&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
       &lt;span class="n"&gt;comm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;myturn&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dest&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tag&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;proc_rank&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>C</category><category>MPI</category><category>parallel</category><guid>https://chimez.github.io/posts/mpi/</guid><pubDate>Sun, 04 Jul 2021 09:00:31 GMT</pubDate></item><item><title>SLEPc</title><link>https://chimez.github.io/posts/slepc/</link><dc:creator>chimez</dc:creator><description>&lt;div id="outline-container-orgf051928" class="outline-2"&gt;
&lt;h2 id="orgf051928"&gt;SLEPc: PETSc çš„æœ¬å¾å€¼æ±‚è§£å™¨æ‰©å±•&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgf051928"&gt;
&lt;p&gt;
&lt;a href="https://slepc.upv.es/"&gt;SLEPc&lt;/a&gt; æ˜¯ç”¨æ¥æ±‚ PETSc çŸ©é˜µçš„æ‰©å±•åº“ã€‚
&lt;/p&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgc313a1a" class="outline-3"&gt;
&lt;h3 id="orgc313a1a"&gt;åŸºæœ¬ç»“æ„&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgc313a1a"&gt;
&lt;p&gt;
SLEPc æœ‰ä»¥ä¸‹åŸºæœ¬éƒ¨åˆ†æ„æˆ
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;EPS (Eigenvalue Problem Solver)&lt;/li&gt;
&lt;li&gt;SVD (Singular Value Decomposition)&lt;/li&gt;
&lt;li&gt;PEP (Polynomial Eigenvalue Problem)&lt;/li&gt;
&lt;li&gt;NEP (Nonlinear Eigenvalue Problem)&lt;/li&gt;
&lt;li&gt;MFN (Matrix Function)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
è¿˜æœ‰ä¸€äº›è¾…åŠ©æ¨¡å—
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;ST (Spectral Transformation)&lt;/li&gt;
&lt;li&gt;BV (Basis Vectors)&lt;/li&gt;
&lt;li&gt;DS (Dense System)&lt;/li&gt;
&lt;li&gt;RG (Region)&lt;/li&gt;
&lt;li&gt;FN (Mathematical Function)&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgafb6b93" class="outline-3"&gt;
&lt;h3 id="orgafb6b93"&gt;å®‰è£…&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgafb6b93"&gt;
&lt;p&gt;
ä¸‹è½½æ—¶æ³¨æ„ï¼ŒSLEPc çš„ç‰ˆæœ¬å¿…é¡»å’Œ PETSc ç‰ˆæœ¬ä¸€æ ·
&lt;/p&gt;

&lt;p&gt;
ç¼–è¯‘é€‰é¡¹
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;   ./configure --download-arpack --download-blopex --download-hpddm --download-primme  --with-slepc4py=1
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
æœ€ååˆ«å¿˜äº†æŠŠç¯å¢ƒå˜é‡ &lt;code&gt;SLEPC_DIR&lt;/code&gt; åŠ ä¸Š
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgc982cbe" class="outline-3"&gt;
&lt;h3 id="orgc982cbe"&gt;åŸºæœ¬ä½¿ç”¨&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgc982cbe"&gt;
&lt;p&gt;
ç¨‹åºå¼€å§‹å’Œç»“æŸæ—¶åˆ†åˆ«è°ƒç”¨ &lt;code&gt;SlepcInitialize()&lt;/code&gt; å’Œ &lt;code&gt;SlepcFinalize()&lt;/code&gt;, å®é™…ä¸Šå°±æ˜¯ &lt;code&gt;PetscInitialize()&lt;/code&gt; å’Œ &lt;code&gt;PetscFinalize()&lt;/code&gt;
&lt;/p&gt;

&lt;p&gt;
çŸ©é˜µçš„ä½¿ç”¨è·Ÿ &lt;code&gt;PETSc&lt;/code&gt; å®Œå…¨ä¸€è‡´
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgfcf1d5d" class="outline-3"&gt;
&lt;h3 id="orgfcf1d5d"&gt;EPS: çŸ©é˜µæœ¬å¾å€¼æ±‚è§£å™¨&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgfcf1d5d"&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgce3069c" class="outline-4"&gt;
&lt;h4 id="orgce3069c"&gt;åŸºæœ¬ä½¿ç”¨&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgce3069c"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;EPSCreate(MPI_Comm comm,EPS *eps);&lt;/code&gt; 
&lt;ol class="org-ol"&gt;
&lt;li&gt;åˆ›å»ºæ±‚è§£å™¨&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;EPSSetOperators(EPS eps,Mat A,Mat B);&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;è®¾ç½®è¦è§£çš„ç®—ç¬¦&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;EPSSetFromOptions(EPS eps);&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;æ·»åŠ è¿è¡Œæ—¶è®¾ç½®&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;EPSSolve(EPS eps);&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;è¿è¡Œæ±‚è§£å™¨&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;EPSDestroy(EPS *eps);&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;é”€æ¯æ±‚è§£å™¨&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;EPSSetUp(EPS eps);&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;æŸäº›æ›´å…·ä½“çš„è®¾ç½®, å¦‚æœæœ‰éœ€è¦çš„è¯ï¼Œè¦åœ¨è¿è¡Œæ±‚è§£å™¨ä¹‹å‰è®¾ç½®&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;EPSGetST(EPS eps,ST *st);&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;è·å¾—è°±å˜æ¢å™¨(ST), EPS ä¼šé»˜è®¤è‡ªåŠ¨åˆ›å»ºä¸€ä¸ª ST å¯¹è±¡ï¼Œå¦‚æœéœ€è¦è®¾ç½®è°±å˜æ¢ï¼Œå°±è¦è¿™æ ·è·å¾—å®ƒ&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;EPSView(EPS eps,PetscViewer viewer);&lt;/code&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;æ‰“å°æ±‚è§£å™¨é…ç½®&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;slepceps.h&amp;gt;&lt;/span&gt;


&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;Mat&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cm"&gt;/* problem matrix */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* do something to fill A */&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;PetscErrorCode&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* Create eigensolver context */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;EPS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;eps&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cm"&gt;/* eigenproblem solver context */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;EPSCreate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PETSC_COMM_WORLD&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;eps&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* Set operators. In this case, it is a standard eigenvalue problem */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;EPSSetOperators&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eps&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;EPSSetProblemType&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eps&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;EPS_HEP&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* show EPS setup */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;EPSView&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eps&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PETSC_VIEWER_STDOUT_WORLD&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* Set solver parameters at runtime */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;EPSSetFromOptions&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eps&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* Solve the eigensystem */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;EPSSolve&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eps&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* Optional: Get some information from the solver and display it */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;PetscInt&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;its&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;EPSGetIterationNumber&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eps&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;its&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PetscPrintf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PETSC_COMM_WORLD&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;" Number of iterations of the method: %D&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;its&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;EPSType&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;type&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;EPSGetType&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eps&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;type&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PetscPrintf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PETSC_COMM_WORLD&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;" Solution method: %s&lt;/span&gt;&lt;span class="se"&gt;\n\n&lt;/span&gt;&lt;span class="s"&gt;"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;type&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;PetscInt&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;nev&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;EPSGetDimensions&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eps&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;nev&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PetscPrintf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PETSC_COMM_WORLD&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;" Number of requested eigenvalues: %D&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;nev&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;PetscReal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;tol&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;PetscInt&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;maxit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;EPSGetTolerances&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eps&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;tol&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;maxit&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PetscPrintf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PETSC_COMM_WORLD&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;" Stopping condition: tol=%.4g, maxit=%D&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;double&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;tol&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;maxit&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* Display solution and clean up */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* Get number of converged approximate eigenpairs */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;PetscInt&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;nconv&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;EPSGetConverged&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eps&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;nconv&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PetscPrintf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PETSC_COMM_WORLD&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;" Number of converged eigenpairs: %D&lt;/span&gt;&lt;span class="se"&gt;\n\n&lt;/span&gt;&lt;span class="s"&gt;"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;nconv&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nconv&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* Display eigenvalues and relative errors */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PetscPrintf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PETSC_COMM_WORLD&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;                        &lt;/span&gt;&lt;span class="s"&gt;"           k          ||Ax-kx||/||kx||&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;"&lt;/span&gt;
&lt;span class="w"&gt;                        &lt;/span&gt;&lt;span class="s"&gt;"   ----------------- ------------------&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;"&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;nconv&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="cm"&gt;/* Get converged eigenpairs: i-th eigenvalue is stored in kr (real part) and ki (imaginary part) */&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;PetscScalar&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;kr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ki&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;Vec&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;xr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;xi&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MatCreateVecs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;xr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MatCreateVecs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;xi&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;EPSGetEigenpair&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eps&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;kr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ki&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;xr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;xi&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="cm"&gt;/* Compute the relative error associated to each eigenpair */&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;PetscReal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;EPSComputeError&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eps&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;EPS_ERROR_RELATIVE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;PetscReal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PetscRealPart&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;kr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;PetscReal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;im&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PetscImaginaryPart&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;kr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;im&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PetscPrintf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PETSC_COMM_WORLD&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;" %9f%+9fi %12g&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;double&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;double&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;im&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;double&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PetscPrintf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PETSC_COMM_WORLD&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;"   %12f       %12g&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;double&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;double&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PetscPrintf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PETSC_COMM_WORLD&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;"&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;"&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;


&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* Free work space */&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;EPSDestroy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;eps&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MatDestroy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;VecDestroy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;xr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;VecDestroy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;xi&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;CHKERRQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ierr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgeb49ac0" class="outline-4"&gt;
&lt;h4 id="orgeb49ac0"&gt;æ±‚è§£å™¨é…ç½®&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgeb49ac0"&gt;
&lt;/div&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;&lt;a id="org447e407"&gt;&lt;/a&gt;é—®é¢˜ç±»å‹&lt;br&gt;
&lt;div class="outline-text-5" id="text-org447e407"&gt;
&lt;p&gt;
é—®é¢˜ç±»å‹ä½¿ç”¨ &lt;code&gt;EPSSetProblemType(EPS eps,EPSProblemType type);&lt;/code&gt; è¿›è¡Œè®¾ç½®
&lt;/p&gt;

&lt;p&gt;
å¯é€‰çš„æœ‰
&lt;/p&gt;
&lt;table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides"&gt;


&lt;colgroup&gt;
&lt;col class="org-left"&gt;

&lt;col class="org-left"&gt;

&lt;col class="org-left"&gt;
&lt;/colgroup&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th scope="col" class="org-left"&gt;é—®é¢˜ç±»å‹&lt;/th&gt;
&lt;th scope="col" class="org-left"&gt;EPSProblemTyle&lt;/th&gt;
&lt;th scope="col" class="org-left"&gt;å‘½ä»¤è¡Œé€‰é¡¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class="org-left"&gt;Hermitian&lt;/td&gt;
&lt;td class="org-left"&gt;EPS&lt;sub&gt;HEP&lt;/sub&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;-eps&lt;sub&gt;hermitian&lt;/sub&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;Non-Hermitian&lt;/td&gt;
&lt;td class="org-left"&gt;EPS&lt;sub&gt;NHEP&lt;/sub&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;-eps&lt;sub&gt;non&lt;/sub&gt;&lt;sub&gt;hermitian&lt;/sub&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;Generalized Hermitian&lt;/td&gt;
&lt;td class="org-left"&gt;EPS&lt;sub&gt;GHEP&lt;/sub&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;-eps&lt;sub&gt;gen&lt;/sub&gt;&lt;sub&gt;hermitian&lt;/sub&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;Generalized Hermitian indefinite&lt;/td&gt;
&lt;td class="org-left"&gt;EPS&lt;sub&gt;GHIEP&lt;/sub&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;-eps&lt;sub&gt;gen&lt;/sub&gt;&lt;sub&gt;indefinite&lt;/sub&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;Generalized Non-Hermitian&lt;/td&gt;
&lt;td class="org-left"&gt;EPS&lt;sub&gt;GNHEP&lt;/sub&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;-eps&lt;sub&gt;gen&lt;/sub&gt;&lt;sub&gt;non&lt;/sub&gt;&lt;sub&gt;hermitian&lt;/sub&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;GNHEP with positive (semi-)definite&lt;/td&gt;
&lt;td class="org-left"&gt;BEPS&lt;sub&gt;PGNHEP&lt;/sub&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;-eps&lt;sub&gt;pos&lt;/sub&gt;&lt;sub&gt;gen&lt;/sub&gt;&lt;sub&gt;non&lt;/sub&gt;&lt;sub&gt;hermitian&lt;/sub&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;
è¿˜å¯ä»¥ç”¨ä¸€ç³»åˆ—å‡½æ•°æ¥åˆ¤æ–­è®¾ç½®çš„é—®é¢˜ç±»å‹
&lt;/p&gt;

&lt;ol class="org-ol"&gt;
&lt;li&gt;EPSIsGeneralized(EPS eps,PetscBool *gen);&lt;/li&gt;
&lt;li&gt;EPSIsHermitian(EPS eps,PetscBool *her);&lt;/li&gt;
&lt;li&gt;EPSIsPositive(EPS eps,PetscBool *pos);&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a id="org543ebc4"&gt;&lt;/a&gt;æ±‚è§£æœ¬å¾å€¼ä¸ªæ•°&lt;br&gt;
&lt;div class="outline-text-5" id="text-org543ebc4"&gt;
&lt;p&gt;
ä½¿ç”¨ &lt;code&gt;EPSSetDimensions(EPS eps,PetscInt nev,PetscInt ncv,PetscInt mpd);&lt;/code&gt; è®¾ç½®è¦æ±‚çš„æœ¬å¾å€¼ä¸ªæ•°
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;PetscInt nev&lt;/code&gt; æœ¬å¾å€¼ä¸ªæ•°&lt;/li&gt;
&lt;li&gt;&lt;code&gt;PetscInt ncv&lt;/code&gt; æœ€å¤§å·¥ä½œç©ºé—´çš„ç»´æ•°ï¼ŒæŒ‡çš„æ˜¯ç”¨å¤šå°‘ä¸ªä¸­é—´å‘é‡, &lt;code&gt;ncv&lt;/code&gt; è‡³å°‘å’Œ &lt;code&gt;nev&lt;/code&gt; ä¸€æ ·å¤šï¼Œæœ€å¥½æ˜¯å®ƒçš„ä¸¤å€ä»¥ä¸Š&lt;/li&gt;
&lt;li&gt;&lt;code&gt;PetscInt mpd&lt;/code&gt; æœ€å¤§æŠ•å½±ç©ºé—´ç»´æ•°ï¼Œç”¨æ¥è®¡ç®—å¾ˆå¤šæœ¬å¾å€¼ä¸ªæ•°çš„æ—¶å€™ï¼Œè®¾ç½®å®ƒå¯ä»¥å‡å°‘å·¥ä½œç©ºé—´çš„éœ€æ±‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a id="orge76444a"&gt;&lt;/a&gt;æ±‚è§£æœ¬å¾å€¼ä½ç½®&lt;br&gt;
&lt;div class="outline-text-5" id="text-orge76444a"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;EPSSetWhichEigenpairs(EPS eps,EPSWhich which);&lt;/code&gt; è®¾ç½®è¦æ±‚æœ¬å¾å€¼çš„ä½ç½®&lt;/li&gt;
&lt;li&gt;&lt;code&gt;EPSSetTarget(EPS eps,PetscScalar target);&lt;/code&gt; è®¾ç½®è®¡ç®—è·ç¦»æŸä¸ªå€¼æœ€è¿‘çš„æœ¬å¾å€¼&lt;/li&gt;
&lt;li&gt;&lt;code&gt;EPSSetInterval(EPS eps,PetscScalar a,PetscScalar b);&lt;/code&gt; è®¡ç®— \(\lambda \in [a, b]\) çš„æ‰€æœ‰æœ¬å¾å€¼&lt;/li&gt;
&lt;li&gt;&lt;code&gt;EPSSetTwoSided(EPS eps,PetscBool twosided);&lt;/code&gt; è®¡ç®—éå„ç±³é—®é¢˜çš„å·¦æœ¬å¾çŸ¢&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
å¯é€‰çš„æœ¬å¾å€¼ä½ç½®æœ‰
&lt;/p&gt;
&lt;table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides"&gt;


&lt;colgroup&gt;
&lt;col class="org-left"&gt;

&lt;col class="org-left"&gt;

&lt;col class="org-left"&gt;
&lt;/colgroup&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th scope="col" class="org-left"&gt;EPSWhich&lt;/th&gt;
&lt;th scope="col" class="org-left"&gt;å‘½ä»¤è¡Œ&lt;/th&gt;
&lt;th scope="col" class="org-left"&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class="org-left"&gt;EPS&lt;sub&gt;LARGEST&lt;/sub&gt;&lt;sub&gt;MAGNITUDE&lt;/sub&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;-eps&lt;sub&gt;largest&lt;/sub&gt;&lt;sub&gt;magnitude&lt;/sub&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;æœ€å¤§ \(\vert \lambda\vert\)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;EPS&lt;sub&gt;SMALLEST&lt;/sub&gt;&lt;sub&gt;MAGNITUDE&lt;/sub&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;-eps&lt;sub&gt;smallest&lt;/sub&gt;&lt;sub&gt;magnitude&lt;/sub&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;æœ€å° \(\vert\lambda\vert\)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;EPS&lt;sub&gt;LARGEST&lt;/sub&gt;&lt;sub&gt;REAL&lt;/sub&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;-eps&lt;sub&gt;largest&lt;/sub&gt;&lt;sub&gt;real&lt;/sub&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;æœ€å¤§ \(\mathrm{Re}(\lambda)\)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;EPS&lt;sub&gt;SMALLEST&lt;/sub&gt;&lt;sub&gt;REAL&lt;/sub&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;-eps&lt;sub&gt;smallest&lt;/sub&gt;&lt;sub&gt;real&lt;/sub&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;æœ€å° \(\mathrm{Re}(\lambda)\)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;EPS&lt;sub&gt;LARGEST&lt;/sub&gt;&lt;sub&gt;IMAGINARY&lt;/sub&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;-eps&lt;sub&gt;largest&lt;/sub&gt;&lt;sub&gt;imaginary&lt;/sub&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;æœ€å¤§ \(\mathrm{Im}(\lambda)\)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;EPS&lt;sub&gt;SMALLEST&lt;/sub&gt;&lt;sub&gt;IMAGINARY&lt;/sub&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;-eps&lt;sub&gt;smallest&lt;/sub&gt;&lt;sub&gt;imaginary&lt;/sub&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;æœ€å° \(\mathrm{Im}(\lambda)\)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;EPS&lt;sub&gt;TARGET&lt;/sub&gt;&lt;sub&gt;MAGNITUDE&lt;/sub&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;-eps&lt;sub&gt;target&lt;/sub&gt;&lt;sub&gt;magnitude&lt;/sub&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;æœ€å° \(\vert\lambda - \tau\vert\)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;EPS&lt;sub&gt;TARGET&lt;/sub&gt;&lt;sub&gt;REAL&lt;/sub&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;-eps&lt;sub&gt;target&lt;/sub&gt;&lt;sub&gt;real&lt;/sub&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;æœ€å° \(\vert\mathrm{Re}(\lambda-\tau)\vert\)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;EPS&lt;sub&gt;TARGET&lt;/sub&gt;&lt;sub&gt;IMAGINARY&lt;/sub&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;-eps&lt;sub&gt;target&lt;/sub&gt;&lt;sub&gt;imaginary&lt;/sub&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;æœ€å° \(\vert\mathrm{Im}(\lambda-\tau)\vert\)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;EPS&lt;sub&gt;ALL&lt;/sub&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;-eps&lt;sub&gt;all&lt;/sub&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;æ‰€æœ‰ \(\lambda \in [a,b]\)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;EPS&lt;sub&gt;WHICH&lt;/sub&gt;&lt;sub&gt;USER&lt;/sub&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;Â &lt;/td&gt;
&lt;td class="org-left"&gt;ç”¨æˆ·å®šä¹‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a id="org146797a"&gt;&lt;/a&gt;é€‰æ‹©ç®—æ³•&lt;br&gt;
&lt;div class="outline-text-5" id="text-org146797a"&gt;
&lt;p&gt;
é€šè¿‡ &lt;code&gt;EPSSetType(EPS eps,EPSType method);&lt;/code&gt; è®¾ç½®æ±‚è§£å™¨ä½¿ç”¨çš„ç®—æ³•
&lt;/p&gt;


&lt;p&gt;
SLEPc æ”¯æŒçš„ç®—æ³•æœ‰
&lt;/p&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;åŸºæœ¬ç®—æ³•
&lt;ul class="org-ul"&gt;
&lt;li&gt;Power Itration, Rayleigh Quotient iteration(RQI)&lt;/li&gt;
&lt;li&gt;Subspace Iteration with Rayleigh-Ritz projection and locking&lt;/li&gt;
&lt;li&gt;Arnoldi method with explicit restart and deflation&lt;/li&gt;
&lt;li&gt;Lanczos with explicit restart&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Krylov-Schur, thick-restart Lanczos method (é»˜è®¤)&lt;/li&gt;
&lt;li&gt;Generalized Davidson&lt;/li&gt;
&lt;li&gt;Jacobi-Davidson&lt;/li&gt;
&lt;li&gt;RQCG&lt;/li&gt;
&lt;li&gt;LOBPCG&lt;/li&gt;
&lt;li&gt;CISS&lt;/li&gt;
&lt;li&gt;Lyapunov inverse iteration&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;
æ³¨æ„ï¼š
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;p&gt;
ç”±äºå®ç°æ”¯æŒæœ‰é™ï¼Œåªæœ‰ &lt;code&gt;arnoldi&lt;/code&gt;, &lt;code&gt;krylov-schur&lt;/code&gt;, &lt;code&gt;gd&lt;/code&gt;, &lt;code&gt;jd&lt;/code&gt;, &lt;code&gt;arpack&lt;/code&gt; æ”¯æŒæ‰€æœ‰ç±»å‹çš„é—®é¢˜æ±‚è§£
&lt;/p&gt;

&lt;table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides"&gt;


&lt;colgroup&gt;
&lt;col class="org-left"&gt;

&lt;col class="org-left"&gt;

&lt;col class="org-left"&gt;
&lt;/colgroup&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th scope="col" class="org-left"&gt;æ–¹æ³•&lt;/th&gt;
&lt;th scope="col" class="org-left"&gt;EPSType&lt;/th&gt;
&lt;th scope="col" class="org-left"&gt;é€‰é¡¹å&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class="org-left"&gt;Power / Inverse / RQI&lt;/td&gt;
&lt;td class="org-left"&gt;EPSPOWER&lt;/td&gt;
&lt;td class="org-left"&gt;power&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;Subspace Iteration&lt;/td&gt;
&lt;td class="org-left"&gt;EPSSUBSPACE&lt;/td&gt;
&lt;td class="org-left"&gt;subspace&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;Arnoldi&lt;/td&gt;
&lt;td class="org-left"&gt;EPSARNOLDI&lt;/td&gt;
&lt;td class="org-left"&gt;arnoldi&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;Lanczos&lt;/td&gt;
&lt;td class="org-left"&gt;EPSLANCZOS&lt;/td&gt;
&lt;td class="org-left"&gt;lanczos&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;Krylov-Schur&lt;/td&gt;
&lt;td class="org-left"&gt;EPSKRYLOVSCHUR&lt;/td&gt;
&lt;td class="org-left"&gt;krylovschur&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;Generalized Davidson&lt;/td&gt;
&lt;td class="org-left"&gt;EPSGD&lt;/td&gt;
&lt;td class="org-left"&gt;gd&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;Jacobi-Davidson&lt;/td&gt;
&lt;td class="org-left"&gt;EPSJD&lt;/td&gt;
&lt;td class="org-left"&gt;jd&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;Rayleigh quotient CG&lt;/td&gt;
&lt;td class="org-left"&gt;EPSRQCG&lt;/td&gt;
&lt;td class="org-left"&gt;rqcg&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;LOBPCG&lt;/td&gt;
&lt;td class="org-left"&gt;EPSLOBPCG&lt;/td&gt;
&lt;td class="org-left"&gt;lobpcg&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;Contour integral SS&lt;/td&gt;
&lt;td class="org-left"&gt;EPSCISS&lt;/td&gt;
&lt;td class="org-left"&gt;ciss&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;Lyapunov Inverse Iteration&lt;/td&gt;
&lt;td class="org-left"&gt;EPSLYAPII&lt;/td&gt;
&lt;td class="org-left"&gt;lyapii&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class="org-left"&gt;LAPACK solver&lt;/td&gt;
&lt;td class="org-left"&gt;EPSLAPACK&lt;/td&gt;
&lt;td class="org-left"&gt;lapack&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;Wrapper to arpack&lt;/td&gt;
&lt;td class="org-left"&gt;EPSARPACK&lt;/td&gt;
&lt;td class="org-left"&gt;arpack&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;Wrapper to primme&lt;/td&gt;
&lt;td class="org-left"&gt;EPSPRIMME&lt;/td&gt;
&lt;td class="org-left"&gt;primme&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;Wrapper to evsl&lt;/td&gt;
&lt;td class="org-left"&gt;EPSEVSL&lt;/td&gt;
&lt;td class="org-left"&gt;evsl&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;Wrapper to trlan&lt;/td&gt;
&lt;td class="org-left"&gt;EPSTRLAN&lt;/td&gt;
&lt;td class="org-left"&gt;trlan&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;Wrapper to blopex&lt;/td&gt;
&lt;td class="org-left"&gt;EPSBLOPEX&lt;/td&gt;
&lt;td class="org-left"&gt;blopex&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;Wrapper to scalapack&lt;/td&gt;
&lt;td class="org-left"&gt;EPSSCALAPACK&lt;/td&gt;
&lt;td class="org-left"&gt;scalapack&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;Wrapper to elpa&lt;/td&gt;
&lt;td class="org-left"&gt;EPSELPA&lt;/td&gt;
&lt;td class="org-left"&gt;elpa&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;Wrapper to elemental&lt;/td&gt;
&lt;td class="org-left"&gt;EPSELEMENTAL&lt;/td&gt;
&lt;td class="org-left"&gt;elemental&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;Wrapper to feast&lt;/td&gt;
&lt;td class="org-left"&gt;EPSFEAST&lt;/td&gt;
&lt;td class="org-left"&gt;feast&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a id="org06352e6"&gt;&lt;/a&gt;è·å¾—ç»“æœ&lt;br&gt;
&lt;div class="outline-text-5" id="text-org06352e6"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;EPSGetConverged(EPS eps,PetscInt *nconv);&lt;/code&gt; è·å¾—æ”¶æ•›çš„è§£ä¸ªæ•°&lt;/li&gt;
&lt;li&gt;&lt;code&gt;EPSGetEigenpair(EPS eps,PetscInt j,PetscScalar *kr,PetscScalar *ki,Vec xr,Vec xi);&lt;/code&gt; è·å¾—æœ¬å¾å€¼å’Œæœ¬å¾çŸ¢&lt;/li&gt;
&lt;li&gt;&lt;code&gt;EPSGetLeftEigenvector(EPS eps,PetscInt j,Vec yr,Vec yi);&lt;/code&gt; è·å¾—å·¦æœ¬å¾çŸ¢ï¼Œå¦‚æœè®¾ç½®æ±‚è§£å™¨è®¡ç®—å·¦æœ¬å¾çŸ¢çš„è¯&lt;/li&gt;
&lt;li&gt;&lt;code&gt;EPSComputeError(EPS eps,PetscInt j,EPSErrorType type,PetscReal *error);&lt;/code&gt; è·å¾—ç»“æœçš„è¯¯å·®
&lt;ol class="org-ol"&gt;
&lt;li&gt;å¯é€‰çš„è¯¯å·®ç±»å‹æœ‰ \(||r||\) &lt;code&gt;EPS_ERROR_ABSOLUTE&lt;/code&gt;, \(||r||/|\lambda|\) &lt;code&gt;EPS_ERROR_RELATIVE&lt;/code&gt;, \(||r||/(||A||+|\lambda| ||B||)\) &lt;code&gt;EPS_ERROR_BACKWARD&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;EPSGetIterationNumber(EPS eps,PetscInt *its);&lt;/code&gt; è·å¾—è¿­ä»£æ¬¡æ•°&lt;/li&gt;
&lt;li&gt;&lt;code&gt;EPSSetTolerances(EPS eps,PetscReal tol,PetscInt max_it);&lt;/code&gt; è®¾ç½®è¯¯å·®å’Œæœ€å¤§è¿­ä»£æ¬¡æ•°
&lt;ol class="org-ol"&gt;
&lt;li&gt;é»˜è®¤è¯¯å·® \(10^{-8}\)&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;EPSSetTrueResidual(EPS eps,PetscBool trueres);&lt;/code&gt; è®¾ç½®ä½¿ç”¨çœŸå®æ®‹å·®è®¡ç®—æ”¶æ•›æ¡ä»¶ï¼Œè€Œä¸æ˜¯é»˜è®¤çš„ç®€åŒ–å½¢å¼&lt;/li&gt;
&lt;li&gt;&lt;code&gt;EPSSetConvergenceTest(EPS eps,EPSConv conv);&lt;/code&gt; è®¾ç½®æ”¶æ•›æ¡ä»¶
&lt;ol class="org-ol"&gt;
&lt;li&gt;å¯é€‰çš„è¯¯å·®ç±»å‹æœ‰ \(||r||\) &lt;code&gt;EPS_CONV_ABS&lt;/code&gt;, \(||r||/|\lambda|\) &lt;code&gt;EPS_CONV_REL&lt;/code&gt;, \(||r||/(||A||+|\lambda| ||B||)\) &lt;code&gt;EPS_CONV_NORM&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;EPSGetErrorEstimate(EPS eps,PetscInt j,PetscReal *errest);&lt;/code&gt; è·å¾—è¯¯å·®ä¼°è®¡&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
æ³¨æ„ï¼š
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;å¦‚æœç¼–è¯‘æ—¶ä½¿ç”¨å®æ•°æ¨¡å¼ï¼Œé‚£ä¹ˆ &lt;code&gt;kr, ki&lt;/code&gt; ç­‰åˆ†åˆ«æ˜¯å®éƒ¨å’Œè™šéƒ¨&lt;/li&gt;
&lt;li&gt;å¦‚æœç¼–è¯‘æ—¶ä½¿ç”¨å¤æ•°æ¨¡å¼ï¼Œé‚£ä¹ˆ &lt;code&gt;kr, xr&lt;/code&gt; ä¸­å°±ä¿å­˜å¤æ•°ç»“æœï¼Œ &lt;code&gt;ki,xi&lt;/code&gt; ä¸ä½¿ç”¨ï¼ˆè®¾ä¸ºå…¨é›¶ï¼‰&lt;/li&gt;
&lt;li&gt;å¦‚æœè®¾ç½®å‘½ä»¤è¡Œé€‰é¡¹ &lt;code&gt;-eps_monitor&lt;/code&gt; é‚£ä¹ˆä¼šåœ¨æ¯æ¬¡è¿­ä»£è¿‡ç¨‹ä¸­æ‰“å°è®¡ç®—è¿‡ç¨‹&lt;/li&gt;
&lt;li&gt;å…¶å®ƒå‘½ä»¤è¡Œé€‰é¡¹ç”šè‡³å¯ä»¥ç”»å›¾ ï¼ˆ &lt;code&gt;-eps_monitor draw:draw_lg -draw_pause .2&lt;/code&gt; ï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a id="org372bfaf"&gt;&lt;/a&gt;å…¶å®ƒè®¾ç½®&lt;br&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;&lt;a id="orgc6e3cd9"&gt;&lt;/a&gt;åˆå§‹çŒœè§£&lt;br&gt;
&lt;div class="outline-text-6" id="text-orgc6e3cd9"&gt;
&lt;p&gt;
&lt;code&gt;EPSSetInitialSpace(EPS eps,PetscInt n,Vec is[]);&lt;/code&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a id="orge5bdaec"&gt;&lt;/a&gt;å¤„ç†ç®€å¹¶&lt;br&gt;&lt;/li&gt;

&lt;li&gt;&lt;a id="orgdc180c6"&gt;&lt;/a&gt;é€‰æ‹©æ­£äº¤åŒ–æ–¹æ³•&lt;br&gt;&lt;/li&gt;

&lt;li&gt;&lt;a id="orga5c2644"&gt;&lt;/a&gt;é€‰æ‹©æ»¤æ³¢ç®—æ³•&lt;br&gt;&lt;/li&gt;

&lt;li&gt;&lt;a id="orgad65c2f"&gt;&lt;/a&gt;è®¡ç®—å¤§é‡æœ¬å¾å€¼çš„æ–¹æ³•&lt;br&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>C</category><category>eigenvalue</category><category>MPI</category><category>parallel</category><category>petsc</category><guid>https://chimez.github.io/posts/slepc/</guid><pubDate>Sat, 03 Jul 2021 05:08:47 GMT</pubDate></item><item><title>pthread</title><link>https://chimez.github.io/posts/pthread/</link><dc:creator>chimez</dc:creator><description>&lt;div id="outline-container-org13eaff9" class="outline-2"&gt;
&lt;h2 id="org13eaff9"&gt;pthread: POSIX Threads&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org13eaff9"&gt;
&lt;p&gt;
pthread æ˜¯ POSIX æ ‡å‡†çš„çº¿ç¨‹ API, æ”¾åœ¨å¤´æ–‡ä»¶ &lt;code&gt;&amp;lt;pthread.h&amp;gt;&lt;/code&gt; ä¸­ï¼Œå¹¶ç”± libc æä¾›å®ç°ã€‚
&lt;/p&gt;
&lt;/div&gt;
&lt;div id="outline-container-org495a3d0" class="outline-4"&gt;
&lt;h4 id="org495a3d0"&gt;å‚è€ƒ&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org495a3d0"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;a href="https://hpc-tutorials.llnl.gov/posix/"&gt;llnl æ•™ç¨‹&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org9d45c01" class="outline-3"&gt;
&lt;h3 id="org9d45c01"&gt;pthread API&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org9d45c01"&gt;
&lt;p&gt;
æ ‡å‡† pthread API åŒ…æ‹¬ä»¥ä¸‹å‡ éƒ¨åˆ†
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;çº¿ç¨‹ç®¡ç†ï¼šåˆ›å»ºã€æ£€æµ‹ã€åˆå¹¶ç­‰&lt;/li&gt;
&lt;li&gt;äº’æ–¥é”(mutex)ï¼šåˆ›å»ºã€é”€æ¯ã€åŠ é”ã€è§£é”ç­‰&lt;/li&gt;
&lt;li&gt;æ¡ä»¶å˜é‡ï¼šåœ¨çº¿ç¨‹é—´å…±äº«é”ã€åˆ›å»ºã€é”€æ¯ã€ç­‰å¾…å’Œä¿¡å·&lt;/li&gt;
&lt;li&gt;&lt;p&gt;
åŒæ­¥ï¼šç®¡ç†è¯»å†™é”å’Œå±éšœ
&lt;/p&gt;

&lt;p&gt;
API å‘½åç»“æ„å¦‚ä¸‹ï¼š
&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides"&gt;


&lt;colgroup&gt;
&lt;col class="org-left"&gt;

&lt;col class="org-left"&gt;
&lt;/colgroup&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th scope="col" class="org-left"&gt;Routine Prefix&lt;/th&gt;
&lt;th scope="col" class="org-left"&gt;Functional Group&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;pthread_&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;Threads themselves and miscellaneous subroutines&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;pthread_attr_&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;Thread attributes objects&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;pthread_mutex_&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;Mutexes&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;pthread_mutexattr_&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;Mutex attributes objects.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;pthread_cond_&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;Condition variables&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;pthread_condattr_&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;Condition attributes objects&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;pthread_key_&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;Thread-specific data keys&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;pthread_rwlock_&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;Read/write locks&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;pthread_barrier_&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;Synchronization barriers&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org4d03554" class="outline-3"&gt;
&lt;h3 id="org4d03554"&gt;çº¿ç¨‹ç®¡ç†&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org4d03554"&gt;
&lt;/div&gt;
&lt;div id="outline-container-org22bb3ab" class="outline-4"&gt;
&lt;h4 id="org22bb3ab"&gt;åˆ›å»ºå’Œç»ˆæ­¢çº¿ç¨‹&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org22bb3ab"&gt;
&lt;p&gt;
åŒ…æ‹¬ä»¥ä¸‹å‡½æ•°
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;pthread_create(thread,attr,start_routine,arg)&lt;/code&gt; åˆ›å»ºçº¿ç¨‹&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pthread_exit(status)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pthread_cancel(thread)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pthread_attr_init(attr)&lt;/code&gt; åˆ›å»ºçº¿ç¨‹å±æ€§å¯¹è±¡&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pthread_attr_destroy(attr)&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
æ³¨æ„ï¼š
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;æ¯ä¸ªçº¿ç¨‹ç»“æŸæ—¶æœ€åéƒ½è°ƒç”¨ &lt;code&gt;pthread_exit&lt;/code&gt; è¿”å›&lt;/li&gt;
&lt;li&gt;æœ€å¥½ä¸»å‡½æ•°ä¹Ÿç”¨ &lt;code&gt;pthread_exit&lt;/code&gt; è¿”å›&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org5865e56" class="outline-4"&gt;
&lt;h4 id="org5865e56"&gt;åˆå¹¶å’Œæ£€æµ‹çº¿ç¨‹&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org5865e56"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;pthread_join (threadid,status)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pthread_detach (threadid)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pthread_attr_setdetachstate (attr,detachstate)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pthread_attr_getdetachstate (attr,detachstate)&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
æ³¨æ„ï¼š
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;å¦‚æœçº¿ç¨‹éœ€è¦è¢« &lt;code&gt;join&lt;/code&gt; æœ€å¥½æ˜¾å¼è®¾ç½® &lt;code&gt;joinable&lt;/code&gt; å±æ€§ï¼Œå› ä¸ºä¸æ˜¯æ‰€æœ‰å®ç°éƒ½é»˜è®¤åŠ è¿™ä¸ªå±æ€§&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org8a0db8c" class="outline-4"&gt;
&lt;h4 id="org8a0db8c"&gt;æ ˆç®¡ç†&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org8a0db8c"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;pthread_attr_getstacksize (attr, stacksize)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pthread_attr_setstacksize (attr, stacksize)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pthread_attr_getstackaddr (attr, stackaddr)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pthread_attr_setstackaddr (attr, stackaddr)&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
æ³¨æ„ï¼š
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;çº¿ç¨‹çš„æ ˆå¤§å°æ˜¯å®ç°ç›¸å…³çš„ï¼Œæ‰€ä»¥ä¸ºäº†ç¨‹åºå¯ç§»æ¤ï¼Œæœ€å¥½è‡ªå·±è®¾ç½®æ ˆå¤§å°&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org78b1caa" class="outline-4"&gt;
&lt;h4 id="org78b1caa"&gt;å…¶å®ƒ&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org78b1caa"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;pthread_self ()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pthread_equal (thread1,thread2)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pthread_once (once_control, init_routine)&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgafd1f51" class="outline-3"&gt;
&lt;h3 id="orgafd1f51"&gt;äº’æ–¥é”&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgafd1f51"&gt;
&lt;p&gt;
å…¸å‹çš„ä½¿ç”¨é”çš„è¿‡ç¨‹æ˜¯
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;åˆ›å»ºå¹¶åˆå§‹åŒ–é”å˜é‡&lt;/li&gt;
&lt;li&gt;å‡ ä¸ªçº¿ç¨‹å°è¯•åŠ é”&lt;/li&gt;
&lt;li&gt;åªæœ‰ä¸€ä¸ªä¼šæˆåŠŸå¹¶è·å¾—é”&lt;/li&gt;
&lt;li&gt;è·å¾—é”çš„çº¿ç¨‹è¿›è¡Œä¸€äº›æ“ä½œ&lt;/li&gt;
&lt;li&gt;é‡Šæ”¾é”&lt;/li&gt;
&lt;li&gt;å¦ä¸€ä¸ªçº¿ç¨‹å°è¯•è·å¾—é”&lt;/li&gt;
&lt;li&gt;æœ€ç»ˆé”è¢«é”€æ¯&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div id="outline-container-org67fa40a" class="outline-4"&gt;
&lt;h4 id="org67fa40a"&gt;åˆ›å»ºå’Œé”€æ¯é”&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org67fa40a"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;pthread_mutex_init (mutex,attr)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pthread_mutex_destroy (mutex)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pthread_mutexattr_init (attr)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pthread_mutexattr_destroy (attr)&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
æ³¨æ„ï¼š
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;åˆ›å»ºé”å˜é‡å¯ä»¥ç”¨ &lt;code&gt;pthread_mutex_t mymutex = PTHREAD_MUTEX_INITIALIZER;&lt;/code&gt;, ä¹Ÿå¯ä»¥ç”¨ &lt;code&gt;pthread_mutex_init()&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org33d1f43" class="outline-4"&gt;
&lt;h4 id="org33d1f43"&gt;åŠ é”å’Œè§£é”&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org33d1f43"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;pthread_mutex_lock (mutex)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pthread_mutex_trylock (mutex)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pthread_mutex_unlock (mutex)&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org8997b6a" class="outline-3"&gt;
&lt;h3 id="org8997b6a"&gt;æ¡ä»¶å˜é‡&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org8997b6a"&gt;
&lt;p&gt;
æ¡ä»¶å˜é‡ä¹Ÿæ˜¯ç”¨äºçº¿ç¨‹é—´åŒæ­¥çš„æœºåˆ¶ï¼Œä¸åŠ é”çš„å…±äº«å†…å­˜ä¸åŒï¼Œæ¡ä»¶å˜é‡ç”¨äºä¼ é€’æ¶ˆæ¯ã€‚
&lt;/p&gt;
&lt;/div&gt;
&lt;div id="outline-container-org5a69549" class="outline-4"&gt;
&lt;h4 id="org5a69549"&gt;åˆ›å»ºå’Œé”€æ¯æ¡ä»¶å˜é‡&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org5a69549"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;pthread_cond_init (condition,attr)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pthread_cond_destroy (condition)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pthread_condattr_init (attr)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pthread_condattr_destroy (attr)&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
æ³¨æ„ï¼š
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;åˆ›å»ºæ¡ä»¶å˜é‡å¯ä»¥ç”¨ &lt;code&gt;pthread_cond_t myconvar = PTHREAD_COND_INITIALIZER;&lt;/code&gt; ä¹Ÿå¯ä»¥ç”¨ &lt;code&gt;pthread_cond_init()&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org0f30990" class="outline-4"&gt;
&lt;h4 id="org0f30990"&gt;ç­‰å¾…å’Œé€šä¿¡&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org0f30990"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;pthread_cond_wait (condition,mutex)&lt;/code&gt; é˜»æ­¢çº¿ç¨‹ç›´åˆ°æŸä¸ªæ¡ä»¶è¢«é€šä¿¡è¿‡æ¥ï¼Œåº”è¯¥åœ¨åŠ é”æ—¶ä½¿ç”¨ï¼Œä¼šåœ¨ç­‰å¾…æ—¶è‡ªåŠ¨é‡Šæ”¾é”ï¼Œå½“è·å¾—ä¿¡å·æ—¶åˆä¼šæŠŠé”åŠ å›æ¥&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pthread_cond_signal (condition)&lt;/code&gt; ç”¨æ¥å‘å…¶å®ƒç­‰å¾…ä¸­çš„çº¿ç¨‹ä¼ é€’ä¿¡å·ï¼Œåº”è¯¥åœ¨åŠ é”æ—¶ä½¿ç”¨ï¼Œåœ¨æ“ä½œåä¼ ä¿¡å·ï¼Œæœ€åè§£é”&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pthread_cond_broadcast (condition)&lt;/code&gt; ç”¨æ¥å‘å¤šä¸ªçº¿ç¨‹ä¼ é€’ä¿¡å·&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
æ³¨æ„ï¼š
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;ç­‰å¾…é”æ—¶åº”è¯¥ä½¿ç”¨ &lt;code&gt;while&lt;/code&gt; å¾ªç¯åˆ¤æ–­è€Œä¸æ˜¯ &lt;code&gt;if&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;
&lt;/li&gt;&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>C</category><category>multithreading</category><category>parallel</category><category>pthread</category><guid>https://chimez.github.io/posts/pthread/</guid><pubDate>Thu, 01 Jul 2021 13:24:50 GMT</pubDate></item><item><title>ck: Concurrency Kit</title><link>https://chimez.github.io/posts/ck-concurrency-kit/</link><dc:creator>chimez</dc:creator><description>&lt;div id="outline-container-org6b2810f" class="outline-2"&gt;
&lt;h2 id="org6b2810f"&gt;ck: Concurrency Kit&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org6b2810f"&gt;
&lt;p&gt;
&lt;a href="https://github.com/concurrencykit/ck"&gt;ck&lt;/a&gt; æ˜¯ä¸€ä¸ªcè¯­è¨€çš„é«˜å¹¶å‘æ•°æ®ç»“æ„åº“ï¼Œå†…å­˜å®‰å…¨å¹¶ä¸”æ— é˜»å¡ã€‚
&lt;/p&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgb7d230c" class="outline-3"&gt;
&lt;h3 id="orgb7d230c"&gt;ck&lt;sub&gt;ht.h&lt;/sub&gt;: HashTable&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgb7d230c"&gt;
&lt;p&gt;
å“ˆå¸Œè¡¨åŒ…æ‹¬åœ¨å¤´æ–‡ä»¶ &lt;code&gt;ck_ht.h&lt;/code&gt; ä¸­ï¼Œä¸»è¦çš„æ•°æ®ç±»å‹æœ‰
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;ck_ht_t&lt;/code&gt; å“ˆå¸Œè¡¨&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ck_ht_entry_t&lt;/code&gt; å“ˆå¸Œè¡¨ä¸­çš„é”®, æ˜¯ç”¨æ¥è¯»å†™å“ˆå¸Œè¡¨çš„ä¸­é—´å˜é‡&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ck_ht_hash_t&lt;/code&gt; é”®çš„å“ˆå¸Œå€¼&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ck_ht_iterator_t&lt;/code&gt; ç”¨æ¥éå†å“ˆå¸Œè¡¨çš„è¿­ä»£å™¨&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div id="outline-container-org655280d" class="outline-4"&gt;
&lt;h4 id="org655280d"&gt;åˆå§‹åŒ–å“ˆå¸Œè¡¨&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org655280d"&gt;
&lt;p&gt;
å‡½æ•° &lt;code&gt;ck_hs_init&lt;/code&gt;
å‚æ•°è¯´æ˜ï¼š
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;ck_hs_t *&lt;/code&gt; å“ˆå¸Œè¡¨&lt;/li&gt;
&lt;li&gt;&lt;code&gt;unsigned int&lt;/code&gt; å“ˆå¸Œè¡¨çš„æ¨¡å¼&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ck_hs_hash_cb_t *&lt;/code&gt; å“ˆå¸Œç®—æ³•ï¼Œä¼  &lt;code&gt;NULL&lt;/code&gt; ä½¿ç”¨é»˜è®¤ç®—æ³•&lt;/li&gt;
&lt;li&gt;&lt;code&gt;struct ck_malloc *&lt;/code&gt; å†…å­˜åˆ†é…å™¨&lt;/li&gt;
&lt;li&gt;&lt;code&gt;unsigned long&lt;/code&gt; åˆå§‹å®¹é‡ï¼Œåªæ˜¯å»ºè®®å€¼ï¼Œå†…éƒ¨å®ç°å¯å¤§å¯å°&lt;/li&gt;
&lt;li&gt;&lt;code&gt;unsigned long&lt;/code&gt; å“ˆå¸Œç®—æ³•çš„éšæœºæ•°ç§å­&lt;/li&gt;
&lt;/ol&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ck_ht_t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;unsigned&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;mode&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CK_HT_MODE_BYTESTRING&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* è®¾ç½®å†…å­˜åˆ†é…å™¨ */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nf"&gt;ht_malloc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;size_t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;malloc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nf"&gt;ht_free&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;size_t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;bool&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;

&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;free&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;struct&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;ck_malloc&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;my_allocator&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;malloc&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ht_malloc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;free&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ht_free&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* åˆå§‹åŒ–å“ˆå¸Œè¡¨ */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ck_ht_init&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;mode&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ht_hash_wrapper&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;my_allocator&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;6602834&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;false&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;perror&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"ck_ht_init"&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;exit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;EXIT_FAILURE&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* åˆ é™¤å“ˆå¸Œè¡¨ */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ck_ht_destroy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgf0187c3" class="outline-4"&gt;
&lt;h4 id="orgf0187c3"&gt;è¯»å†™å“ˆå¸Œè¡¨&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgf0187c3"&gt;
&lt;p&gt;
åŸºæœ¬çš„é€»è¾‘æ˜¯
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;ck_ht_hash&lt;/code&gt; è®¡ç®—é”®çš„å“ˆå¸Œå€¼&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;ck_ht_entry_set&lt;/code&gt; ä¸ºå†™æ•°æ®å‡†å¤‡é”®å€¼å¯¹ï¼Œæˆ–ä½¿ç”¨ &lt;code&gt;ck_ht_entry_key_set&lt;/code&gt; ä¸ºè¯»æ•°æ®å‡†å¤‡é”®å€¼å¯¹&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;ck_ht_put_spmc&lt;/code&gt; åˆ›å»ºæ–°é”®å€¼å¯¹ï¼Œä½¿ç”¨ &lt;code&gt;ck_ht_get_spmc&lt;/code&gt; è¯»å–é”®å€¼å¯¹ï¼Œä½¿ç”¨ &lt;code&gt;ck_ht_set_spmc&lt;/code&gt; æ›´æ–°å€¼&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;ck_ht_entry_value&lt;/code&gt; è·å–è¯»åˆ°çš„å€¼&lt;/li&gt;
&lt;/ol&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ck_ht_t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ck_ht_entry_t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;entry&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ck_ht_hash_t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;uint16_t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key_len&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* åˆ›å»ºæ–°å€¼ */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* æ³¨æ„è¿™é‡Œçš„ key_len æ˜¯ bytes é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯æ•°ç»„é•¿åº¦*sizeof(æ•°ç»„ç±»å‹) */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ck_ht_hash&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key_len&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ck_ht_entry_set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;entry&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key_len&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ck_ht_put_spmc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;entry&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* è¯»å– */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ck_ht_hash&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key_len&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ck_ht_entry_key_set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;entry&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key_len&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ck_ht_put_spmc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;entry&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ck_ht_entry_value&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;entry&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* æ›´æ–° */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ck_ht_hash&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key_len&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ck_ht_entry_set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;entry&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key_len&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ck_ht_put_spmc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;entry&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;val_old&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ck_ht_entry_value&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;entry&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgeff5201" class="outline-4"&gt;
&lt;h4 id="orgeff5201"&gt;éå†å“ˆå¸Œè¡¨&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgeff5201"&gt;
&lt;p&gt;
åŸºæœ¬æ­¥éª¤
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;ck_ht_iterator_init&lt;/code&gt; åˆå§‹åŒ–è¿­ä»£å™¨&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;ck_ht_next&lt;/code&gt; è¿­ä»£&lt;/li&gt;
&lt;li&gt;&lt;p&gt;
ä½¿ç”¨ &lt;code&gt;ck_ht_entry_key&lt;/code&gt; å’Œ &lt;code&gt;ck_ht_entry_value&lt;/code&gt; è¯»å–é”®å€¼
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;ck_ht_t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;ck_ht_iterator_t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;iterator&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CK_HT_ITERATOR_INITIALIZER&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;ck_ht_entry_t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;ck_ht_iterator_init&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;iterator&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ck_ht_next&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;iterator&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ck_ht_entry_value&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ck_ht_entry_key&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>C</category><category>concurrency</category><category>hashmap</category><guid>https://chimez.github.io/posts/ck-concurrency-kit/</guid><pubDate>Sun, 27 Jun 2021 14:09:24 GMT</pubDate></item><item><title>greatest</title><link>https://chimez.github.io/posts/greatest/</link><dc:creator>chimez</dc:creator><description>&lt;div id="outline-container-org3abadab" class="outline-2"&gt;
&lt;h2 id="org3abadab"&gt;greatest: c çš„å•å…ƒæµ‹è¯•&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org3abadab"&gt;
&lt;p&gt;
&lt;a href="https://github.com/silentbicycle/greatest"&gt;greatest&lt;/a&gt; æ˜¯ c çš„ä¸€ä¸ªå•ä¸ªå¤´æ–‡ä»¶åº“ï¼Œç”¨äºå†™å•å…ƒæµ‹è¯•
&lt;/p&gt;
&lt;/div&gt;
&lt;div id="outline-container-org21d3ad1" class="outline-3"&gt;
&lt;h3 id="org21d3ad1"&gt;åŸºæœ¬ä½¿ç”¨&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org21d3ad1"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;"greatest.h"&lt;/span&gt;

&lt;span class="cm"&gt;/* A test runs various assertions, then calls PASS(), FAIL(), or SKIP(). */&lt;/span&gt;
&lt;span class="n"&gt;TEST&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;x_should_equal_1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* Compare, with an automatic "1 != x" failure message */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ASSERT_EQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* Compare, with a custom failure message */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ASSERT_EQm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"Yikes, x doesn't equal 1"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* Compare, and if they differ, print both values,&lt;/span&gt;
&lt;span class="cm"&gt;     * formatted like `printf("Expected: %d\nGot: %d\n", 1, x);` */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ASSERT_EQ_FMT&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;"%d"&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;PASS&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Suites can group multiple tests with common setup. */&lt;/span&gt;
&lt;span class="n"&gt;SUITE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;the_suite&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;RUN_TEST&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x_should_equal_1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Add definitions that need to be in the test runner's main file. */&lt;/span&gt;
&lt;span class="n"&gt;GREATEST_MAIN_DEFS&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;argc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;GREATEST_MAIN_BEGIN&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="cm"&gt;/* command-line options, initialization. */&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* Individual tests can be run directly in main, outside of suites. */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* RUN_TEST(x_should_equal_1); */&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* Tests can also be gathered into test suites. */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;RUN_SUITE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;the_suite&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;GREATEST_MAIN_END&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="cm"&gt;/* display results */&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>C</category><category>unittest</category><guid>https://chimez.github.io/posts/greatest/</guid><pubDate>Sun, 27 Jun 2021 07:47:29 GMT</pubDate></item></channel></rss>
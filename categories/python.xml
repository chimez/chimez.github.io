<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>chimez's blog (å…³äº python çš„æ–‡ç« )</title><link>https://chimez.github.io/</link><description></description><atom:link href="https://chimez.github.io/categories/python.xml" rel="self" type="application/rss+xml"></atom:link><language>zh_cn</language><copyright>Contents Â© 2023 &lt;a href="mailto:chimez@163.com"&gt;chimez&lt;/a&gt; </copyright><lastBuildDate>Thu, 19 Oct 2023 10:50:52 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>TeNPy è°ƒç ”</title><link>https://chimez.github.io/posts/tenpy-diao-yan/</link><dc:creator>chimez</dc:creator><description>&lt;p&gt;
DMRG / MPS / å¼ é‡ç½‘ç»œçš„å¼€æºåº“æœ‰å¾ˆå¤šï¼Œä¾‹å¦‚ &lt;a href="https://github.com/tenpy/tenpy.git"&gt;TeNPy&lt;/a&gt;, &lt;a href="https://itensor.org/"&gt;ITensor&lt;/a&gt;, &lt;a href="https://github.com/jutho/TensorKit.jl"&gt;TensorKit&lt;/a&gt;, &lt;a href="https://bitbucket.org/aweichselbaum/workspace/projects/QS"&gt;QSpace&lt;/a&gt;, &lt;a href="https://github.com/g1257/dmrgpp"&gt;DMRG++&lt;/a&gt;, &lt;a href="https://uni10.gitlab.io/"&gt;uni10&lt;/a&gt;, &lt;a href="https://github.com/cmendl/pytenet"&gt;PyTeNet&lt;/a&gt;, &lt;a href="https://github.com/jcmgray/quimb"&gt;quimb&lt;/a&gt;, &lt;a href="https://github.com/dsuess/mpnum"&gt;mpnum&lt;/a&gt;, &lt;a href="https://green.physics.lsa.umich.edu/alps_legacy/index.php"&gt;ALPS project&lt;/a&gt;, &lt;a href="https://github.com/issp-center-dev/TeNeS"&gt;TeNeS&lt;/a&gt;, &lt;a href="https://syten.eu/"&gt;SyTen&lt;/a&gt;, ç­‰ç­‰ã€‚
è¿™ä¸ªç³»åˆ—æ–‡ç« å°†ä¼šä»è¿™äº›åº“ä¸­é€‰æ‹©å‡ ä¸ªæ¥å­¦ä¹ å’Œåˆ†æä¸€ä¸‹ã€‚
&lt;/p&gt;


&lt;div id="org96abffc" class="figure"&gt;
&lt;p&gt;&lt;img src="https://imgs.xkcd.com/comics/standards.png" alt="standards.png"&gt;
&lt;/p&gt;
&lt;p&gt;&lt;span class="figure-number"&gt;Figure 1: &lt;/span&gt;è®©æˆ‘ä»¬å†é€ ä¸ªè½®å­ğŸ¤£&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;
&lt;a href="https://github.com/tenpy/tenpy"&gt;TeNPy&lt;/a&gt;ç”±&lt;a href="https://johannes-hauschild.de/"&gt;Johannes Hauschild&lt;/a&gt;ä¸»è¦å¼€å‘å¹¶ç»´æŠ¤ï¼ŒHauschild çš„åšå£«å¯¼å¸ˆæ˜¯ Frank Pollmannï¼Œç°åœ¨åœ¨åˆ°å¤„åšåšåã€‚
è€ƒè™‘åˆ° Hauschild ä¸€ä½œçš„æ–‡ç« æ²¡æœ‰å‡ ä¸ªï¼Œå‘è¡¨æƒ…å†µå¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œæ‰€ä»¥æŸç§ç¨‹åº¦ä¸Šä»–æ˜¯åœ¨å…¨èŒåš TeNPy çš„å¼€å‘ã€‚
&lt;/p&gt;


&lt;div id="outline-container-org2e42efd" class="outline-2"&gt;
&lt;h2 id="org2e42efd"&gt;å®‰è£…&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org2e42efd"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# å®‰è£…ä¾èµ–
pip install -U pip numpy scipy cython setuptools wheel build
# ä¸‹è½½æºç 
git clone https://github.com/tenpy/tenpy.git
# å®‰è£…
cd tenpy
pip install -e .
# æµ‹è¯•
cd tests
pip install pytest
pytest
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgef8ce19" class="outline-2"&gt;
&lt;h2 id="orgef8ce19"&gt;ä»£ç å±‚çº§&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgef8ce19"&gt;
&lt;p&gt;
TeNPy çš„ä»£ç å±‚çº§å¦‚å›¾&lt;a href="https://chimez.github.io/posts/tenpy-diao-yan/#org56c5e98"&gt;2&lt;/a&gt;ã€‚
&lt;/p&gt;

&lt;ul class="org-ul"&gt;
&lt;li&gt;&lt;code&gt;tenpy.simulations&lt;/code&gt; æ˜¯ç¨‹åºçš„å…¥å£ï¼Œæä¾›è¿è¡Œç¨‹åºï¼ˆè¿›è¡Œè¯»å–å‚æ•°ã€è¿è¡Œè®¡ç®—ã€æ‰§è¡Œæµ‹é‡ã€ä¿å­˜ç»“æœå’Œä¸­é—´è¿‡ç¨‹ç­‰ç­‰ï¼‰çš„åŠŸèƒ½&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tenpy.algorithms&lt;/code&gt; ä¸­å®ç°äº†å¤šç§ç®—æ³•ï¼ŒåŒ…æ‹¬ DMRGã€iDMRGã€TEBDå’ŒTDVP&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tenpy.models&lt;/code&gt; ä¸­å®ç°äº†å„ç§æ¨¡å‹åŒ…æ‹¬è‡ªæ—‹ã€è´¹ç±³ã€æ³¢è‰²å’Œå„ç§æ™¶æ ¼ç»“æ„ã€‚äºŒç»´æ™¶æ ¼é€šè¿‡æ˜ å°„åˆ°ä¸€ç»´æ¥å®ç°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tenpy.networks&lt;/code&gt; ä¸­å®ç°äº† MPS å’Œ MPO ç±»å‹&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tenpy.linalg&lt;/code&gt; ä¸­å®ç°äº†å¸¦æœ‰å®ˆæ’é‡çš„å¼ é‡ä»¥åŠè¿­ä»£å¯¹è§’åŒ–ç®—æ³• Lanczos å’Œ Arnoldi&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tenpy.tools&lt;/code&gt; ä¸­åŒ…æ‹¬ä¸€äº›éœ€è¦ç”¨åˆ°å…¶å®ƒåŠŸèƒ½&lt;/li&gt;
&lt;/ul&gt;


&lt;div id="org56c5e98" class="figure"&gt;
&lt;p&gt;&lt;img src="https://tenpy.readthedocs.io/en/latest/_images/overview.png" alt="overview.png"&gt;
&lt;/p&gt;
&lt;p&gt;&lt;span class="figure-number"&gt;Figure 2: &lt;/span&gt;TeNPy çš„ä»£ç å±‚çº§&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgc123122" class="outline-2"&gt;
&lt;h2 id="orgc123122"&gt;&lt;code&gt;tenpy.linalg.np_conserved.Array&lt;/code&gt;&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgc123122"&gt;
&lt;p&gt;
TeNPy çš„åŸºæœ¬æ•°æ®ç»“æ„æ˜¯ &lt;code&gt;tenpy.linalg.np_conserved.Array&lt;/code&gt;, å¸¦æœ‰å®ˆæ’è·çš„å¼ é‡ã€‚
TeNPy é‡‡ç”¨å¸¦æœ‰ç®­å¤´çš„ MPS è®°å·æ¥è¡¨ç¤ºä¸€ä¸ªå¼ é‡ã€‚
å¼ é‡çš„æ¯ä¸ªæŒ‡æ ‡æœ‰è‹¥å¹²å¯èƒ½çš„é‡å­æ•°ï¼Œè¿™äº›ä¿¡æ¯è®°å½•åœ¨ &lt;code&gt;Array.legs&lt;/code&gt; å±æ€§é‡Œã€‚
å¯¹äºä¸€ä¸ªæœ‰ \(n\) ä¸ªæŒ‡æ ‡çš„å¼ é‡,  &lt;code&gt;Array.legs&lt;/code&gt; æ˜¯é•¿åº¦ä¸º \(n\) çš„æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯ &lt;code&gt;tenpy.linalg.charges.LegCharge&lt;/code&gt; , è¿™é‡Œè®°å½•äº†è¿™ä¸ªæŒ‡æ ‡æ‰€æœ‰å¯èƒ½çš„è·ä»¥åŠå®ƒæ˜¯å…¥æŒ‡æ ‡è¿˜æ˜¯å‡ºæŒ‡æ ‡ã€‚
å¼ é‡çš„å±æ€§ &lt;code&gt;Array.qtotal&lt;/code&gt; è®°å½•æ€»é‡å­æ•°ï¼Œåªæœ‰é‚£äº›å’Œç­‰äºæ€»é‡å­æ•°çš„å—æ‰ä¼šè¢«ä¿å­˜ã€‚
æ¯ä¸ªä¿å­˜çš„å¼ é‡å—çš„æ•°æ®æ˜¯æ•°ç»„ &lt;code&gt;Array._data&lt;/code&gt; çš„ä¸€ä¸ªå…ƒç´ ï¼Œå®ƒå¯¹äºçš„é‡å­æ•°åˆ™æ˜¯çŸ©é˜µ &lt;code&gt;Array._qdata&lt;/code&gt; çš„ä¸€è¡Œã€‚
&lt;/p&gt;

&lt;pre class="example" id="org1c91396"&gt;
class Array{
    legs   : List[LegCharge],
    qtotal : Charge,
    _data  : List[numpy.ndarray],
    _qdata : numpy.ndarray[len(â€‹_data), len(legs)],
}
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgabbc1ce" class="outline-2"&gt;
&lt;h2 id="orgabbc1ce"&gt;&lt;code&gt;tenpy.networks.site.Site&lt;/code&gt;&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgabbc1ce"&gt;
&lt;p&gt;
&lt;code&gt;tenpy.networks.site.Site&lt;/code&gt; æ˜¯ä¸€ä¸ªæ ¼ç‚¹æˆ–è€…ä¸€ä¸ªç‰©ç†æŒ‡æ ‡æ‰€éœ€è¦çš„æ•°æ®ã€‚
å®ƒä¿å­˜äº†ç‰©ç†æŒ‡æ ‡æ‰€éœ€è¦çš„ä¿¡æ¯ &lt;code&gt;LegCharge&lt;/code&gt;, ä»¥åŠä½œç”¨åœ¨ä¸€ä¸ªæ ¼ç‚¹ä¸Šçš„æ‰€æœ‰å±€åŸŸç®—ç¬¦ &lt;code&gt;Site.ops&lt;/code&gt;, å†™æ¨¡å‹çš„å“ˆå¯†é¡¿é‡æ‰€éœ€è¦çš„æ‰€æœ‰ç®—ç¬¦éƒ½æ˜¯ä»è¿™é‡Œå¾—åˆ°çš„ã€‚
é™¤äº†ä¸€èˆ¬çš„ç®—ç¬¦ä¹‹å¤–è¿˜æœ‰ Jordan-Wigner å˜æ¢ï¼ˆå¦‚æœéœ€è¦ï¼‰è¦ç”¨åˆ°çš„ä¿¡æ¯ã€‚
&lt;/p&gt;

&lt;p&gt;
TeNPy ä¸­å®ç°çš„ &lt;code&gt;Site&lt;/code&gt; æœ‰å¦‚ä¸‹è¿™äº›
&lt;/p&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;&lt;code&gt;BosonSite&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ClockSite&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;FermionSite&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;GroupedSite&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SpinHalfFermionSite&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SpinHalfHoleSite&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SpinHalfSite&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SpinSite&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgd1f8db5" class="outline-2"&gt;
&lt;h2 id="orgd1f8db5"&gt;&lt;code&gt;tenpy.networks.mps.MPS&lt;/code&gt;&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgd1f8db5"&gt;
&lt;p&gt;
å¯¹äº \(n\) æ ¼ç‚¹çš„é“¾ï¼Œ &lt;code&gt;tenpy.networks.mps.MPS&lt;/code&gt; å°±æ˜¯ \(n\) ä¸ª &lt;code&gt;Site&lt;/code&gt; å’Œ \(n\) ä¸ª &lt;code&gt;Array&lt;/code&gt;, è¿™äº› &lt;code&gt;Array&lt;/code&gt; éƒ½æ˜¯ä¸‰é˜¶å¼ é‡.
TeNPy çš„ MPS è¡¨ç¤ºè®°å½•äº†æ¯ä¸ªå—çš„å½¢å¼ï¼ˆå·¦æ­£åˆ™ã€å³æ­£åˆ™ã€å¯¹ç§°å½¢å¼æˆ–è€…å« Vidal çš„ \(\Gamma \Lambda\) å½¢å¼ï¼‰ä»¥åŠéœ€è¦çš„å¥‡å¼‚å€¼ã€‚
&lt;/p&gt;

&lt;pre class="example" id="org0eec316"&gt;
class MPS{
    sites: List[Site],
    _B: List[Array],
    _S: List[numpy.ndarray[1d]],
    form: List[form],
}
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orged5a374" class="outline-2"&gt;
&lt;h2 id="orged5a374"&gt;&lt;code&gt;tenpy.networks.mpo.MPO&lt;/code&gt;&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orged5a374"&gt;
&lt;p&gt;
&lt;code&gt;tenpy.networks.mpo.MPO&lt;/code&gt; ä¸ MPS è¡¨ç¤ºç±»ä¼¼ï¼Œåªä¸è¿‡æ¯ä¸ªå—ç°åœ¨æ˜¯å››é˜¶å¼ é‡ã€‚
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org909028c" class="outline-2"&gt;
&lt;h2 id="org909028c"&gt;&lt;code&gt;tenpy.models.model.Model&lt;/code&gt;&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org909028c"&gt;
&lt;p&gt;
&lt;code&gt;tenpy.models.model.Model&lt;/code&gt; ç”¨æ¥è¡¨ç¤ºæ¨¡å‹çš„å“ˆå¯†é¡¿é‡ï¼Œéœ€è¦æŒ‡å®šå…ƒèƒæ ¼ç‚¹çš„ä¿¡æ¯ &lt;code&gt;Site&lt;/code&gt; ä»¥åŠæ™¶æ ¼ç»“æ„å¦‚ä½•æ˜ å°„åˆ°ä¸€ç»´é“¾ &lt;code&gt;tenpy.models.lattice.Lattice&lt;/code&gt;.
TeNPy æä¾›çš„æ„é€ æ¨¡å‹çš„æ–¹æ³•æ˜¯é€šè¿‡ &lt;code&gt;add_onsite&lt;/code&gt;, &lt;code&gt;add_coupling&lt;/code&gt; ç­‰è®¾ç½®å“ˆå¯†é¡¿é‡é‡Œçš„å„é¡¹ï¼Œç„¶åæ ¹æ®éœ€è¦è‡ªåŠ¨æ„é€  MPOã€‚
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org6695b2e" class="outline-2"&gt;
&lt;h2 id="org6695b2e"&gt;DMRG ç®—æ³•&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org6695b2e"&gt;
&lt;p&gt;
TeNPy çš„æŠ½è±¡å±‚æ¬¡æ˜¯
&lt;/p&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;ç”± &lt;code&gt;tenpy.algorithms.algorithm.Algorithm&lt;/code&gt; æä¾›è¿è¡Œã€é‡å¯ç­‰åŠŸèƒ½&lt;/li&gt;
&lt;li&gt;ç„¶åç”± &lt;code&gt;tenpy.algorithms.mps_common.Sweep&lt;/code&gt; æä¾›æ‰«æçš„æŠ½è±¡&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªæ‰«ææ­¥éª¤åˆ™ä½¿ç”¨ &lt;code&gt;tenpy.algorithms.dmrg.DMRGEngine&lt;/code&gt; å®ƒå¯ä»¥æ˜¯ &lt;code&gt;SingleSiteDMRGEngine&lt;/code&gt; æˆ–è€… &lt;code&gt;TwoSiteDMRGEngine&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>python</category><guid>https://chimez.github.io/posts/tenpy-diao-yan/</guid><pubDate>Wed, 18 Oct 2023 03:03:14 GMT</pubDate></item><item><title>setuptools</title><link>https://chimez.github.io/posts/setuptools/</link><dc:creator>chimez</dc:creator><description>&lt;div id="outline-container-org40f4f11" class="outline-2"&gt;
&lt;h2 id="org40f4f11"&gt;setuptools: python çš„æ‰“åŒ…å·¥å…·&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org40f4f11"&gt;
&lt;p&gt;
&lt;a href="https://setuptools.pypa.io"&gt;setuptools&lt;/a&gt; æ˜¯ pypa çš„é¡¹ç›®ã€‚
&lt;/p&gt;
&lt;/div&gt;

&lt;div id="outline-container-org95bb1af" class="outline-3"&gt;
&lt;h3 id="org95bb1af"&gt;åŸºæœ¬ä½¿ç”¨&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org95bb1af"&gt;
&lt;/div&gt;
&lt;div id="outline-container-org4f1113b" class="outline-4"&gt;
&lt;h4 id="org4f1113b"&gt;&lt;code&gt;pyproject.toml&lt;/code&gt;&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org4f1113b"&gt;
&lt;p&gt;
PEP 517 è¦æ±‚æ‰€æœ‰ python é¡¹ç›®éœ€è¦ä¸€ä¸ªé…ç½®æ–‡ä»¶ &lt;code&gt;pyproject.toml&lt;/code&gt; å…¶ä¸­æè¿°é¡¹ç›®çš„åŸºæœ¬ä¿¡æ¯å’Œä¾èµ–ç­‰ã€‚
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    [build-system]
    requires = ["setuptools", "wheel"]
    build-backend = "setuptools.build_meta"
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;


&lt;div id="outline-container-orge0ce0e0" class="outline-4"&gt;
&lt;h4 id="orge0ce0e0"&gt;&lt;code&gt;setup.cfg&lt;/code&gt; or &lt;code&gt;setup.py&lt;/code&gt;&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orge0ce0e0"&gt;
&lt;p&gt;
&lt;code&gt;setup.cfg&lt;/code&gt; æ˜¯ setuptools çš„ DSLï¼Œè€Œ &lt;code&gt;setup.py&lt;/code&gt; ç”¨ä¸€èˆ¬çš„ python ä»£ç ã€‚
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;setuptools&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;setup&lt;/span&gt;

    &lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'mypackage'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;version&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'0.0.1'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;packages&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'mypackage'&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
        &lt;span class="n"&gt;install_requires&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
            &lt;span class="s1"&gt;'requests'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s1"&gt;'importlib; python_version == "2.6"'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="p"&gt;],&lt;/span&gt;
    &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;ul class="org-ul"&gt;
&lt;li&gt;&lt;code&gt;packages&lt;/code&gt; æŒ‡å®š setuptools è¦å¤„ç†çš„åŒ…ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;find_packages&lt;/code&gt;, &lt;code&gt;find_namespace_packages&lt;/code&gt; æ¥è‡ªåŠ¨æ‰¾åˆ°æ‰€æœ‰åŒ…&lt;/li&gt;
&lt;li&gt;&lt;code&gt;install_requires&lt;/code&gt; æŒ‡å®šå®‰è£…åŒ…éœ€è¦çš„ä¾èµ–, setuptools å¯ä»¥è‡ªåŠ¨ä» pypa å®‰è£…ä¾èµ–&lt;/li&gt;
&lt;li&gt;&lt;code&gt;setup_requires&lt;/code&gt; æŒ‡å®šä¾èµ–ï¼Œä½† setuptools ä¸ä¼šè‡ªåŠ¨å®‰è£…å®ƒ&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;


&lt;div id="outline-container-org0743c80" class="outline-3"&gt;
&lt;h3 id="org0743c80"&gt;å¼€å‘æ¨¡å¼&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org0743c80"&gt;
&lt;p&gt;
ä½¿ç”¨å¼€å‘æ¨¡å¼ï¼Œå¯ä»¥å®Œæˆæ„å»ºè€Œä¸éœ€è¦å°†æ–‡ä»¶å¤åˆ¶åˆ°åŒ…ç›®å½•ã€‚
&lt;/p&gt;

&lt;ul class="org-ul"&gt;
&lt;li&gt;å¼€å‘æ¨¡å¼å®‰è£… &lt;code&gt;setup.py develop&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å¼€å‘æ¨¡å¼å¸è½½ &lt;code&gt;setup.py develop --uninstall&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å¼€å‘æ¨¡å¼ä¸ PEP 517 ä¸å…¼å®¹ï¼Œæ‰€ä»¥ç”¨ pip å®‰è£…çš„æ–¹å¼æ˜¯ &lt;code&gt;pip install --editable .&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org2f4d5fa" class="outline-3"&gt;
&lt;h3 id="org2f4d5fa"&gt;cython&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org2f4d5fa"&gt;
&lt;p&gt;
setuptools ä¼šè‡ªåŠ¨æ£€æŸ¥ cython æ˜¯å¦å®‰è£…ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±ä¼šå¿½ç•¥æ‰€æœ‰ &lt;code&gt;.pyx&lt;/code&gt; æ–‡ä»¶ã€‚
&lt;/p&gt;

&lt;p&gt;
PEP 517 è¦æ±‚åœ¨ &lt;code&gt;pyproject.toml&lt;/code&gt; ä¸­åŠ å…¥
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;   [build-system]
   requires=[..., "cython"]
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
ä¸ºäº†å…¼å®¹æ€§ï¼Œæ¨èåœ¨ &lt;code&gt;setup.py&lt;/code&gt; ä¸­ä¹ŸåŠ å…¥ä¾èµ– &lt;code&gt;setup_requires = ['cython', ...]&lt;/code&gt;
&lt;/p&gt;

&lt;p&gt;
&lt;code&gt;setup.py&lt;/code&gt;
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;   &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;setuptools&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;setup&lt;/span&gt;
   &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;Cython.Build&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;cythonize&lt;/span&gt;

   &lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
       &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'Hello world app'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
       &lt;span class="n"&gt;ext_modules&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;cythonize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"hello.pyx"&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
       &lt;span class="n"&gt;zip_safe&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
       &lt;span class="n"&gt;setup_requires&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'cython'&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
   &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>cython</category><category>python</category><guid>https://chimez.github.io/posts/setuptools/</guid><pubDate>Wed, 06 Oct 2021 12:00:12 GMT</pubDate></item><item><title>reStructuredText</title><link>https://chimez.github.io/posts/restructuredtext/</link><dc:creator>chimez</dc:creator><description>&lt;div id="outline-container-org5becc00" class="outline-2"&gt;
&lt;h2 id="org5becc00"&gt;reStructuredText&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org5becc00"&gt;
&lt;p&gt;
reST, æ–‡ä»¶åç¼€ &lt;code&gt;*.rst&lt;/code&gt; æ˜¯ç±»ä¼¼ markdown çš„æ ‡è®°è¯­è¨€ï¼Œæ˜¯ python çš„ &lt;img src="https://chimez.github.io/sphinx-documentation-generator.org" alt="Sphinx"&gt; é»˜è®¤è¯­è¨€ã€‚
&lt;/p&gt;
&lt;/div&gt;

&lt;div id="outline-container-org5811382" class="outline-3"&gt;
&lt;h3 id="org5811382"&gt;åŸºæœ¬è¯­æ³•&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org5811382"&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgb765f2d" class="outline-4"&gt;
&lt;h4 id="orgb765f2d"&gt;æ®µè½&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgb765f2d"&gt;
&lt;p&gt;
ä¸ python ç±»ä¼¼ï¼ŒreST ä¸­ç”¨ç¼©è¿›è¡¨ç¤ºä¸åŒçš„å±‚çº§ã€‚
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orga82456c" class="outline-4"&gt;
&lt;h4 id="orga82456c"&gt;è¡Œå†…æ ‡è®°&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orga82456c"&gt;
&lt;pre class="example" id="orgf7ce19d"&gt;
*something*               | æ–œä½“
**something**             | ç²—ä½“
``code``                  | è¡Œå†…ä»£ç 
`title &amp;lt;http://to.link&amp;gt;`_ | å¤–éƒ¨é“¾æ¥
`my link`_                | åˆ†å¼€çš„é“¾æ¥
.. _my link: http::/a.link
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org5d253c7" class="outline-4"&gt;
&lt;h4 id="org5d253c7"&gt;åˆ—è¡¨&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org5d253c7"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    1. ç¼–å·åˆ—è¡¨
    2. ç¼–å·åˆ—è¡¨

    * æ— ç¼–å·åˆ—è¡¨
    * æ— ç¼–å·åˆ—è¡¨

    #. è¿˜æ˜¯ç¼–å·åˆ—è¡¨
    #. è¿˜æ˜¯ç¼–å·åˆ—è¡¨


    * åˆ—è¡¨å¯ä»¥åµŒå¥—

      * ä½†æ˜¯è¦ç©ºä¸€è¡Œ
      * å¹¶ä¸”ç¼©è¿›
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org82391f4" class="outline-4"&gt;
&lt;h4 id="org82391f4"&gt;å¼•ç”¨å—&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org82391f4"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    å¼•ç”¨å—ï¼Œæœ«å°¾ç”¨åŒå†’å·::

      ç©ºä¸€è¡Œ

      å¹¶ä¸”ç¼©è¿›

    ç©ºä¸€è¡Œå°±ç»“æŸ
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgb32b1ea" class="outline-4"&gt;
&lt;h4 id="orgb32b1ea"&gt;è¡¨æ ¼&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgb32b1ea"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    å®Œæ•´çš„è¡¨æ ¼

    +------------------------+------------+----------+----------+
    | Header row, column 1   | Header 2   | Header 3 | Header 4 |
    | (header rows optional) |            |          |          |
    +========================+============+==========+==========+
    | body row 1, column 1   | column 2   | column 3 | column 4 |
    +------------------------+------------+----------+----------+
    | body row 2             | ...        | ...      |          |
    +------------------------+------------+----------+----------+

    ç®€åŒ–çš„è¡¨æ ¼

    =====  =====  =======
    A      B      A and B
    =====  =====  =======
    False  False  False
    True   False  False
    False  True   False
    True   True   True
    =====  =====  =======
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org0ad2d1e" class="outline-4"&gt;
&lt;h4 id="org0ad2d1e"&gt;æ ‡é¢˜&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org0ad2d1e"&gt;
&lt;pre class="example" id="orgeb136c3"&gt;
# | parts
* | chapters
= | sections
- | subsections
^ | subsubsections
" | paragraphs
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orga281f0d" class="outline-3"&gt;
&lt;h3 id="orga281f0d"&gt;æŒ‡ä»¤&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orga281f0d"&gt;
&lt;p&gt;
reST æ”¯æŒå¾ˆå¤šæŒ‡ä»¤ï¼Œè¿™é‡Œæ˜¯å¸¸ç”¨çš„å‡ ä¸ª
&lt;/p&gt;
&lt;/div&gt;

&lt;ul class="org-ul"&gt;
&lt;li&gt;&lt;a id="orgde4d6af"&gt;&lt;/a&gt;&lt;code&gt;image&lt;/code&gt; å›¾ç‰‡&lt;br&gt;&lt;/li&gt;

&lt;li&gt;&lt;a id="orgd95b6d6"&gt;&lt;/a&gt;&lt;code&gt;[#footnote]_&lt;/code&gt; è„šæ³¨&lt;br&gt;&lt;/li&gt;

&lt;li&gt;&lt;a id="org8d4dce1"&gt;&lt;/a&gt;&lt;code&gt;..&lt;/code&gt; æ³¨é‡Š&lt;br&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id="outline-container-org28e55f6" class="outline-3"&gt;
&lt;h3 id="org28e55f6"&gt;è§’è‰²&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org28e55f6"&gt;
&lt;p&gt;
reST ä½¿ç”¨ &lt;code&gt;:rolename:`content`&lt;/code&gt; è¯­æ³•æ¥åšä¸€äº›å¤æ‚çš„è¡Œå†…æ ‡è®°
&lt;/p&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgb6224f5" class="outline-4"&gt;
&lt;h4 id="orgb6224f5"&gt;&lt;code&gt;:ref:&lt;/code&gt; äº¤å‰å¼•ç”¨&lt;/h4&gt;
&lt;/div&gt;

&lt;div id="outline-container-org8b36dd4" class="outline-4"&gt;
&lt;h4 id="org8b36dd4"&gt;&lt;code&gt;:math:&lt;/code&gt; æ•°å­¦å…¬å¼&lt;/h4&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>doc</category><category>python</category><category>rst</category><guid>https://chimez.github.io/posts/restructuredtext/</guid><pubDate>Mon, 16 Aug 2021 02:46:27 GMT</pubDate></item><item><title>Sphinx: Documentation Generator</title><link>https://chimez.github.io/posts/sphinx-documentation-generator/</link><dc:creator>chimez</dc:creator><description>&lt;div id="outline-container-orga2f31c7" class="outline-2"&gt;
&lt;h2 id="orga2f31c7"&gt;Sphinx: æ–‡æ¡£ç”Ÿæˆ&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orga2f31c7"&gt;
&lt;p&gt;
&lt;a href="https://www.sphinx-doc.org/en/master/usage/quickstart.html"&gt;sphinx/getting started&lt;/a&gt;
&lt;/p&gt;
&lt;/div&gt;

&lt;div id="outline-container-org9f97d0c" class="outline-3"&gt;
&lt;h3 id="org9f97d0c"&gt;åˆ›å»ºä¸é…ç½®é¡¹ç›®&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org9f97d0c"&gt;
&lt;/div&gt;
&lt;div id="outline-container-orged7c631" class="outline-4"&gt;
&lt;h4 id="orged7c631"&gt;&lt;code&gt;sphinx-quickstart&lt;/code&gt;&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orged7c631"&gt;
&lt;p&gt;
ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ï¼Œå¿«é€Ÿåˆ›å»ºé¡¹ç›®ã€‚è·ŸéšæŒ‡å¯¼åšä¸€äº›é€‰é¡¹ã€‚
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org354ffb8" class="outline-4"&gt;
&lt;h4 id="org354ffb8"&gt;ç”Ÿæˆæ–‡æ¡£&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org354ffb8"&gt;
&lt;p&gt;
ä½¿ç”¨å‘½ä»¤ &lt;code&gt;sphinx-build -b html sourcedir builddir&lt;/code&gt; æˆ–è€… &lt;code&gt;make html&lt;/code&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org6eef871" class="outline-4"&gt;
&lt;h4 id="org6eef871"&gt;åŸºæœ¬é…ç½®&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org6eef871"&gt;
&lt;p&gt;
åŸºæœ¬é…ç½®åœ¨ &lt;code&gt;conf.py&lt;/code&gt; æ–‡ä»¶ä¸­ã€‚è¿™ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªpython è„šæœ¬ï¼Œå¯ä»¥æ‰§è¡Œå„ç§pythonå‡½æ•°å’Œå¯¼å…¥å…¶å®ƒåº“ç­‰ã€‚
&lt;/p&gt;

&lt;p&gt;
é…ç½®å‚è€ƒ&lt;a href="https://www.sphinx-doc.org/en/master/usage/configuration.html"&gt;configuration&lt;/a&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orge1e8ff9" class="outline-3"&gt;
&lt;h3 id="orge1e8ff9"&gt;å†™æ–‡æ¡£&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orge1e8ff9"&gt;
&lt;/div&gt;
&lt;div id="outline-container-org684aab9" class="outline-4"&gt;
&lt;h4 id="org684aab9"&gt;æ–‡æ¡£ç»“æ„&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org684aab9"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;index.rst&lt;/code&gt; æ–‡ä»¶æ˜¯æ–‡æ¡£çš„æ¬¢è¿é¡µé¢ï¼Œå…¶ä¸­åŒ…æ‹¬
&lt;ol class="org-ol"&gt;
&lt;li&gt;ç›®å½•æ ‘ &lt;code&gt;toctree&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org83cde33" class="outline-4"&gt;
&lt;h4 id="org83cde33"&gt;reStructuredText directives&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org83cde33"&gt;
&lt;p&gt;
rst æŒ‡ä»¤çš„æ ¼å¼ä¸­åŒ…æ‹¬
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;å‚æ•°ï¼šåœ¨æŒ‡ä»¤ååé¢çš„å†’å·ä¹‹åï¼Œæ¯ä¸ªæŒ‡ä»¤å¯ä»¥æœ‰è‹¥å¹²ä¸ªå‚æ•°&lt;/li&gt;
&lt;li&gt;é€‰é¡¹ï¼šåœ¨å‚æ•°ä¹‹åï¼Œé€‰é¡¹çš„å½¢å¼æ˜¯ &lt;code&gt;å-å€¼&lt;/code&gt; çš„åˆ—è¡¨ï¼Œä¸€è¡Œä¸€ä¸ª&lt;/li&gt;
&lt;li&gt;å†…å®¹ï¼šåœ¨å‚æ•°ä¹‹åç©ºä¸€è¡Œ&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;

&lt;ul class="org-ul"&gt;
&lt;li&gt;&lt;a id="orgf658e78"&gt;&lt;/a&gt;&lt;code&gt;toctree&lt;/code&gt; ç›®å½•&lt;br&gt;
&lt;div class="outline-text-5" id="text-orgf658e78"&gt;
&lt;p&gt;
å‚è€ƒï¼š&lt;a href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/directives.html#toctree-directive"&gt;directives/toctree-directive&lt;/a&gt;
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;     .. toctree::
        :maxdepth: 2

        intro
        strings
        datatypes
        numeric
        (many more documents listed here)
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;ul class="org-ul"&gt;
&lt;li&gt;&lt;a id="org107a9ec"&gt;&lt;/a&gt;å†…å®¹&lt;br&gt;
&lt;div class="outline-text-6" id="text-org107a9ec"&gt;
&lt;p&gt;
å†…å®¹ä¸­æ¯ä¸€è¡Œå°±æ˜¯è¦é“¾æ¥åˆ°çš„æ–‡ä»¶å, å¯ä»¥ç”¨ &lt;code&gt;Net Title &amp;lt;filename&amp;gt;&lt;/code&gt; é‡æ–°æŒ‡å®šæ˜¾ç¤ºçš„æ ‡é¢˜
&lt;/p&gt;
&lt;/div&gt;
&lt;/li&gt;

&lt;li&gt;&lt;a id="org0ae467b"&gt;&lt;/a&gt;é€‰é¡¹&lt;br&gt;
&lt;div class="outline-text-6" id="text-org0ae467b"&gt;
&lt;table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides"&gt;


&lt;colgroup&gt;
&lt;col class="org-left"&gt;

&lt;col class="org-left"&gt;
&lt;/colgroup&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th scope="col" class="org-left"&gt;é€‰é¡¹&lt;/th&gt;
&lt;th scope="col" class="org-left"&gt;ä½œç”¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;:numbered:&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;ç»™ç›®å½•ç¼–å·&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;:caption: Table of Contents&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;ç›®å½•çš„æ ‡é¢˜&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;:name: mastertoc&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;è®¾ç½® &lt;code&gt;ref&lt;/code&gt; ç”¨çš„åå­—&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;:titlesonly:&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;åªæ˜¾ç¤ºæ–‡ä»¶æ ‡é¢˜&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;:glob:&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;å¯ä»¥ä½¿ç”¨ &lt;code&gt;*&lt;/code&gt; åŒ¹é…å¾ˆå¤šæ–‡ä»¶&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;:hidden:&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;é“¾æ¥ï¼Œä½†ä¸æ˜¾ç¤º&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;:includehidden:&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;åªé“¾æ¥ä¸€çº§æ ‡é¢˜ï¼Œéšè—å…¶å®ƒçš„&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;&lt;code&gt;:maxdepth: 2&lt;/code&gt;&lt;/td&gt;
&lt;td class="org-left"&gt;ç›®å½•å±‚çº§æ·±åº¦&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id="outline-container-org9b459e5" class="outline-4"&gt;
&lt;h4 id="org9b459e5"&gt;Domains&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org9b459e5"&gt;
&lt;p&gt;
ä¸ºäº†å¯¹åº” python/c++ ä¸­çš„åå­—ç©ºé—´ï¼Œé˜²æ­¢å‡½æ•°åå†²çªï¼Œè¦æŠŠå‡½æ•°çš„æ–‡æ¡£å†™åœ¨ domain é‡Œã€‚
&lt;/p&gt;

&lt;p&gt;
å‚è€ƒ &lt;a href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/domains.html"&gt;domains&lt;/a&gt;
&lt;/p&gt;
&lt;/div&gt;

&lt;ul class="org-ul"&gt;
&lt;li&gt;&lt;a id="org25a201d"&gt;&lt;/a&gt;åŸºæœ¬è¯­æ³•&lt;br&gt;
&lt;div class="outline-text-5" id="text-org25a201d"&gt;
&lt;p&gt;
å¯ä»¥ä¸€æ¬¡ç”Ÿæˆä¸¤ä¸ªå‡½æ•°
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;     .. py:function:: spam(eggs)
                      ham(eggs)

        Spam or ham the foo.
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
å¦‚æœä¸€ä¸ªå‡½æ•°å¾ˆé•¿ï¼Œå¯ä»¥æŠ˜è¡Œå¹¶åŠ ä¸Š &lt;code&gt;:noindex:&lt;/code&gt;
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;     .. py:function:: filterwarnings(action, message='', category=Warning, \
                                     module='', lineno=0, append=False)
        :noindex:
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
é»˜è®¤çš„ domain æ˜¯ pythonï¼Œå¯ä»¥ç”¨ &lt;code&gt;.. default-domain:: name&lt;/code&gt; ä¿®æ”¹
&lt;/p&gt;
&lt;/div&gt;
&lt;/li&gt;

&lt;li&gt;&lt;a id="orge592616"&gt;&lt;/a&gt;äº¤å‰å¼•ç”¨&lt;br&gt;
&lt;div class="outline-text-5" id="text-orge592616"&gt;
&lt;p&gt;
åŸºæœ¬è¯­æ³•æ˜¯ &lt;code&gt;:role:`title &amp;lt;target&amp;gt;`&lt;/code&gt; è¿™ä¼šå¼•ç”¨ &lt;code&gt;target&lt;/code&gt; ä½†æ˜¾ç¤ºçš„æ˜¯ &lt;code&gt;title&lt;/code&gt;
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;å‰é¢åŠ  &lt;code&gt;!&lt;/code&gt; ä¸ç”Ÿæˆå¼•ç”¨&lt;/li&gt;
&lt;li&gt;å‰é¢åŠ  æ³¢æµªçº¿ &lt;code&gt;\~&lt;/code&gt; åªä¼šæ˜¾ç¤ºæœ€åä¸€ä¸ªå…ƒç´ çš„å¼•ç”¨ &lt;code&gt;:py:meth:`\~Queue.Queue.get`&lt;/code&gt; åªæ˜¾ç¤º &lt;code&gt;get&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a id="org07742d7"&gt;&lt;/a&gt;C++&lt;br&gt;
&lt;div class="outline-text-5" id="text-org07742d7"&gt;
&lt;p&gt;
å‚è€ƒ &lt;a href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/domains.html#cpp-domain"&gt;domains/cpp-domain&lt;/a&gt;     
&lt;/p&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;


&lt;div id="outline-container-org6bb665c" class="outline-3"&gt;
&lt;h3 id="org6bb665c"&gt;Autodoc: æ³¨é‡Šæ–‡æ¡£&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org6bb665c"&gt;
&lt;p&gt;
é€šè¿‡ autodoc å¯ä»¥ä»æºç çš„æ³¨é‡Šç”Ÿæˆæ–‡æ¡£ã€‚éœ€è¦åœ¨ &lt;code&gt;conf.py&lt;/code&gt; çš„ &lt;code&gt;extensions&lt;/code&gt; ä¸­åŠ å…¥ &lt;code&gt;'sphinx.ext.autodoc'&lt;/code&gt; . ä¹‹åå°±å¯ä»¥åˆ©ç”¨ &lt;code&gt;autofunction&lt;/code&gt; &lt;code&gt;automodule&lt;/code&gt; ç­‰æŒ‡ä»¤ï¼Œå°†æ³¨é‡Šä½œä¸ºæ–‡æ¡£å¯¼å…¥ã€‚
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;


&lt;div id="outline-container-org935b529" class="outline-3"&gt;
&lt;h3 id="org935b529"&gt;breathe&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org935b529"&gt;
&lt;p&gt;
&lt;a href="https://breathe.readthedocs.io/en/latest/index.html"&gt;breathe&lt;/a&gt; æ˜¯é€šè¿‡ doxygen ç”Ÿæˆ c/c++ çš„æ–‡æ¡£çš„å·¥å…·
&lt;/p&gt;
&lt;/div&gt;

&lt;div id="outline-container-org8f4be7d" class="outline-4"&gt;
&lt;h4 id="org8f4be7d"&gt;åŸºæœ¬ä½¿ç”¨&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org8f4be7d"&gt;
&lt;p&gt;
è®¾ç½® &lt;code&gt;conf.py&lt;/code&gt;
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="n"&gt;breathe_projects_source&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;"my_proj"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"../src"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"oneheader.h"&lt;/span&gt;&lt;span class="p"&gt;]),&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;breathe_default_project&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"my_proj"&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
å°±å¯ä»¥åœ¨ &lt;code&gt;index.rst&lt;/code&gt; ä¸­ä½¿ç”¨
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    .. autodoxygenfile:: oneheader.h
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>Documents</category><category>python</category><guid>https://chimez.github.io/posts/sphinx-documentation-generator/</guid><pubDate>Mon, 16 Aug 2021 02:00:41 GMT</pubDate></item><item><title>cython</title><link>https://chimez.github.io/posts/cython/</link><dc:creator>chimez</dc:creator><description>&lt;div id="outline-container-org4fa1dca" class="outline-2"&gt;
&lt;h2 id="org4fa1dca"&gt;Cython&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org4fa1dca"&gt;
&lt;/div&gt;
&lt;div id="outline-container-org5c1a59b" class="outline-3"&gt;
&lt;h3 id="org5c1a59b"&gt;åŸºæœ¬æ¦‚å¿µ&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org5c1a59b"&gt;
&lt;/div&gt;
&lt;div id="outline-container-orga7aa3db" class="outline-4"&gt;
&lt;h4 id="orga7aa3db"&gt;æ–‡ä»¶&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orga7aa3db"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;.pyx&lt;/code&gt; æ˜¯ &lt;code&gt;cython&lt;/code&gt; è¯­æ³•çš„æºæ–‡ä»¶&lt;/li&gt;
&lt;li&gt;&lt;code&gt;.pyd&lt;/code&gt; (windows) æ˜¯ windows å¹³å°ä¸Šç¼–è¯‘åçš„æ–‡ä»¶ï¼Œå¯¹åº” linux å¹³å°çš„ &lt;code&gt;*.so&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;.pyd&lt;/code&gt; (æºæ–‡ä»¶) æ˜¯å¤–éƒ¨å£°æ˜ï¼Œå³å¯¹ &lt;code&gt;.h&lt;/code&gt; å¤´æ–‡ä»¶çš„é‡æ–°å°è£…&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org8a5218b" class="outline-4"&gt;
&lt;h4 id="org8a5218b"&gt;åº“&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org8a5218b"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;Cython.Build&lt;/code&gt; python ç«¯è°ƒç”¨ï¼Œç”¨äºç¼–è¯‘&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cython.parallel&lt;/code&gt; cython ç«¯è°ƒç”¨ï¼Œå¹¶è¡Œ &lt;code&gt;prange&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
æ‰€æœ‰ c åº“åœ¨ &lt;a href="https://github.com/cython/cython/tree/master/Cython/Includes"&gt;Cython/Includes&lt;/a&gt; ä¸­
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;libc&lt;/code&gt; cython ç«¯è°ƒç”¨ï¼Œ c æ ‡å‡†åº“&lt;/li&gt;
&lt;li&gt;&lt;code&gt;libcpp&lt;/code&gt; cython ç«¯è°ƒç”¨ï¼Œ c++ stl åº“&lt;/li&gt;
&lt;li&gt;&lt;code&gt;numpy&lt;/code&gt; cython ç«¯è°ƒç”¨ï¼Œnumpy æ”¯æŒ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;posix&lt;/code&gt; cython ç«¯è°ƒç”¨ï¼Œposix åº“&lt;/li&gt;
&lt;li&gt;&lt;code&gt;openmp&lt;/code&gt; cython ç«¯è°ƒç”¨ï¼Œå¹¶è¡Œ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cpython&lt;/code&gt; cython ç«¯è°ƒç”¨ï¼Œ python çš„ c æ¥å£&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cython&lt;/code&gt; cython ç«¯è°ƒç”¨ï¼Œæ§åˆ¶ç‰¹æ®Šè¡Œä¸º&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org86bde6d" class="outline-4"&gt;
&lt;h4 id="org86bde6d"&gt;è¯­æ³•&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org86bde6d"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    from libc.math cimport log2 # å¼•å…¥ c å‡½æ•°
    cdef int x # å£°æ˜å˜é‡ç±»å‹
    cdef int [:,:] x # å£°æ˜å˜é‡æ˜¯ numpy çš„ 2d å‘é‡
    ctypedef struct queue: # å£°æ˜ç±»å‹
        pass

    ctypedef fused my_type: # æ³›å‹
        int
        double
        long long

    # ç±»çš„å®šä¹‰ï¼Œæ³¨æ„ä½¿ç”¨ __cinit__
    cdef class A:
        cdef int a
        def __cinit__(self):
            self.a = 1

    &amp;lt;void*&amp;gt;value # ç±»å‹è½¬æ¢æˆæŒ‡é’ˆ

    # å®šä¹‰ c å‡½æ•°ï¼Œå¼‚å¸¸æ—¶è¿”å› -1
    cdef int func(int x) execpt? -1:
        pass
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org2eb49a1" class="outline-4"&gt;
&lt;h4 id="org2eb49a1"&gt;æ–‡ä»¶æ³¨è§£&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org2eb49a1"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;# distutils: language=c++&lt;/code&gt; ä½¿ç”¨ &lt;code&gt;c++&lt;/code&gt; ç¼–è¯‘&lt;/li&gt;
&lt;li&gt;&lt;code&gt;# distutils: sources = c-algorithms/src/queue.c&lt;/code&gt; æŒ‡å®šé™æ€é“¾æ¥çš„æºæ–‡ä»¶&lt;/li&gt;
&lt;li&gt;&lt;code&gt;# distutils: include_dirs = c-algorithms/src/&lt;/code&gt; æŒ‡å®šå¤´æ–‡ä»¶ç›®å½•&lt;/li&gt;
&lt;li&gt;&lt;code&gt;# distutils: extra_compile_args=-fopenmp&lt;/code&gt; æŒ‡å®šç¼–è¯‘å™¨å‚æ•°&lt;/li&gt;
&lt;li&gt;&lt;code&gt;# distutils: extra_link_args=-fopenmp&lt;/code&gt; æŒ‡å®šé“¾æ¥å‚æ•°&lt;/li&gt;
&lt;li&gt;&lt;code&gt;# cython: infer_types=True&lt;/code&gt; è‡ªåŠ¨æ¨æ–­ç±»å‹ï¼Œåªä½œç”¨äºä¸€çº§ç¼©è¿›çš„å˜é‡&lt;/li&gt;
&lt;li&gt;&lt;code&gt;# cython: profile=True&lt;/code&gt; å¼€å¯ profile&lt;/li&gt;
&lt;li&gt;&lt;code&gt;# cython: linetrace=True&lt;/code&gt; å¼€å¯ profile è¡Œè¿½è¸ª&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org63e2dc9" class="outline-4"&gt;
&lt;h4 id="org63e2dc9"&gt;å‡½æ•°æ³¨è§£&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org63e2dc9"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;@cython.boundscheck(False)&lt;/code&gt; å…³é—­æ•°ç»„è¾¹ç•Œæ£€æŸ¥&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@cython.wraparound(False)&lt;/code&gt; å…³é—­è´ŸæŒ‡æ ‡&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org66be532" class="outline-3"&gt;
&lt;h3 id="org66be532"&gt;ç¼–è¯‘&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org66be532"&gt;
&lt;/div&gt;
&lt;div id="outline-container-org337ca19" class="outline-4"&gt;
&lt;h4 id="org337ca19"&gt;åŸºæœ¬ç»“æ„&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org337ca19"&gt;
&lt;p&gt;
&lt;code&gt;setup.py&lt;/code&gt;
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;setuptools&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;setup&lt;/span&gt;
    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;Cython.Build&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;cythonize&lt;/span&gt;

    &lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;ext_modules&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cythonize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"helloworld.pyx"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
&lt;code&gt;helloworld.pyx&lt;/code&gt;
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"Hello World"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
æ‰§è¡Œå‘½ä»¤
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    python setup.py build_ext --inplace
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
è¿™ç¼–è¯‘å¾—åˆ°çš„ &lt;code&gt;helloworld.so&lt;/code&gt; æˆ– &lt;code&gt;helloworld.pyd&lt;/code&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org5232617" class="outline-4"&gt;
&lt;h4 id="org5232617"&gt;åŠ¨æ€é“¾æ¥&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org5232617"&gt;
&lt;p&gt;
&lt;a href="https://cython.readthedocs.io/en/latest/src/tutorial/external.html#dynamic-linking"&gt;å‚è€ƒ&lt;/a&gt;
&lt;/p&gt;

&lt;p&gt;
éœ€è¦æŒ‡æ˜ &lt;code&gt;libraries&lt;/code&gt; å‚æ•°
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;setuptools&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Extension&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;setup&lt;/span&gt;
    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;Cython.Build&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;cythonize&lt;/span&gt;

    &lt;span class="n"&gt;ext_modules&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
        &lt;span class="n"&gt;Extension&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"demo"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                  &lt;span class="n"&gt;sources&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"demo.pyx"&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
                  &lt;span class="n"&gt;libraries&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"m"&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;  &lt;span class="c1"&gt;# Unix-like specific&lt;/span&gt;
                  &lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;]&lt;/span&gt;

    &lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"Demos"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
          &lt;span class="n"&gt;ext_modules&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;cythonize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ext_modules&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgda74b68" class="outline-4"&gt;
&lt;h4 id="orgda74b68"&gt;é™æ€é“¾æ¥&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgda74b68"&gt;
&lt;p&gt;
ä½¿ç”¨æ³¨è§£ 
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    # distutils: sources = c-algorithms/src/queue.c
    # distutils: include_dirs = c-algorithms/src/

    pass
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgedb5a15" class="outline-3"&gt;
&lt;h3 id="orgedb5a15"&gt;ä½¿ç”¨ c åº“&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgedb5a15"&gt;
&lt;/div&gt;
&lt;div id="outline-container-org5bb8c27" class="outline-4"&gt;
&lt;h4 id="org5bb8c27"&gt;å¤–éƒ¨å£°æ˜&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org5bb8c27"&gt;
&lt;p&gt;
ä½¿ç”¨å¤´æ–‡ä»¶, å¤–éƒ¨å£°æ˜å¯ä»¥æ”¾åœ¨ &lt;code&gt;.pyd&lt;/code&gt; æ–‡ä»¶ä¸­
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    cdef extern from "math.h":
        double sin(double x)
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org259ace8" class="outline-4"&gt;
&lt;h4 id="org259ace8"&gt;å¼‚å¸¸å¤„ç†&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org259ace8"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;&lt;code&gt;except? -1&lt;/code&gt; è¯­æ³•è¡¨ç¤ºå½“å‘ç”Ÿä»»ä½•é”™è¯¯æ—¶ï¼Œè¿”å› &lt;code&gt;-1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;execpt *&lt;/code&gt; è¡¨ç¤ºè¿”å›æ—¶è°ƒç”¨ &lt;code&gt;PyErr_Occurred()&lt;/code&gt; ï¼Œå½“å‡½æ•°è¿”å› &lt;code&gt;void&lt;/code&gt; å¹¶ä¸”éœ€è¦ä¼ é€’é”™è¯¯æ—¶ä½¿ç”¨è¿™ä¸ª&lt;/li&gt;
&lt;/ol&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    cdef int pop(self) except? -1:
        if cqueue.queue_is_empty(self._c_queue):
            raise IndexError("Queue is empty")
        return &amp;lt;Py_ssize_t&amp;gt;cqueue.queue_pop_head(self._c_queue)

    cdef int spam() except *:
        ...
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org33c08a5" class="outline-3"&gt;
&lt;h3 id="org33c08a5"&gt;ä½¿ç”¨ numpy&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org33c08a5"&gt;
&lt;p&gt;
numpy çš„ &lt;code&gt;ndarray&lt;/code&gt; åœ¨ cython ä¸­ç”¨åš typed memoryview
&lt;/p&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgc0028ce" class="outline-4"&gt;
&lt;h4 id="orgc0028ce"&gt;åŸºæœ¬ä¾‹å­&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgc0028ce"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    import numpy as np

    DTYPE = np.intc


    cdef int clip(int a, int min_value, int max_value):
        return min(max(a, min_value), max_value)


    def compute(int[:, :] array_1, int[:, :] array_2, int a, int b, int c):

        cdef Py_ssize_t x_max = array_1.shape[0]
        cdef Py_ssize_t y_max = array_1.shape[1]
        assert tuple(array_1.shape) == tuple(array_2.shape)

        result = np.zeros((x_max, y_max), dtype=DTYPE)
        cdef int[:, :] result_view = result

        cdef int tmp
        cdef Py_ssize_t x, y

        for x in range(x_max):
            for y in range(y_max):

                tmp = clip(array_1[x, y], 2, 10)
                tmp = tmp * a + array_2[x, y] * b
                result_view[x, y] = tmp + c

        return result
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org3bba035" class="outline-3"&gt;
&lt;h3 id="org3bba035"&gt;å¹¶è¡Œ&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org3bba035"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;prange&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;
ä½¿ç”¨ &lt;code&gt;nogil&lt;/code&gt;
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;      from cython.parallel import prange
      cdef int func(int x) nogil:
          cdef int i
          cdef int y
          for i in prange(x, nogil=True):
              y += i 
          return y
&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>cython</category><category>python</category><guid>https://chimez.github.io/posts/cython/</guid><pubDate>Thu, 05 Aug 2021 12:47:25 GMT</pubDate></item><item><title>joblib</title><link>https://chimez.github.io/posts/joblib/</link><dc:creator>chimez</dc:creator><description>&lt;div id="outline-container-org723c550" class="outline-2"&gt;
&lt;h2 id="org723c550"&gt;joblib: ç®€å•çš„å¹¶è¡Œ&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org723c550"&gt;
&lt;p&gt;
&lt;a href="https://joblib.readthedocs.io/"&gt;joblib&lt;/a&gt;æ˜¯ä¸€ä¸ªæ˜“ç”¨çš„ï¼Œæ— ä¾èµ–çš„ python åº“ï¼Œä¸»è¦ç”¨æ¥å¾ˆæ–¹ä¾¿çš„åšå¹¶è¡Œã€‚
&lt;/p&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgf16dc80" class="outline-3"&gt;
&lt;h3 id="orgf16dc80"&gt;ç®€å•çš„å¹¶è¡Œ&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgf16dc80"&gt;
&lt;p&gt;
å¯¹ä¸€ä¸ª &lt;code&gt;for&lt;/code&gt; å¾ªç¯å¹¶è¡ŒåŒ–ï¼ŒåŸºæœ¬ä¸Šåªéœ€è¦ä¸¤ä¸ªå‡½æ•° &lt;code&gt;Parallel&lt;/code&gt; å’Œ &lt;code&gt;delayed&lt;/code&gt; ï¼Œç”¨ &lt;code&gt;delayed&lt;/code&gt; åŒ…è£¹è¦å¹¶è¡Œçš„å‡½æ•°ï¼Œå¹¶ç”¨åˆ—è¡¨æ¨å¯¼å¼ç”Ÿæˆæ‰€æœ‰å‚æ•°ï¼Œå†æŠŠè¿™äº›ä¸œè¥¿æ‰”ç»™ &lt;code&gt;Parallel&lt;/code&gt; å‡½æ•°ï¼Œè¿”å›çš„å°±æ˜¯å¹¶è¡Œåçš„ç»“æœäº†ã€‚
&lt;/p&gt;

&lt;p&gt;
åŸºæœ¬ä¸Šç›¸å½“äº &lt;code&gt;multiprocessing.Pool.map&lt;/code&gt;
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;   &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;joblib&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Parallel&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;delayed&lt;/span&gt;
   &lt;span class="n"&gt;Parallel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n_jobs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;delayed&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sqrt&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
&lt;code&gt;Parallel&lt;/code&gt; å‡½æ•°çš„å‚æ•°ç”¨æ¥æŒ‡å®šå¹¶è¡Œçš„åç«¯ &lt;code&gt;backend&lt;/code&gt; ã€æ¯æ‰¹æ¬¡æ‰§è¡Œçš„ä»»åŠ¡æ•°ã€å¹¶è¡Œçº¿ç¨‹æ•°ç­‰ç­‰
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;


&lt;div id="outline-container-orgf2e4112" class="outline-2"&gt;
&lt;h2 id="orgf2e4112"&gt;Tips&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgf2e4112"&gt;
&lt;/div&gt;
&lt;div id="outline-container-org672bb76" class="outline-3"&gt;
&lt;h3 id="org672bb76"&gt;è¯»å–æ—¶é¿å…é”&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org672bb76"&gt;
&lt;p&gt;
ä½¿ç”¨ &lt;code&gt;multiprocessing.shared_memory&lt;/code&gt; åˆ›å»ºå…±äº«å†…å­˜ï¼Œå¹¶æŠŠå†…å­˜åœ°å€åä½œä¸ºå‚æ•°ä¼ é€’
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>parallel</category><category>python</category><guid>https://chimez.github.io/posts/joblib/</guid><pubDate>Sun, 06 Jun 2021 05:34:10 GMT</pubDate></item><item><title>Extending Python with C</title><link>https://chimez.github.io/posts/extending-python-with-c/</link><dc:creator>chimez</dc:creator><description>&lt;div id="outline-container-orgecd5fd0" class="outline-2"&gt;
&lt;h2 id="orgecd5fd0"&gt;ç”¨ C æ‰©å±• Python&lt;/h2&gt;
&lt;/div&gt;</description><category>C</category><category>ffi</category><category>python</category><guid>https://chimez.github.io/posts/extending-python-with-c/</guid><pubDate>Mon, 03 May 2021 11:16:46 GMT</pubDate></item><item><title>Performant Python</title><link>https://chimez.github.io/posts/performant-python/</link><dc:creator>chimez</dc:creator><description>&lt;div id="outline-container-org0586f5c" class="outline-2"&gt;
&lt;h2 id="org0586f5c"&gt;Python æ€§èƒ½&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org0586f5c"&gt;
&lt;/div&gt;
&lt;div id="outline-container-org24b98a4" class="outline-3"&gt;
&lt;h3 id="org24b98a4"&gt;è®¡ç®—æœºç»“æ„&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org24b98a4"&gt;
&lt;p&gt;
ç®€å•æ¥è¯´ï¼Œè®¡ç®—æœºç”±è®¡ç®—å•å…ƒã€å‚¨å­˜å•å…ƒå’ŒäºŒè€…ä¹‹é—´çš„é€šä¿¡æ„æˆã€‚
&lt;/p&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgb31bbe7" class="outline-4"&gt;
&lt;h4 id="orgb31bbe7"&gt;è®¡ç®—å•å…ƒ&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgb31bbe7"&gt;
&lt;p&gt;
è®¡ç®—å•å…ƒä¸€èˆ¬æ˜¯ CPU å’Œ GPU ç­‰ã€‚
&lt;/p&gt;

&lt;p&gt;
è®¡ç®—å•å…ƒé‡è¦çš„ä¸¤ä¸ªå‚æ•°æ˜¯
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;æ¯å‘¨æœŸæŒ‡ä»¤ (instructions per cycle, IPC): æ¯ä¸ªæ—¶é’Ÿå‘¨æœŸæ‰§è¡Œçš„æŒ‡ä»¤æ•°&lt;/li&gt;
&lt;li&gt;æ—¶é’Ÿé€Ÿåº¦ï¼šæ¯ç§’çš„æ—¶é’Ÿå‘¨æœŸ&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
å¦‚æœæé«˜æ—¶é’Ÿé€Ÿåº¦äº†ï¼Œå½“ç„¶è¿è¡Œé€Ÿåº¦ä¼šå˜å¿«ã€‚å¦ä¸€ç§æ–¹æ³•æ˜¯å¢åŠ æ¯ä¸ªæŒ‡ä»¤çš„è®¡ç®—é‡ï¼Œé€šè¿‡å‘é‡åŒ–çš„æ–¹å¼ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªæŒ‡ä»¤ä¸­åŒæ—¶å¤„ç†å¤šä¸ªæ•°æ®ï¼Œå³ SIMD(single instruction multiple data).
&lt;/p&gt;

&lt;p&gt;
ç”±äºç‰©ç†å’ŒæŠ€æœ¯é™åˆ¶ï¼Œæ—¶é’Ÿé€Ÿåº¦çš„å¢åŠ åŸºæœ¬åœæ­¢äº†ï¼Œæ‰€ä»¥å¢åŠ åŒä¸€æ—¶é—´å†…è¿ç®—é‡çš„æ–¹æ³•å°±æ˜¯å¢åŠ æ›´å¤šçš„ CPUï¼Œ å³å¹¶è¡ŒåŒ–ã€‚
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org32bded2" class="outline-4"&gt;
&lt;h4 id="org32bded2"&gt;Amdahl'a law&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org32bded2"&gt;
&lt;p&gt;
ç»éªŒå®šå¾‹ï¼šå¹¶è¡Œç¨‹åºçš„åŠ é€Ÿä¸Šé™å–å†³äºä¸èƒ½å¹¶è¡ŒåŒ–çš„æœ€å°å•å…ƒã€‚
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org769b817" class="outline-4"&gt;
&lt;h4 id="org769b817"&gt;å­˜å‚¨å•å…ƒ&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org769b817"&gt;
&lt;p&gt;
å­˜å‚¨å•å…ƒåŒ…æ‹¬ï¼šæœºæ¢°ç¡¬ç›˜ã€å›ºæ€ç¡¬ç›˜ã€RAMã€L1/L2 ç­‰ã€‚ä¸»è¦çš„åŒºåˆ«å°±æ˜¯é€Ÿåº¦ã€‚ä¸€èˆ¬æ¥è¯´é€Ÿåº¦è¶Šå¿«å®¹é‡è¶Šå°ã€‚
&lt;/p&gt;

&lt;p&gt;
å­˜å‚¨å•å…ƒé€Ÿåº¦é€šå¸¸æ¯”è®¡ç®—å•å…ƒæ…¢ï¼Œæ‰€ä»¥ä¸»è¦çš„ä¼˜åŒ–æ‰‹æ®µå°±æ˜¯å¼‚æ­¥ I/O å’Œé¢„å…ˆç¼“å­˜ï¼Œä¿è¯è®¡ç®—è®¾å¤‡è¿›è¡Œè®¡ç®—çš„æ—¶å€™æ•°æ®å·²ç»å‡†å¤‡å¥½äº†ã€‚
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org33f794e" class="outline-4"&gt;
&lt;h4 id="org33f794e"&gt;æ€»çº¿&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org33f794e"&gt;
&lt;p&gt;
è®¡ç®—å•å…ƒå’Œå­˜å‚¨å•å…ƒé€šè¿‡æ€»çº¿è¿æ¥ã€‚
æ€»çº¿æœ€é‡è¦çš„å‚æ•°æ˜¯æ€»çº¿å®½åº¦å’Œæ€»çº¿é¢‘ç‡ã€‚
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org6d4c803" class="outline-2"&gt;
&lt;h2 id="org6d4c803"&gt;ä»æºç å®‰è£… python&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org6d4c803"&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;openssl é€šè¿‡ &lt;code&gt;--with-openssl&lt;/code&gt; æŒ‡å®š&lt;/li&gt;
&lt;li&gt;sqlite é€šè¿‡ä¿®æ”¹ &lt;code&gt;setup.py&lt;/code&gt; ä¸­çš„ &lt;code&gt;sqlite_inc_paths&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;
libffi é€šè¿‡ &lt;code&gt;CPPFLAGS&lt;/code&gt;, &lt;code&gt;LDFLAGS&lt;/code&gt; æŒ‡å®š
&lt;/p&gt;

&lt;p&gt;
å‚è€ƒç¼–è¯‘é€‰é¡¹
&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  ./configure --prefix=$HOME/app/python --enable-optimizations --with-openssl=$HOME/app/openssl --enable-shared PKG_CONFIG_LIBDIR=$PKG_CONFIG_PATH LIBFFI_INCLUDEDIR=/vol7/home/zhongpg/app/libffi/include --with-system-ffi=/vol7/home/zhongpg/app/libffi/lib64 CPPFLAGS="-I /vol7/home/zhongpg/app/libffi/include" LDFLAGS="-L/vol7/home/zhongpg/app/libffi/lib64"
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org12b94a1" class="outline-2"&gt;
&lt;h2 id="org12b94a1"&gt;ä»æºç å®‰è£… numpy, scipy&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org12b94a1"&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;numpy ä¾èµ–
&lt;ul class="org-ul"&gt;
&lt;li&gt;cython: &lt;code&gt;pip install cython&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;scipy ä¾èµ–
&lt;ul class="org-ul"&gt;
&lt;li&gt;pybind11: &lt;code&gt;pip install "pybind11[global]"&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;pythran: &lt;code&gt;pip install pythran&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œ &lt;code&gt;git submodule update --init&lt;/code&gt; æ¥è‡ªåŠ¨ä¸‹è½½ä¸€äº›åŒ…&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;
è®¾ç½® &lt;code&gt;site.cfg&lt;/code&gt;
&lt;/p&gt;

&lt;p&gt;
æ‰§è¡Œå®‰è£…
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  python3 setup.py build -j 10 install
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>python</category><guid>https://chimez.github.io/posts/performant-python/</guid><pubDate>Fri, 23 Apr 2021 14:03:52 GMT</pubDate></item><item><title>PyTables</title><link>https://chimez.github.io/posts/pytables/</link><dc:creator>chimez</dc:creator><description>&lt;div id="outline-container-orgdd366cb" class="outline-2"&gt;
&lt;h2 id="orgdd366cb"&gt;PyTables: åˆ†å±‚æ•°æ®é›†&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgdd366cb"&gt;
&lt;p&gt;
&lt;a href="https://www.pytables.org"&gt;PyTables&lt;/a&gt; æ˜¯åŸºäº HDF5 æ ¼å¼æ„å»ºçš„æ•°æ®é›†ï¼Œæ¯” pandas æ›´åº•å±‚ï¼Œæ¯” h5py æ›´é«˜å±‚ã€‚é€‚åˆç”¨åœ¨å­˜å‚¨æ¯” csv è¡¨æ ¼æ›´å¤æ‚æ›´å¤§çš„æ•°æ®ï¼ŒåŒæ—¶åˆä¸æƒ³è‡ªå·±å®ç°ä¸€äº›åŸºæœ¬çš„æ•°æ®æ“ä½œçš„æƒ…å†µä¸­ï¼Œå¹¶ä¸”ç»è¿‡ç®€å•çš„å¤„ç†å°±èƒ½ç”¨ pandas è¿›è¡Œè¿›ä¸€æ­¥æ•°æ®åˆ†æã€‚
&lt;/p&gt;
&lt;/div&gt;


&lt;div id="outline-container-org9223974" class="outline-3"&gt;
&lt;h3 id="org9223974"&gt;å®‰è£…&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org9223974"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;   # ä½¿ç”¨ conda
   conda install pytables
   # æˆ–è€… pip
   python3 -m pip install tables
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
æµ‹è¯•
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;   &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;tables&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;tb&lt;/span&gt;

   &lt;span class="n"&gt;tb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org51705e0" class="outline-3"&gt;
&lt;h3 id="org51705e0"&gt;åŸºæœ¬ä½¿ç”¨&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org51705e0"&gt;
&lt;p&gt;
pytables çš„åŸºæœ¬é€»è¾‘æ˜¯
&lt;/p&gt;
&lt;/div&gt;

&lt;div id="outline-container-org2764a6f" class="outline-4"&gt;
&lt;h4 id="org2764a6f"&gt;åˆ›å»ºä¸€ä¸ª HDF5 æ–‡ä»¶&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org2764a6f"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;open_file&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"filename.h5"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mode&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"w"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"file title"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;filters&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;tb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Filters&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;complevel&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

    &lt;span class="c1"&gt;# åˆ«å¿˜äº†è¿˜è¦å…³é—­å®ƒ&lt;/span&gt;
    &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgbe4861e" class="outline-4"&gt;
&lt;h4 id="orgbe4861e"&gt;åœ¨æ–‡ä»¶ä¸­åˆ›å»ºä»»æ„å±‚çš„æ•°æ®é›†&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgbe4861e"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="n"&gt;g&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;create_group&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"/parent/group"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"group_name"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"group title"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org68efbd9" class="outline-4"&gt;
&lt;h4 id="org68efbd9"&gt;åœ¨æ•°æ®é›†ä¸­åˆ›å»ºè‹¥å¹²ä¸ªæ•°æ®è¡¨&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org68efbd9"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="c1"&gt;# éœ€è¦åˆ›å»ºå¯¹æ•°æ®çš„æè¿°&lt;/span&gt;
    &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;data_description&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;IsDescription&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;StringCol&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;idn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Int64Col&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;sub_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;IsDescription&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;StringCol&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;id2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Float64Col&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;shape&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

    &lt;span class="c1"&gt;# ç„¶ååˆ›å»ºç©ºçš„æ•°æ®è¡¨       &lt;/span&gt;
    &lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;create_table&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"table_name"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data_description&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;# åœ¨é‡Œé¢å¾ªç¯æ·»åŠ è®°å½•&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"name"&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"a"&lt;/span&gt;
        &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"idn"&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;
        &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"sub_data"&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;'asd_&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s1"&gt;'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;random&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rand&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
        &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="c1"&gt;# æœ€ååˆ·æ–°ä¸€ä¸‹ç¼“å­˜ï¼Œç¡®ä¿æ•°æ®éƒ½å†™å…¥åˆ°ç£ç›˜&lt;/span&gt;
    &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;flush&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;


&lt;div id="outline-container-org54d2bee" class="outline-2"&gt;
&lt;h2 id="org54d2bee"&gt;é‡åˆ°çš„é—®é¢˜&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org54d2bee"&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgfac156a" class="outline-3"&gt;
&lt;h3 id="orgfac156a"&gt;åœ¨ä¸æ”¯æŒ &lt;code&gt;flock&lt;/code&gt; çš„é›†ç¾¤ä¸Šè¿è¡Œ&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgfac156a"&gt;
&lt;p&gt;
éœ€è¦è®¾ç½®ç¯å¢ƒå˜é‡
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;   export HDF5_USE_FILE_LOCKING=FALSE
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>python</category><guid>https://chimez.github.io/posts/pytables/</guid><pubDate>Mon, 01 Mar 2021 03:23:19 GMT</pubDate></item><item><title>h5py</title><link>https://chimez.github.io/posts/h5py/</link><dc:creator>chimez</dc:creator><description>&lt;div id="outline-container-org5f67598" class="outline-2"&gt;
&lt;h2 id="org5f67598"&gt;h5py: å‚¨å­˜æ•°æ®&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org5f67598"&gt;
&lt;p&gt;
&lt;a href="https://www.h5py.org/"&gt;h5py&lt;/a&gt; æ˜¯ HDF5 åº“çš„ python å°è£…ï¼ŒåŸºæœ¬æä¾›äº†æ‰€æœ‰å¯¹åº”çš„ C APIï¼Œå› æ­¤é€‚åˆç”¨åœ¨ç®€å•å¹¶åº•å±‚çš„åº”ç”¨ä¸­ï¼Œç‰¹åˆ«é€‚åˆå¯¹ HDF5 æ–‡ä»¶æœ‰å®šåˆ¶çš„åº”ç”¨ä¸­ã€‚
&lt;/p&gt;
&lt;/div&gt;

&lt;div id="outline-container-org6320573" class="outline-3"&gt;
&lt;h3 id="org6320573"&gt;å­˜&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org6320573"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;   &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;h5py&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;File&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'data.h5'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'w'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;hf&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
       &lt;span class="n"&gt;hf&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;create_dataset&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"mat1"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;mat1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;compression&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"gzip"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
       &lt;span class="n"&gt;hf&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;create_dataset&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"mat2"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;mat2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;compression&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"gzip"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

       &lt;span class="n"&gt;g&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;hf&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;create_group&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"index"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
       &lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;create_dataset&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"mat1"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;mat1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;compression&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"gzip"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;


&lt;div id="outline-container-org87a81e2" class="outline-3"&gt;
&lt;h3 id="org87a81e2"&gt;å–&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org87a81e2"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;   &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;h5py&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;File&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'data.h5'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'r'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;hf&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
       &lt;span class="n"&gt;mat1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'mat1'&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
       &lt;span class="n"&gt;mat2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'mat2'&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

       &lt;span class="n"&gt;g&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;hf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'index'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
       &lt;span class="n"&gt;g_mat1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'mat1'&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>python</category><guid>https://chimez.github.io/posts/h5py/</guid><pubDate>Sun, 28 Feb 2021 14:11:33 GMT</pubDate></item></channel></rss>
<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Blog of chimez">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>chimez's blog</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="rss.xml">
<link rel="canonical" href="https://chimez.github.io/">
<link rel="next" href="index-2.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]--><link rel="prefetch" href="posts/bose-hubbard-model-mean-field-theory/" type="text/html">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Header and menu bar -->
<div class="container">
      <header class="blog-header py-3"><div class="row nbb-header align-items-center">
          <div class="col-md-3 col-xs-2 col-sm-2" style="width: auto;">
            <button class="navbar-toggler navbar-light bg-light nbb-navbar-toggler" type="button" data-toggle="collapse" data-target=".bs-nav-collapsible" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse bs-nav-collapsible bootblog4-search-form-holder">
                
            </div>
        </div>
          <div class="col-md-6 col-xs-10 col-sm-10 bootblog4-brand" style="width: auto;">
            <a class="navbar-brand blog-header-logo text-dark" href=".">

            <span id="blog-title">chimez's blog</span>
        </a>
          </div>
            <div class="col-md-3 justify-content-end align-items-center bs-nav-collapsible collapse flex-collapse bootblog4-right-nav">
            <nav class="navbar navbar-light bg-white"><ul class="navbar-nav bootblog4-right-nav"></ul></nav>
</div>
    </div>
</header><nav class="navbar navbar-expand-md navbar-light bg-white static-top"><div class="collapse navbar-collapse bs-nav-collapsible" id="bs-navbar">
            <ul class="navbar-nav nav-fill d-flex w-100">
<li class="nav-item">
<a href="archive.html" class="nav-link">Archive</a>
                </li>
<li class="nav-item">
<a href="categories/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="rss.xml" class="nav-link">RSS feed</a>

                
            </li>
</ul>
</div>
<!-- /.navbar-collapse -->
</nav>
</div>

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
    
        

    
        
    <div class="postindex">
            <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/bose-hubbard-model-mean-field-theory/" class="u-url">Bose-Hubbard model mean field theory</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        chimez
                    </span></p>
            <p class="dateline">
            <a href="posts/bose-hubbard-model-mean-field-theory/" rel="bookmark">
            <time class="published dt-published" datetime="2021-04-25T01:20:52+08:00" itemprop="datePublished" title="2021-04-25 01:20">2021-04-25 01:20</time></a>
            </p>
                </div>
            </header><div class="e-content entry-content">
                    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Bose-Hubbard-模型的平均场解">Bose-Hubbard 模型的平均场解<a class="anchor-link" href="posts/bose-hubbard-model-mean-field-theory/#Bose-Hubbard-%E6%A8%A1%E5%9E%8B%E7%9A%84%E5%B9%B3%E5%9D%87%E5%9C%BA%E8%A7%A3">¶</a>
</h2>
<h4 id="Bose-Hubbard-模型-{#bose-hubbard-模型}">Bose-Hubbard 模型 {#bose-hubbard-模型}<a class="anchor-link" href="posts/bose-hubbard-model-mean-field-theory/#Bose-Hubbard-%E6%A8%A1%E5%9E%8B-%7B#bose-hubbard-%E6%A8%A1%E5%9E%8B%7D">¶</a>
</h4>
<p><a href="https://en.wikipedia.org/wiki/Bose%E2%80%93Hubbard%5Fmodel">Bose-Hubbard 模型</a> 是一维的无自旋玻色子格点模型。</p>
<p>哈密顿量为</p>
$$
H = -t \sum\_{\langle i,j \rangle} b^{\dagger}\_{i}b\_{j} + \frac{U}{2} \sum\_{i} n\_{i} (n\_{i} -1) - \mu \sum\_{i} n\_{i}
$$<p>其中 $-t$ 是最近邻跃迁强度， $U$ 是相互作用强度， $\mu$ 是化学势。</p>
<h4 id="平均场哈密顿量">平均场哈密顿量<a class="anchor-link" href="posts/bose-hubbard-model-mean-field-theory/#%E5%B9%B3%E5%9D%87%E5%9C%BA%E5%93%88%E5%AF%86%E9%A1%BF%E9%87%8F">¶</a>
</h4>
<p>平均场近似为
$$
a^{\dagger}\_{i} a\_{j} = \langle a^{\dagger}\_{i} \rangle a\_{j} + a^{\dagger}\_{i} \langle a\_{j} \rangle - \langle a^{\dagger}\_{i} \rangle \langle a\_{j} \rangle
$$</p>
<p>代入就得到单点平均场哈密顿量
$$
H\_{i}^{\mathrm{MF}} = \frac{U}{2} n\_{i} (n\_{i} -1) - \mu n\_{i} - \psi (a\_{i} + a\_{i}^{\dagger}) + |\psi|
$$</p>
<p>其中 $\psi = \langle a^{\dagger}\_{i} \rangle = \langle a\_{i} \rangle $ 是超流序参量。</p>
<h4 id="求解">求解<a class="anchor-link" href="posts/bose-hubbard-model-mean-field-theory/#%E6%B1%82%E8%A7%A3">¶</a>
</h4>
<p>由于是玻色模型，所以需要先确定合适的截断尺寸。步骤就是先计算小的截断尺寸的基态能量，再逐渐加大截断数直到收敛。</p>
<p>确定截断之后就把 $\psi$ 做自变量，寻找能使基态能量最小的 $\psi$ ，迭代自洽收敛的效果很好，直接做优化则很难找到全局最优。</p>
<p>得到不同参数的 $\psi$ 再计算 $\langle n \rangle$ 两个对比，就能看到超流相和 Mott 绝缘体相之间的变化，以及化学势导致的不同 Mott 平台。</p>
<h4 id="参考文献">参考文献<a class="anchor-link" href="posts/bose-hubbard-model-mean-field-theory/#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE">¶</a>
</h4>
<ol>
<li>首先给出 Bose-Hubbard 模型的平均场解的是 (<a href="posts/bose-hubbard-model-mean-field-theory/#org02ecd18">Sheshadri et al. 1993</a>) .
Sheshadri, K., H. R. Krishnamurthy, R. Pandit, and T. V. Ramakrishnan. 1993. “Superfluid and Insulating Phases in an Interacting-Boson Model: Mean-Field Theory and the RPA.” Europhysics Letters (EPL) 22 (4). IOP Publishing:257–63.</li>
</ol>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">scipy.optimize</span> <span class="k">as</span> <span class="nn">sop</span>
<span class="kn">import</span> <span class="nn">scipy.sparse</span> <span class="k">as</span> <span class="nn">sp</span>
<span class="kn">import</span> <span class="nn">scipy.sparse.linalg</span> <span class="k">as</span> <span class="nn">slin</span>
<span class="kn">from</span> <span class="nn">tqdm.notebook</span> <span class="kn">import</span> <span class="n">tqdm</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">dag</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">conj</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">annihilation</span><span class="p">(</span><span class="n">M</span><span class="p">,</span> <span class="n">tp</span><span class="o">=</span><span class="s2">"dense"</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">tp</span> <span class="o">==</span> <span class="s2">"dense"</span><span class="p">:</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">M</span><span class="p">)),</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">tp</span> <span class="o">==</span> <span class="s2">"sparse"</span><span class="p">:</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">dia_matrix</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)),</span> <span class="mi">1</span><span class="p">),</span> <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">M</span><span class="p">,</span> <span class="n">M</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">a</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">make_Hi</span><span class="p">(</span><span class="n">U</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">psi</span><span class="p">,</span> <span class="n">M</span><span class="p">,</span> <span class="n">tp</span><span class="p">):</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">annihilation</span><span class="p">(</span><span class="n">M</span><span class="p">,</span> <span class="n">tp</span><span class="p">)</span>
    <span class="n">ad</span> <span class="o">=</span> <span class="n">dag</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="n">n</span> <span class="o">=</span> <span class="n">ad</span> <span class="o">@</span> <span class="n">a</span>
    <span class="k">if</span> <span class="n">tp</span> <span class="o">==</span> <span class="s2">"dense"</span><span class="p">:</span>
        <span class="n">mI</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">tp</span> <span class="o">==</span> <span class="s2">"sparse"</span><span class="p">:</span>
        <span class="n">mI</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>
    <span class="n">Hi</span> <span class="o">=</span> <span class="n">U</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">n</span> <span class="o">@</span> <span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="n">mI</span><span class="p">)</span> <span class="o">-</span> <span class="n">mu</span> <span class="o">*</span> <span class="n">n</span> <span class="o">+</span> <span class="n">psi</span> <span class="o">*</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">ad</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">psi</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">mI</span>
    <span class="k">return</span> <span class="n">Hi</span>


<span class="k">def</span> <span class="nf">eig_Hi</span><span class="p">(</span><span class="n">Hi</span><span class="p">,</span> <span class="n">tp</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">tp</span> <span class="o">==</span> <span class="s2">"dense"</span><span class="p">:</span>
        <span class="n">eigvals</span><span class="p">,</span> <span class="n">eigvecs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">eigh</span><span class="p">(</span><span class="n">Hi</span><span class="p">)</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">eigvals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">eigvecs</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">tp</span> <span class="o">==</span> <span class="s2">"sparse"</span><span class="p">:</span>
        <span class="n">el</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">slin</span><span class="o">.</span><span class="n">eigsh</span><span class="p">(</span><span class="n">Hi</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">"SA"</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">el</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">e</span><span class="p">,</span> <span class="n">v</span>


<span class="k">def</span> <span class="nf">calc_psi</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">tp</span><span class="p">):</span>
    <span class="n">M</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">annihilation</span><span class="p">(</span><span class="n">M</span><span class="p">,</span> <span class="n">tp</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">dag</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">@</span> <span class="n">a</span> <span class="o">@</span> <span class="n">v</span><span class="p">)[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">find_M</span><span class="p">(</span><span class="n">U</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">psi</span><span class="p">,</span> <span class="n">tp</span><span class="p">):</span>
    <span class="n">e_old</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">M</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">50</span><span class="p">):</span>
        <span class="n">Hi</span> <span class="o">=</span> <span class="n">make_Hi</span><span class="p">(</span><span class="n">U</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">psi</span><span class="p">,</span> <span class="n">M</span><span class="p">,</span> <span class="n">tp</span><span class="p">)</span>
        <span class="n">e</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">eig_Hi</span><span class="p">(</span><span class="n">Hi</span><span class="p">,</span> <span class="n">tp</span><span class="p">)</span>
        <span class="c1"># psi=calc_psi(v,tp)</span>
        <span class="c1"># print(M,e)</span>
        <span class="k">if</span> <span class="n">e_old</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">e</span> <span class="o">-</span> <span class="n">e_old</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-6</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="n">e_old</span> <span class="o">=</span> <span class="n">e</span>
    <span class="k">return</span> <span class="n">M</span>


<span class="k">def</span> <span class="nf">find_psi</span><span class="p">(</span><span class="n">U</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">M</span><span class="p">,</span> <span class="n">tp</span><span class="p">):</span>
    <span class="n">psi</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()</span>
    <span class="n">e_old</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">30</span><span class="p">):</span>

        <span class="n">Hi</span> <span class="o">=</span> <span class="n">make_Hi</span><span class="p">(</span><span class="n">U</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">psi</span><span class="p">,</span> <span class="n">M</span><span class="p">,</span> <span class="n">tp</span><span class="p">)</span>
        <span class="n">e</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">eig_Hi</span><span class="p">(</span><span class="n">Hi</span><span class="p">,</span> <span class="n">tp</span><span class="p">)</span>
        <span class="n">psi</span> <span class="o">=</span> <span class="n">calc_psi</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">tp</span><span class="p">)</span>
        <span class="c1"># print(e,e_old)</span>
        <span class="k">if</span> <span class="n">e_old</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">e_old</span> <span class="o">=</span> <span class="n">e</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">e</span> <span class="o">-</span> <span class="n">e_old</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-6</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">e_old</span> <span class="o">=</span> <span class="n">e</span>

    <span class="k">return</span> <span class="n">e</span><span class="p">,</span> <span class="n">psi</span><span class="p">,</span> <span class="n">v</span>


<span class="k">def</span> <span class="nf">find_psi_variational</span><span class="p">(</span><span class="n">U</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">M</span><span class="p">,</span> <span class="n">tp</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">_f</span><span class="p">(</span><span class="n">psi</span><span class="p">,</span> <span class="n">U</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">M</span><span class="p">,</span> <span class="n">tp</span><span class="p">):</span>
        <span class="n">Hi</span> <span class="o">=</span> <span class="n">make_Hi</span><span class="p">(</span><span class="n">U</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">psi</span><span class="p">,</span> <span class="n">M</span><span class="p">,</span> <span class="n">tp</span><span class="p">)</span>
        <span class="n">e</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">eig_Hi</span><span class="p">(</span><span class="n">Hi</span><span class="p">,</span> <span class="n">tp</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>

    <span class="n">sol</span> <span class="o">=</span> <span class="n">sop</span><span class="o">.</span><span class="n">minimize</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(),</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">U</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">M</span><span class="p">,</span> <span class="n">tp</span><span class="p">))</span>

    <span class="n">Hi</span> <span class="o">=</span> <span class="n">make_Hi</span><span class="p">(</span><span class="n">U</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">sol</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">M</span><span class="p">,</span> <span class="n">tp</span><span class="p">)</span>
    <span class="n">e</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">eig_Hi</span><span class="p">(</span><span class="n">Hi</span><span class="p">,</span> <span class="n">tp</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">e</span><span class="p">,</span> <span class="n">sol</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">v</span>


<span class="k">def</span> <span class="nf">calc_n</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">tp</span><span class="p">):</span>
    <span class="n">M</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">annihilation</span><span class="p">(</span><span class="n">M</span><span class="p">,</span> <span class="n">tp</span><span class="p">)</span>
    <span class="n">ad</span> <span class="o">=</span> <span class="n">dag</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="n">n</span> <span class="o">=</span> <span class="n">ad</span> <span class="o">@</span> <span class="n">a</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">dag</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">@</span> <span class="n">n</span> <span class="o">@</span> <span class="n">v</span><span class="p">)[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tp</span> <span class="o">=</span> <span class="s2">"dense"</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">Ul</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
<span class="n">mul</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">150</span><span class="p">)</span>

<span class="n">UU</span><span class="p">,</span> <span class="n">mumu</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">Ul</span><span class="p">,</span> <span class="n">mul</span><span class="p">,</span> <span class="n">indexing</span><span class="o">=</span><span class="s2">"ij"</span><span class="p">)</span>
<span class="n">ee</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">UU</span><span class="p">)</span>
<span class="n">psipsi</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">UU</span><span class="p">)</span>
<span class="n">nn</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">UU</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">Ul</span><span class="p">))):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">mul</span><span class="p">)):</span>
        <span class="n">U</span> <span class="o">=</span> <span class="n">UU</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span>
        <span class="n">mu</span> <span class="o">=</span> <span class="n">mumu</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span>
        <span class="n">M</span> <span class="o">=</span> <span class="n">find_M</span><span class="p">(</span><span class="n">U</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">tp</span><span class="p">)</span>
        <span class="n">e</span><span class="p">,</span> <span class="n">psi</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">find_psi</span><span class="p">(</span><span class="n">U</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">M</span><span class="p">,</span> <span class="n">tp</span><span class="p">)</span>
        <span class="n">ee</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span>
        <span class="n">psipsi</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">psi</span>
        <span class="n">nn</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">calc_n</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">tp</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>





 
 
<div id="8aa12740-9d2c-4eda-be4c-c1e880f0e55e" class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#8aa12740-9d2c-4eda-be4c-c1e880f0e55e');
</script><script type="application/vnd.jupyter.widget-view+json">
{"model_id": "38aeaef0c82d42d888412e8c1d3f438c", "version_major": 2, "version_minor": 0}
</script>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>这就是巨正则系统的相图，右边圈起来的地方就是 Mott 绝缘体相</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pp</span> <span class="o">=</span> <span class="n">psipsi</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">pp</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">pp</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">pp</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">pp</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mf">1e-2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">plt</span><span class="o">.</span><span class="n">contour</span><span class="p">(</span><span class="n">UU</span><span class="p">,</span> <span class="n">mumu</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">pp</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[7]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&lt;matplotlib.contour.QuadContourSet at 0x7f6448fae670&gt;</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>




<div class="output_png output_subarea ">
<img src="data:image/png;base64,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">
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">mul</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">150</span><span class="p">)</span>
<span class="n">el</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">mul</span><span class="p">)</span>
<span class="n">psil</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">mul</span><span class="p">)</span>
<span class="n">nl</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">mul</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">U</span> <span class="o">=</span> <span class="mi">20</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">mul</span><span class="p">)):</span>
    <span class="n">mu</span> <span class="o">=</span> <span class="n">mul</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">M</span> <span class="o">=</span> <span class="n">find_M</span><span class="p">(</span><span class="n">U</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">tp</span><span class="p">)</span>
    <span class="n">e</span><span class="p">,</span> <span class="n">psi</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">find_psi</span><span class="p">(</span><span class="n">U</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">M</span><span class="p">,</span> <span class="n">tp</span><span class="p">)</span>
    <span class="c1"># e, psi, v = find_psi_variational(U, mu, t, M, tp)</span>
    <span class="n">el</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span>
    <span class="n">psil</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">psi</span>
    <span class="n">nl</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">calc_n</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">tp</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>对某个特定参数，能够看到在 Mott 平台中超流序参量都是 0，在Mott平台之间超流序参量才不是 0.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">mul</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">psil</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">mul</span><span class="p">,</span> <span class="n">nl</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[9]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[&lt;matplotlib.lines.Line2D at 0x7f6448c9efd0&gt;]</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>




<div class="output_png output_subarea ">
<img src="data:image/png;base64,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">
</div>

</div>

</div>
</div>

</div>
</div>
                </div>
            </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/performant-python/" class="u-url">Performant Python</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        chimez
                    </span></p>
            <p class="dateline">
            <a href="posts/performant-python/" rel="bookmark">
            <time class="published dt-published" datetime="2021-04-23T22:03:52+08:00" itemprop="datePublished" title="2021-04-23 22:03">2021-04-23 22:03</time></a>
            </p>
                </div>
            </header><div class="e-content entry-content">
                    <div id="outline-container-org0b6cff9" class="outline-2">
<h2 id="org0b6cff9">Python 性能</h2>
<div class="outline-text-2" id="text-org0b6cff9">
</div>
<div id="outline-container-orgf738e66" class="outline-3">
<h3 id="orgf738e66">计算机结构</h3>
<div class="outline-text-3" id="text-orgf738e66">
<p>
简单来说，计算机由计算单元、储存单元和二者之间的通信构成。
</p>
</div>

<div id="outline-container-org5869ca2" class="outline-4">
<h4 id="org5869ca2">计算单元</h4>
<div class="outline-text-4" id="text-org5869ca2">
<p>
计算单元一般是 CPU 和 GPU 等。
</p>

<p>
计算单元重要的两个参数是
</p>
<ol class="org-ol">
<li>每周期指令 (instructions per cycle, IPC): 每个时钟周期执行的指令数</li>
<li>时钟速度：每秒的时钟周期</li>
</ol>
<p>
如果提高时钟速度了，当然运行速度会变快。另一种方法是增加每个指令的计算量，通过向量化的方式，可以在一个指令中同时处理多个数据，即 SIMD(single instruction multiple data).
</p>

<p>
由于物理和技术限制，时钟速度的增加基本停止了，所以增加同一时间内运算量的方法就是增加更多的 CPU， 即并行化。
</p>
</div>
</div>

<div id="outline-container-orga82a97f" class="outline-4">
<h4 id="orga82a97f">Amdahl'a law</h4>
<div class="outline-text-4" id="text-orga82a97f">
<p>
经验定律：并行程序的加速上限取决于不能并行化的最小单元。
</p>
</div>
</div>

<div id="outline-container-org2f22611" class="outline-4">
<h4 id="org2f22611">存储单元</h4>
<div class="outline-text-4" id="text-org2f22611">
<p>
存储单元包括：机械硬盘、固态硬盘、RAM、L1/L2 等。主要的区别就是速度。一般来说速度越快容量越小。
</p>

<p>
存储单元速度通常比计算单元慢，所以主要的优化手段就是异步 I/O 和预先缓存，保证计算设备进行计算的时候数据已经准备好了。
</p>
</div>
</div>

<div id="outline-container-org4e920dc" class="outline-4">
<h4 id="org4e920dc">总线</h4>
<div class="outline-text-4" id="text-org4e920dc">
<p>
计算单元和存储单元通过总线连接。
总线最重要的参数是总线宽度和总线频率。
</p>
</div>
</div>
</div>
</div>
                </div>
            </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/petsc/" class="u-url">PETSc</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        chimez
                    </span></p>
            <p class="dateline">
            <a href="posts/petsc/" rel="bookmark">
            <time class="published dt-published" datetime="2021-04-21T15:39:14+08:00" itemprop="datePublished" title="2021-04-21 15:39">2021-04-21 15:39</time></a>
            </p>
                </div>
            </header><div class="e-content entry-content">
                    <div id="outline-container-org562c6a6" class="outline-2">
<h2 id="org562c6a6">PETSc</h2>
<div class="outline-text-2" id="text-org562c6a6">
<p>
<a href="https://www.mcs.anl.gov/petsc/index.html">PETSc</a> 是用于开发并行计算程序的基础库，完全建立在 MPI 上。
</p>
</div>

<div id="outline-container-org5a15db5" class="outline-3">
<h3 id="org5a15db5">安装与编译</h3>
<div class="outline-text-3" id="text-org5a15db5">
<ul class="org-ul">
<li>在 Debian 上有包 <code>petsc-dev</code>
</li>
<li>下载 <a href="https://www.mcs.anl.gov/petsc/download/">源码</a>
</li>
</ul>
</div>
</div>
</div>
                </div>
            </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/data-structures-for-sparse-matrix/" class="u-url">Data Structures for Sparse Matrix</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        chimez
                    </span></p>
            <p class="dateline">
            <a href="posts/data-structures-for-sparse-matrix/" rel="bookmark">
            <time class="published dt-published" datetime="2021-04-19T15:24:09+08:00" itemprop="datePublished" title="2021-04-19 15:24">2021-04-19 15:24</time></a>
            </p>
                </div>
            </header><div class="e-content entry-content">
                    <div id="outline-container-org50e4870" class="outline-2">
<h2 id="org50e4870">稀疏矩阵的数据结构</h2>
<div class="outline-text-2" id="text-org50e4870">
</div>
<div id="outline-container-org5f5823b" class="outline-3">
<h3 id="org5f5823b">常见结构</h3>
<div class="outline-text-3" id="text-org5f5823b">
<ul class="org-ul">
<li>COO: Coordinate or triplet</li>
<li>CSR: Compressed Sparse Row</li>
<li>CSC: Compressed Sparse Column</li>
<li>DIA: Diagonal</li>
<li>BSR: Block Sparse Row</li>
</ul>
</div>
</div>

<div id="outline-container-orgdae7df2" class="outline-3">
<h3 id="orgdae7df2">COO: coordinate</h3>
<div class="outline-text-3" id="text-orgdae7df2">
<ol class="org-ol">
<li>也叫做 triplet 格式</li>
<li>最简单和基本的格式，通常用做向其它格式转换的入门格式</li>
<li>顺序是任意的</li>
<li>保存三列数据：值、行指标、列指标</li>
</ol>
<pre class="example" id="org1e09945">
A:
   [[ 1,  0,  0,  2,  0],
    [ 3,  4,  0,  5,  0],
    [ 6,  0,  7,  8,  9],
    [ 0,  0, 10, 11,  0],
    [ 0,  0,  0,  0, 12]]

data:   [1, 3, 6, 4, 7, 10, 2, 5, 8, 11, 9, 12]
row(i): [0, 0, 1, 1, 1,  2, 2, 2, 2,  3, 3,  4]
col(j): [0, 3, 0, 1, 3,  0, 2, 3, 4,  2, 3,  4]

A[ i[k], j[k] ] = data[k]
</pre>
</div>
</div>

<div id="outline-container-orgae2094b" class="outline-3">
<h3 id="orgae2094b">CSR: Compressed Sparse Row</h3>
<div class="outline-text-3" id="text-orgae2094b">
<ol class="org-ol">
<li>按行压缩，即coo格式中的数据值、列指标不变，但行指标改成指向这一行开始的列的指标</li>
<li>一般来说，Fortran 里使用这种格式</li>
</ol>
<pre class="example" id="orgc200983">
A:
   [[ 1,  0,  0,  2,  0],
    [ 3,  4,  0,  5,  0],
    [ 6,  0,  7,  8,  9],
    [ 0,  0, 10, 11,  0],
    [ 0,  0,  0,  0, 12]]

data:   [1, 3, 6, 4, 7, 10, 2, 5, 8, 11, 9, 12]
row(i): [0, 2, 5, 9, 11, 12]
col(j): [0, 3, 0, 1, 3,  0, 2, 3, 4,  2, 3,  4]

</pre>
</div>
</div>

<div id="outline-container-orga4e9dcb" class="outline-3">
<h3 id="orga4e9dcb">CSC: Compressed Sparse Column</h3>
<div class="outline-text-3" id="text-orga4e9dcb">
<ol class="org-ol">
<li>按列压缩，与 CSR 类似，不过行列换一下</li>
<li>c 中常用这种格式</li>
</ol>
<pre class="example" id="org0204dd9">
A:
   [[ 1,  0,  0,  2,  0],
    [ 3,  4,  0,  5,  0],
    [ 6,  0,  7,  8,  9],
    [ 0,  0, 10, 11,  0],
    [ 0,  0,  0,  0, 12]]

data:   [1, 3, 6, 4, 7, 10, 2, 5, 8, 11, 9, 12]
row(i): [0, 1, 2, 1, 2,  3, 0, 1, 2,  3, 2,  4]
col(j): [0, 3, 4, 6, 10, 12]

</pre>
</div>
</div>

<div id="outline-container-orge7fedd2" class="outline-3">
<h3 id="orge7fedd2">DIA: The Diagonal format</h3>
<div class="outline-text-3" id="text-orge7fedd2">
<ol class="org-ol">
<li>按对角线压缩，保存偏移值，负的偏移忽略头元素，正的偏移忽略尾元素</li>
</ol>
<pre class="example" id="org554c1cc">
A:
   [[ 1.,  0.,  2.,  0.,  0.],
    [ 3.,  4.,  0.,  5.,  0.],
    [ 0.,  6.,  7.,  0.,  8.],
    [ 0.,  0.,  9., 10.,  0.],
    [ 0.,  0.,  0., 11., 12.]]

data:
   [[ 3.,  6.,  9., 11., nan],
    [ 1.,  4.,  7., 10., 12.],
    [nan, nan,  2.,  5.,  8.]]

offsets: [-1,  0,  2]

</pre>
</div>
</div>

<div id="outline-container-orga8a98d1" class="outline-3">
<h3 id="orga8a98d1">BSR: Block matrices</h3>
<div class="outline-text-3" id="text-orga8a98d1">
<ol class="org-ol">
<li>类似 CSR，只不过每个行列指的是一个小的矩阵，这些小矩阵大小都相等</li>
</ol>
</div>
</div>

<div id="outline-container-org883165e" class="outline-3">
<h3 id="org883165e">scipy 格式</h3>
<div class="outline-text-3" id="text-org883165e">
<ol class="org-ol">
<li>很容易使用，参考 <a href="https://docs.scipy.org/doc/scipy/reference/sparse.html">scipy - sparse</a>
</li>
</ol>
</div>
</div>

<div id="outline-container-orgce57083" class="outline-3">
<h3 id="orgce57083">suitesparse 格式</h3>
</div>

<div id="outline-container-org1eedf95" class="outline-3">
<h3 id="org1eedf95">MKL 格式</h3>
</div>
</div>
                </div>
            </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/sparse-matrix/" class="u-url">Sparse Matrix</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        chimez
                    </span></p>
            <p class="dateline">
            <a href="posts/sparse-matrix/" rel="bookmark">
            <time class="published dt-published" datetime="2021-04-19T14:12:16+08:00" itemprop="datePublished" title="2021-04-19 14:12">2021-04-19 14:12</time></a>
            </p>
                </div>
            </header><div class="e-content entry-content">
                    <div id="outline-container-org3601e22" class="outline-2">
<h2 id="org3601e22">稀疏矩阵</h2>
<div class="outline-text-2" id="text-org3601e22">
</div>
<div id="outline-container-orgf583d34" class="outline-3">
<h3 id="orgf583d34">定义</h3>
<div class="outline-text-3" id="text-orgf583d34">
<ol class="org-ol">
<li>稀疏矩阵指的是那些有很多元素为 0 的矩阵</li>
<li>一般而言 \(m\times n\) 的矩阵， 其非零元素的个数在 \(O(\mathrm{min}(m,n))\) 就可以作为稀疏矩阵来处理，一般来说就是每行或每列的元素个数是常数</li>
<li>很多非零元是 \(O(\mathrm{log}(n))\) 的矩阵不能作为稀疏矩阵</li>
</ol>
</div>
</div>

<div id="outline-container-org498c353" class="outline-3">
<h3 id="org498c353">稀疏矩阵的性质</h3>
<div class="outline-text-3" id="text-org498c353">
<ol class="org-ol">
<li>稀疏矩阵 \(A\) 的逆 \(A^{ -1}\) 一般来说是稠密的</li>
<li>稀疏矩阵 \(A\) 的 LU 分解 \(L\) 和  \(U\) 矩阵可以也是稀疏的</li>
</ol>
</div>
</div>

<div id="outline-container-org9baa7c1" class="outline-3">
<h3 id="org9baa7c1">Cayley-Hamilton 定理</h3>
<div class="outline-text-3" id="text-org9baa7c1">
<p>
矩阵满足其特征方程。
</p>

<p>
例：考虑矩阵 \(A = \begin{pmatrix} 1&amp;2 \\ 3&amp;4 \end{pmatrix}\) ，其特征方程为
</p>

\begin{equation*}
\mathrm{det} \left( \lambda I - A \right) =
\mathrm{det}
\begin{pmatrix}
\lambda - 1 &amp; 2 \\
3 &amp; \lambda - 4
\end{pmatrix}
= \lambda^2 - 5 \lambda - 2 = 0
\end{equation*}

<p>
那么有
</p>

<p>
\[
   A^{2} - 5 A - 2 = 0
   \]
</p>
</div>
</div>

<div id="outline-container-org0597791" class="outline-3">
<h3 id="org0597791">稀疏矩阵的图表示</h3>
<div class="outline-text-3" id="text-org0597791">
<p>
稀疏矩阵可以用图来表示，进而可以用图论的方法分析。
</p>

<p>
<b>图的定义</b> 图 \(G\) 定义为一个集合 \(G = (V,E)\),  \(E \subset V \times V\) ，其中 \(V\) 是顶点 (vertex) 的集合, \(E\) 是边 (edge) 的集合。
</p>

<ol class="org-ol">
<li>图是无向图，当且仅当矩阵是对称的。</li>
<li>矩阵的图表示，就是将行和列作为顶点的标号，非零矩阵元表示顶点间的连线。</li>
</ol>
</div>
</div>

<div id="outline-container-org0071432" class="outline-3">
<h3 id="org0071432">稀疏矩阵与偏微分方程</h3>
<div class="outline-text-3" id="text-org0071432">
<p>
典型的偏微分方程数值模拟的过程是：
</p>
<ol class="org-ol">
<li>物理问题</li>
<li>非线性偏微分方程</li>
<li>离散化</li>
<li>线性化近似</li>
<li>变成稀疏矩阵线性代数问题</li>
</ol>
<p>
可以想象成将自变量作为矩阵指标，离散化的偏微分方程每一步的作用结果就是利用周围的几个点的数值得到下一步当前点的值，这个过程可以写成一个稀疏矩阵。
</p>
</div>
</div>
</div>
                </div>
            </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/c-library/" class="u-url">C Library</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        chimez
                    </span></p>
            <p class="dateline">
            <a href="posts/c-library/" rel="bookmark">
            <time class="published dt-published" datetime="2021-03-26T16:17:14+08:00" itemprop="datePublished" title="2021-03-26 16:17">2021-03-26 16:17</time></a>
            </p>
                </div>
            </header><div class="e-content entry-content">
                    <div id="outline-container-orgb500b73" class="outline-2">
<h2 id="orgb500b73">C 语言标准库</h2>
<div class="outline-text-2" id="text-orgb500b73">
<p>
C89有 15 个头文件， C99 新增了 9 个，一共 24个。
</p>
</div>


<div id="outline-container-orgd511c0a" class="outline-3">
<h3 id="orgd511c0a">标识符命名限制</h3>
<div class="outline-text-3" id="text-orgd511c0a">
<ol class="org-ol">
<li>由一个下划线和一个大写字母或两个下划线开头的标识符是标准库保留的</li>
<li>由一个下划线开头的是文件作用域保留的</li>
<li>标准库中的外部链接标识符都是保留的</li>
</ol>
</div>
</div>
</div>


<div id="outline-container-org8ac1fab" class="outline-2">
<h2 id="org8ac1fab">输入/输出</h2>
<div class="outline-text-2" id="text-org8ac1fab">
<p>
绝大部分内容都在 <code>&lt;stdio.h&gt;</code> 头中
</p>
</div>

<div id="outline-container-org17f3f74" class="outline-3">
<h3 id="org17f3f74">流</h3>
<div class="outline-text-3" id="text-org17f3f74">
<p>
流(stream) 表示任意输入/输出的源或目的地，一般程序都是从一个流获得输入，再通过另一个流输出。
</p>
</div>

<div id="outline-container-orgc2d5ddf" class="outline-4">
<h4 id="orgc2d5ddf">文件指针</h4>
<div class="outline-text-4" id="text-orgc2d5ddf">
<p>
C中访问流是通过文件指针实现的，类型为 <code>FILE *</code>
</p>
</div>
</div>

<div id="outline-container-org57db649" class="outline-4">
<h4 id="org57db649">标准流</h4>
<div class="outline-text-4" id="text-org57db649">
<ol class="org-ol">
<li>
<code>stdin</code> 标准输入</li>
<li>
<code>stdout</code> 标准输出</li>
<li>
<code>stderr</code> 标准错误</li>
</ol>
</div>
</div>

<div id="outline-container-org1f8773e" class="outline-4">
<h4 id="org1f8773e">文件类型</h4>
<div class="outline-text-4" id="text-org1f8773e">
<p>
c中支持两种文件类型
</p>
<ol class="org-ol">
<li>文本文件，可分为若干行，并在文件末尾可以有一个特殊标记</li>
<li>二进制文件</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org784268a" class="outline-3">
<h3 id="org784268a">文件操作</h3>
<div class="outline-text-3" id="text-org784268a">
</div>
<div id="outline-container-org38306b1" class="outline-4">
<h4 id="org38306b1">打开文件</h4>
<div class="outline-text-4" id="text-org38306b1">
<div class="highlight"><pre><span></span>    <span class="kt">FILE</span> <span class="o">*</span><span class="nf">fopen</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">filename</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">mode</span><span class="p">);</span>
</pre></div>
<ol class="org-ol">
<li>当文件无法打开时返回 <code>NULL</code>
</li>
<li>模式中有 "b" 说明是二进制文件</li>
</ol>
<p>
模式说明
</p>
<ol class="org-ol">
<li>"r" 读</li>
<li>"w" 写</li>
<li>"a" 追加</li>
<li>"r+" 从文件头开始读和写</li>
<li>"w+" 读和写文件，覆盖</li>
<li>
<p>
"a+" 读和写文件，追加
</p>

<p>
常用模式
</p>
<div class="highlight"><pre><span></span>       <span class="k">if</span> <span class="p">((</span><span class="n">fp</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">"r"</span><span class="p">))</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{}</span>
</pre></div>
</li>
</ol>
</div>
</div>

<div id="outline-container-org6d87d2f" class="outline-4">
<h4 id="org6d87d2f">关闭文件</h4>
<div class="outline-text-4" id="text-org6d87d2f">
<div class="highlight"><pre><span></span>    <span class="kt">int</span> <span class="nf">fclose</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span><span class="n">stream</span><span class="p">);</span>
</pre></div>
<ol class="org-ol">
<li>成功关闭返回 0，否则返回错误代码 <code>EOF</code>
</li>
</ol>
</div>
</div>


<div id="outline-container-org6f7d91c" class="outline-4">
<h4 id="org6f7d91c">为流重新指定文件</h4>
<div class="outline-text-4" id="text-org6f7d91c">
<div class="highlight"><pre><span></span>    <span class="kt">FILE</span> <span class="o">*</span><span class="nf">freopen</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">filename</span><span class="p">,</span>
		  <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">mode</span><span class="p">,</span>
		  <span class="kt">FILE</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
</div>

<div id="outline-container-org83443bf" class="outline-4">
<h4 id="org83443bf">临时文件</h4>
<div class="outline-text-4" id="text-org83443bf">
<div class="highlight"><pre><span></span>    <span class="cm">/* 创建临时文件 */</span>
    <span class="kt">FILE</span> <span class="o">*</span><span class="nf">tmpfile</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

    <span class="cm">/* 获取临时文件的名字 */</span>
    <span class="kt">char</span> <span class="o">*</span><span class="nf">tmpnam</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">);</span>
</pre></div>
</div>
</div>

<div id="outline-container-org99828e8" class="outline-4">
<h4 id="org99828e8">文件缓冲</h4>
<div class="outline-text-4" id="text-org99828e8">
<div class="highlight"><pre><span></span>    <span class="cm">/* 清洗缓冲区 */</span>
    <span class="kt">int</span> <span class="nf">fflush</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span><span class="n">stream</span><span class="p">);</span>

    <span class="cm">/* 设置缓冲流 */</span>
    <span class="kt">int</span> <span class="nf">setvbuf</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">stream</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">buf</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mode</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">size</span><span class="p">);</span>
</pre></div>
</div>
</div>

<div id="outline-container-org6e60b09" class="outline-4">
<h4 id="org6e60b09">删除文件</h4>
<div class="outline-text-4" id="text-org6e60b09">
<div class="highlight"><pre><span></span>    <span class="cm">/* 删除文件 */</span>
    <span class="kt">int</span> <span class="nf">remove</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">filename</span><span class="p">);</span>

    <span class="cm">/* 重命名文件 */</span>
    <span class="kt">int</span> <span class="nf">rename</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">old</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">new</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div id="outline-container-orgcb1387b" class="outline-2">
<h2 id="orgcb1387b">数学与数值计算</h2>
<div class="outline-text-2" id="text-orgcb1387b">
<ol class="org-ol">
<li>&lt;float.h&gt; 定义浮点类型的范围和精度，其中没有类型和函数</li>
<li>&lt;limits.h&gt; 定义整数类型的取值范围，其中没有类型和函数</li>
<li>&lt;math.h&gt; 定义数学计算的函数</li>
<li>&lt;stdint.h&gt; 整数类型</li>
<li>&lt;inttypes.h&gt; 整数类型的格式转换</li>
<li>&lt;complex.h&gt; 复数</li>
<li>&lt;tgmath.h&gt; 泛型数学</li>
<li>&lt;fenv.h&gt; 浮点环境</li>
</ol>
</div>

<div id="outline-container-orgade0590" class="outline-3">
<h3 id="orgade0590">错误</h3>
<div class="outline-text-3" id="text-orgade0590">
<p>
当发生错误时，大多数函数会将一个错误码存储到 <code>errno</code> 变量中。此外，如果函数返回值大于double类型最大值会返回 <code>HUGE_VAL</code> 值。
</p>
<ol class="org-ol">
<li>定义域错误。当函数的参数超出定义域，会将 <code>EDOM</code> 存储到 <code>errno</code> 中</li>
<li>取值范围错误。当函数返回值超出double范围时，会将 <code>ERANGE</code> 存储到 <code>errno</code> 中</li>
</ol>
</div>
</div>

<div id="outline-container-org58beb17" class="outline-3">
<h3 id="org58beb17">紧缩(constraction)</h3>
<div class="outline-text-3" id="text-org58beb17">
<p>
C99中新增加了融合乘加 (fused multiply-add) 函数，即
</p>
<div class="highlight"><pre><span></span>   <span class="n">a</span> <span class="o">=</span> <span class="n">b</span> <span class="o">*</span> <span class="n">c</span> <span class="o">+</span> <span class="n">d</span><span class="p">;</span>
   <span class="n">a</span> <span class="o">=</span> <span class="n">fma</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">);</span>
</pre></div>
<p>
这种合并可能会速度更快一点，编译器是否自动进行紧缩可以由 <code>#pragma STDC FP_CONTRACT ON/OFF/DEFAULT</code> 来控制。
</p>
</div>
</div>
</div>


<div id="outline-container-org8361683" class="outline-2">
<h2 id="org8361683">字符、字符串与国际化</h2>
<div class="outline-text-2" id="text-org8361683">
<ol class="org-ol">
<li>&lt;ctype.h&gt; 处理字符</li>
<li>&lt;string.h&gt; 处理字符串</li>
<li>&lt;locale.h&gt; 本地化</li>
<li>&lt;iso646.h&gt; 拼写替换</li>
<li>&lt;wchar.h&gt; 多字节和宽字符工具</li>
<li>&lt;wctype.h&gt; 宽字符分类和映射工具</li>
</ol>
</div>


<div id="outline-container-orgaea5148" class="outline-3">
<h3 id="orgaea5148">&lt;string.h&gt;</h3>
<div class="outline-text-3" id="text-orgaea5148">
<p>
提供了5种函数
</p>
<ol class="org-ol">
<li>复制: memcpy, memmove, strcpy, strncpy</li>
<li>拼接: strcat, strncat</li>
<li>比较: memcmp, strcmp, strcoll, strncmp, strxfrm</li>
<li>搜索: memchr, strchr, strcpn, strpbrk, strrchr, strspn, strstr, strtok</li>
<li>其它（初始化、长度）: memset, strlen</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org46d76a2" class="outline-2">
<h2 id="org46d76a2">错误处理</h2>
<div class="outline-text-2" id="text-org46d76a2">
<ol class="org-ol">
<li>&lt;assert.h&gt; 诊断</li>
<li>&lt;errno.h&gt; 错误</li>
<li>&lt;signal.h&gt; 信号处理</li>
<li>&lt;setjmp.h&gt; 非局部跳转</li>
</ol>
</div>

<div id="outline-container-org0b17c35" class="outline-3">
<h3 id="org0b17c35">&lt;assert.h&gt; 诊断</h3>
<div class="outline-text-3" id="text-org0b17c35">
<p>
assert 是一个宏。当参数值为 0 时，assert 会向 stderr 写消息，并调用 abort 函数中止程序。
</p>

<div class="highlight"><pre><span></span>   <span class="kt">void</span> <span class="nf">assert</span><span class="p">(</span><span class="n">scalar</span> <span class="n">expression</span><span class="p">);</span>
</pre></div>
</div>
</div>

<div id="outline-container-org8d1e96e" class="outline-3">
<h3 id="org8d1e96e">&lt;errno.h&gt; 错误</h3>
<div class="outline-text-3" id="text-org8d1e96e">
<p>
错误代码存储在 errno 变量中，每次使用都要把它置零
</p>

<p>
errno 主要作用是说明错误类型，而不是发生错误
</p>
</div>
</div>

<div id="outline-container-org87963e6" class="outline-3">
<h3 id="org87963e6">&lt;signal.h&gt; 信号处理</h3>
<div class="outline-text-3" id="text-org87963e6">
</div>
<div id="outline-container-orgd30a27d" class="outline-4">
<h4 id="orgd30a27d">信号宏</h4>
<div class="outline-text-4" id="text-orgd30a27d">
<p>
UNIX 系统提供了更多信号宏，都是 SIG开头
</p>
<ol class="org-ol">
<li>SIGABRT: 异常终止(可能来自abort)</li>
<li>SIGFPE: 算术错误(除0或溢出)</li>
<li>SIGILL: 无效指令</li>
<li>SIGINT: 中断</li>
<li>SIGSEGV: 无效存储访问</li>
<li>SIGTERM: 终止请求</li>
</ol>
</div>
</div>

<div id="outline-container-org755aabe" class="outline-4">
<h4 id="org755aabe">signal 函数</h4>
<div class="outline-text-4" id="text-org755aabe">
<div class="highlight"><pre><span></span>    <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">signal</span><span class="p">(</span><span class="kt">int</span> <span class="n">sig</span><span class="p">,</span> <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">func</span><span class="p">)(</span><span class="kt">int</span><span class="p">)))(</span><span class="kt">int</span><span class="p">);</span>

    <span class="n">signal</span><span class="p">(</span><span class="n">SIG</span><span class="p">,</span> <span class="n">handler</span><span class="p">);</span>
</pre></div>
<p>
指定信号的处理函数
</p>
</div>
</div>

<div id="outline-container-org54be996" class="outline-4">
<h4 id="org54be996">信号处理函数</h4>
<div class="outline-text-4" id="text-org54be996">
<ol class="org-ol">
<li>SIG<sub>DFL</sub>: 按默认方式处理，实现定义，大多数时候是终止程序</li>
<li>SIG<sub>IGN</sub>: 忽略信号</li>
</ol>
</div>
</div>

<div id="outline-container-org7a92193" class="outline-4">
<h4 id="org7a92193">raise 函数</h4>
<div class="outline-text-4" id="text-org7a92193">
<div class="highlight"><pre><span></span>    <span class="kt">int</span> <span class="nf">raise</span><span class="p">(</span><span class="kt">int</span> <span class="n">sig</span><span class="p">);</span>
</pre></div>
<p>
产生一个信号，0表示调用成功。
</p>
</div>
</div>
</div>

<div id="outline-container-orgd028749" class="outline-3">
<h3 id="orgd028749">&lt;setjmp.h&gt; 非局部跳转</h3>
<div class="outline-text-3" id="text-orgd028749">
<div class="highlight"><pre><span></span>   <span class="cm">/* 设置跳转位置 */</span>
   <span class="kt">int</span> <span class="nf">setjmp</span><span class="p">(</span><span class="kt">jmp_buf</span> <span class="n">env</span><span class="p">);</span>

   <span class="cm">/* 跳转到 val 位置 */</span>
   <span class="kt">void</span> <span class="nf">longjmp</span><span class="p">(</span><span class="kt">jmp_buf</span> <span class="n">env</span><span class="p">,</span> <span class="kt">int</span> <span class="n">val</span><span class="p">);</span>
</pre></div>
<p>
可以实现跨函数的跳转
</p>
</div>
</div>
</div>


<div id="outline-container-org4849fc0" class="outline-2">
<h2 id="org4849fc0">可变参数</h2>
<div class="outline-text-2" id="text-org4849fc0">
<p>
&lt;stdarg.h&gt; 头
</p>

<div class="highlight"><pre><span></span>  <span class="cm">/* 可变参数类型，其中保存所有的可变参数 */</span>
  <span class="kt">va_list</span> <span class="n">ap</span><span class="p">;</span>

  <span class="cm">/* 将 src 中的参数复制到 dest 中 */</span>
  <span class="kt">void</span> <span class="nf">va_copy</span><span class="p">(</span><span class="kt">va_list</span> <span class="n">dest</span><span class="p">,</span> <span class="kt">va_list</span> <span class="n">src</span><span class="p">);</span>

  <span class="cm">/* 开始读取参数列表， parmN 为保存参数个数的变量名 */</span>
  <span class="kt">void</span> <span class="nf">va_start</span><span class="p">(</span><span class="kt">va_list</span> <span class="n">ap</span><span class="p">,</span> <span class="n">parmN</span><span class="p">);</span>

  <span class="cm">/* 获取一个类型为 type 的参数，类似出栈 */</span>
  <span class="n">type</span> <span class="n">va_arg</span><span class="p">(</span><span class="kt">va_list</span> <span class="n">ap</span><span class="p">;</span> <span class="n">type</span><span class="p">);</span>

  <span class="cm">/* 清理参数列表, 每次函数结束前都要用 */</span>
  <span class="kt">void</span> <span class="nf">va_end</span><span class="p">(</span><span class="kt">va_list</span> <span class="n">ap</span><span class="p">);</span>
</pre></div>
</div>
</div>

<div id="outline-container-org2670587" class="outline-2">
<h2 id="org2670587">日期和时间</h2>
<div class="outline-text-2" id="text-org2670587">
<p>
&lt;time.h&gt; 中提供三种类型
</p>
<ol class="org-ol">
<li>clock<sub>t</sub> 按时钟度量</li>
<li>time<sub>t</sub> 日历时间</li>
<li>struct tm 分解时间</li>
</ol>
</div>

<div id="outline-container-orgd079585" class="outline-3">
<h3 id="orgd079585">时间处理函数</h3>
<div class="outline-text-3" id="text-orgd079585">
<div class="highlight"><pre><span></span>   <span class="kt">clock_t</span> <span class="nf">clock</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

   <span class="kt">double</span> <span class="nf">difftime</span><span class="p">(</span><span class="kt">time_t</span> <span class="n">time1</span><span class="p">,</span> <span class="kt">time_t</span> <span class="n">time0</span><span class="p">);</span>

   <span class="kt">time_t</span> <span class="nf">mktime</span><span class="p">(</span><span class="k">struct</span> <span class="nc">tm</span> <span class="o">*</span><span class="n">timeptr</span><span class="p">);</span>

   <span class="kt">time_t</span> <span class="nf">time</span><span class="p">(</span><span class="kt">time_t</span> <span class="o">*</span><span class="n">timer</span><span class="p">);</span>
</pre></div>
</div>
</div>

<div id="outline-container-org229e1ad" class="outline-3">
<h3 id="org229e1ad">时间转换函数</h3>
<div class="outline-text-3" id="text-org229e1ad">
<div class="highlight"><pre><span></span>   <span class="kt">char</span> <span class="o">*</span><span class="nf">asctime</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="nc">tm</span> <span class="o">*</span><span class="n">timeptr</span><span class="p">);</span>

   <span class="kt">char</span> <span class="o">*</span><span class="nf">ctime</span><span class="p">(</span><span class="k">const</span> <span class="kt">time_t</span> <span class="o">*</span><span class="n">timer</span><span class="p">);</span>

   <span class="k">struct</span> <span class="nc">tm</span> <span class="o">*</span><span class="n">gmtime</span><span class="p">(</span><span class="k">const</span> <span class="kt">time_t</span> <span class="o">*</span><span class="n">timer</span><span class="p">);</span>

   <span class="k">struct</span> <span class="nc">tm</span> <span class="o">*</span><span class="n">localtime</span><span class="p">(</span><span class="k">const</span> <span class="kt">time_t</span> <span class="o">*</span><span class="n">timer</span><span class="p">);</span>

   <span class="kt">size_t</span> <span class="nf">strftime</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">maxsize</span><span class="p">,</span>
		   <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span>
		   <span class="k">const</span> <span class="k">struct</span> <span class="nc">tm</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">timeptr</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div id="outline-container-orga585d21" class="outline-2">
<h2 id="orga585d21">实用工具</h2>
<div class="outline-text-2" id="text-orga585d21">
<p>
包括
</p>
<ol class="org-ol">
<li>数值转换函数: atof, atoi, atol, strtod, strtol, strtoul, atoll, strtof, strtold, strtoll, strtoull</li>
<li>伪随机序列生成函数: rand, srand</li>
<li>内存管理函数: malloc, calloc, realloc, free</li>
<li>与外部通信: abort, atexit, exit, _Exit, getenv, system</li>
<li>搜索与排序: bsearch, qsort</li>
<li>整数运算函数: abs, labs, llabs, div, ldiv, lldiv</li>
<li>多字节/宽字符转换函数</li>
<li>多字节/宽字符串转换函数</li>
</ol>
</div>
</div>
                </div>
            </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/linear-regression-and-gradient-descent/" class="u-url">Linear Regression and Gradient Descent</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        chimez
                    </span></p>
            <p class="dateline">
            <a href="posts/linear-regression-and-gradient-descent/" rel="bookmark">
            <time class="published dt-published" datetime="2021-03-21T20:16:36+08:00" itemprop="datePublished" title="2021-03-21 20:16">2021-03-21 20:16</time></a>
            </p>
                </div>
            </header><div class="e-content entry-content">
                    <div id="outline-container-org80cd165" class="outline-2">
<h2 id="org80cd165">线性回归与梯度下降</h2>
<div class="outline-text-2" id="text-org80cd165">
</div>
<div id="outline-container-org3782f12" class="outline-3">
<h3 id="org3782f12">加载数据</h3>
<div class="outline-text-3" id="text-org3782f12">
<p>
加载数据(load data)，需要完成如下几个工作
</p>
<ol class="org-ol">
<li>读取和准备数据</li>
<li>对数据归一化</li>
<li>划分训练数据和测试数据</li>
</ol>
<p>
数据应该是有 \(x_{1},x_{2},\cdots,x_{n}\) 和一组 \(y\)
</p>

<p>
记住要对数据归一化, 可以选择基本的移动归一化，即减去最小值再除以最大最小之差
\[
   x' = \frac{x - \mathrm{min}(x)}{\mathrm{max}(x) - \mathrm{min}(x)}
   \]
</p>

<p>
或者减平均值除方差
</p>

<p>
\[
   x' = \frac{x - \mathrm{mean}(x)}{\mathrm{std}(x)}
   \]
</p>
</div>
</div>

<div id="outline-container-org843c36a" class="outline-3">
<h3 id="org843c36a">前向传播</h3>
<div class="outline-text-3" id="text-org843c36a">
<p>
前向传播(forward propagation) 就是从输入参数计算得到输出参数。
</p>

<p>
线性回归公式是
\[
   y = \sum_{j=1}^{M} x_{j}w_{j} + b
   \]
</p>

<p>
所以前向传播很容易写
</p>

<div class="highlight"><pre><span></span>   <span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
       <span class="n">result</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span> <span class="o">+</span> <span class="n">b</span>
       <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
</div>

<div id="outline-container-org3bc40e5" class="outline-3">
<h3 id="org3bc40e5">损失函数</h3>
<div class="outline-text-3" id="text-org3bc40e5">
<p>
损失函数(loss function) 是衡量前向计算结果与数据目标结果之间偏差的函数。
</p>

<p>
简单的损失函数是均方误差
\[
   \mathrm{Loss} = \frac{1}{N} \sum_{j=1}^{N} (y_{i} - z_{i})^{2}
   \]
其中 \(y_{i}\) 是目标结果， \(z_{i}\) 是计算结果。
</p>

<div class="highlight"><pre><span></span>   <span class="k">def</span> <span class="nf">loss</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
       <span class="n">result</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">((</span><span class="n">z</span> <span class="o">-</span> <span class="n">y</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
       <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
</div>

<div id="outline-container-org3542547" class="outline-3">
<h3 id="org3542547">梯度</h3>
<div class="outline-text-3" id="text-org3542547">
<p>
梯度(gradient) 是损失函数随参数变化的改变。
</p>

<p>
对于这里的线性回归模型和均方误差损失函数，梯度定义如下
\[
   \nabla \mathrm{Loss} = \left( \frac{\partial \mathrm{Loss}}{\partial w_{i}}, \dots \right)
   \]
</p>

<p>
对于我们要计算的损失函数
\[
   L = \frac{1}{2N} \sum_{i} (y_{i} - z_{i})^{2}
   \]
预测值为
\[
   z_{i} = \sum_{j} x_{i}^{j} w^{j} + b
   \]
其中 \(i\) 是样本的指标，\(j\) 是参数的指标。
那么损失函数 \(L\) 对参数 \(w_{j}\) 的微分为
\[
   \frac{\partial L}{\partial w_{j}} = \frac{ 1 }{ N  } \sum_{i} (z_{i}- y_{i}) \frac{\partial z_{i }}{\partial w_{j}}
   =\frac{ 1 }{ N  } \sum_{i} (z_{i}- y_{i}) x_{i}^{j}
   \]
</p>


<div class="highlight"><pre><span></span>   <span class="k">def</span> <span class="nf">gradient</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
       <span class="n">gradient_w</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">((</span><span class="n">z</span> <span class="o">-</span> <span class="n">y</span><span class="p">)</span> <span class="o">*</span> <span class="n">x</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
       <span class="n">gradient_b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">((</span><span class="n">z</span> <span class="o">-</span> <span class="n">y</span><span class="p">))</span>
       <span class="k">return</span> <span class="n">gradient_w</span><span class="p">,</span> <span class="n">gradient_b</span>
</pre></div>
</div>
</div>

<div id="outline-container-org957403e" class="outline-3">
<h3 id="org957403e">梯度下降</h3>
<div class="outline-text-3" id="text-org957403e">
<p>
梯度下降(gradient descent) 就是根据梯度来更新参数，最终到达收敛的过程。
</p>

<p>
在这部分要实现两个函数
</p>
<ol class="org-ol">
<li>更新(update)，即从这一步梯度和学习率(learning rate)计算下一步的梯度</li>
<li>训练(train)，即迭代执行前向计算-梯度-更新，并根据损失函数判断是否收敛</li>
</ol>
<p>
梯度下降的更新函数就是用上一步的参数减去学习率与梯度之积
\[
   w_{i+1}^{j} = w_{i}^{j} - \eta \frac{\partial \mathrm{Loss}}{\partial w_{i}^{j}}
   \]
</p>

<div class="highlight"><pre><span></span>   <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">gradient_w</span><span class="p">,</span> <span class="n">gradient_b</span><span class="p">,</span> <span class="n">eta</span><span class="p">):</span>
       <span class="n">w_new</span> <span class="o">=</span> <span class="n">w</span> <span class="o">-</span> <span class="n">eta</span> <span class="o">*</span> <span class="n">gradient_w</span>
       <span class="n">b_new</span> <span class="o">=</span> <span class="n">b</span> <span class="o">-</span> <span class="n">eta</span> <span class="o">*</span> <span class="n">gradient_b</span>
       <span class="k">return</span> <span class="n">w_new</span><span class="p">,</span> <span class="n">b_new</span>
</pre></div>

<div class="highlight"><pre><span></span>   <span class="k">def</span> <span class="nf">train</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">eta</span><span class="p">,</span> <span class="n">N</span><span class="p">):</span>
       <span class="n">L_list</span> <span class="o">=</span> <span class="p">[]</span>
       <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
	   <span class="n">z</span> <span class="o">=</span> <span class="n">forward</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
	   <span class="n">L</span> <span class="o">=</span> <span class="n">loss</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
	   <span class="n">gradient_w</span><span class="p">,</span> <span class="n">gradient_b</span> <span class="o">=</span> <span class="n">gradient</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
	   <span class="n">w</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">update</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">gradient_w</span><span class="p">,</span> <span class="n">gradient_b</span><span class="p">,</span> <span class="n">eta</span><span class="p">)</span>
	   <span class="n">L_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">L</span><span class="p">)</span>
       <span class="k">return</span> <span class="n">w</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">L_list</span>
</pre></div>
</div>
</div>

<div id="outline-container-org35da639" class="outline-3">
<h3 id="org35da639">随机梯度下降</h3>
<div class="outline-text-3" id="text-org35da639">
<p>
随机梯度下降(Stochastic Gradient Descent, SGD) 是指每步迭代时从总训练集抽取一小部分来计算梯度，通过这种方式能够加快训练。
一些概念：
</p>
<ul class="org-ul">
<li>mini batch: 每次迭代时用到的那一小部分数据集</li>
<li>batch size: 一个 mini batch 中的样本数</li>
<li>epoch: 迭代时不断抽取 mini batch，当取过一遍整个数据集时就叫做一轮 epoch</li>
</ul>
<p>
具体的操作：
</p>
<ol class="org-ol">
<li>将总的数据集随机打乱</li>
<li>将打乱后的数据集划分成若干个 mini batch</li>
<li>用每个 mini batch 进行一次训练</li>
<li>用所有 mini batch 训练过一遍后，返回第 1 步，开启下一轮 epoch</li>
</ol>
</div>
</div>
</div>
                </div>
            </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/dvc-data-version-control/" class="u-url">dvc: Data Version Control</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        chimez
                    </span></p>
            <p class="dateline">
            <a href="posts/dvc-data-version-control/" rel="bookmark">
            <time class="published dt-published" datetime="2021-03-19T13:53:14+08:00" itemprop="datePublished" title="2021-03-19 13:53">2021-03-19 13:53</time></a>
            </p>
                </div>
            </header><div class="e-content entry-content">
                    <p>
<a href="https://dvc.org">dvc</a> 是一个增强 git 管理大二进制文件能力的工具。
</p>

<div id="outline-container-org6e94d32" class="outline-2">
<h2 id="org6e94d32">基本使用</h2>
<div class="outline-text-2" id="text-org6e94d32">
</div>
<div id="outline-container-orgfaf0f31" class="outline-3">
<h3 id="orgfaf0f31">初始化 dvc</h3>
<div class="outline-text-3" id="text-orgfaf0f31">
<p>
在一个 git 项目目录中运行
</p>

<div class="highlight"><pre><span></span>   dvc init
   git commit -m "Initialize DVC"
</pre></div>

<p>
就自动创建好了 dvc 需要东西。
</p>

<p>
dvc 是寄生在git中的，其本身不提供版本管理能力，完全依靠 git 。
</p>
</div>
</div>

<div id="outline-container-org0b0ddc6" class="outline-3">
<h3 id="org0b0ddc6">添加数据</h3>
<div class="outline-text-3" id="text-org0b0ddc6">
<p>
如果有一个大的数据文件 <code>data/data.h5</code> ，那么就首先将它添加给 dvc， 然后把dvc创建的记录 <code>*.dvc</code> 和自动生成的 <code>.gitignore</code> 一起加到 git 中，之后再用 dvc 上传数据即可
</p>

<div class="highlight"><pre><span></span>   dvc add data/data.h5
   git add data/data.h5.dvc data/.gitignore
   git commit -m "Add raw data"
</pre></div>
</div>
</div>

<div id="outline-container-orgd07007f" class="outline-3">
<h3 id="orgd07007f">dvc的远程库</h3>
<div class="outline-text-3" id="text-orgd07007f">
<p>
dvc 支持多种远程库，甚至是本地的远程库
</p>

<div class="highlight"><pre><span></span>   mkdir -p /tmp/dvcstore
   dvc remote add -d myremote /tmp/dvcstore
   git commit .dvc/config -m "Configure local remote"
</pre></div>
</div>
</div>

<div id="outline-container-orge6eaa58" class="outline-3">
<h3 id="orge6eaa58">保存和同步数据</h3>
<div class="outline-text-3" id="text-orge6eaa58">
<p>
如果已经配置好了远程库，那么上传和下载数据操作就类似于 git
</p>
<div class="highlight"><pre><span></span>   dvc pull

   dvc push
</pre></div>
</div>
</div>
</div>
                </div>
            </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/orgmode/" class="u-url">orgmode</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        chimez
                    </span></p>
            <p class="dateline">
            <a href="posts/orgmode/" rel="bookmark">
            <time class="published dt-published" datetime="2021-03-19T13:52:11+08:00" itemprop="datePublished" title="2021-03-19 13:52">2021-03-19 13:52</time></a>
            </p>
                </div>
            </header><div class="e-content entry-content">
                    <p>Write your post here.</p>
                </div>
            </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/pytables/" class="u-url">PyTables</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        chimez
                    </span></p>
            <p class="dateline">
            <a href="posts/pytables/" rel="bookmark">
            <time class="published dt-published" datetime="2021-03-01T11:23:19+08:00" itemprop="datePublished" title="2021-03-01 11:23">2021-03-01 11:23</time></a>
            </p>
                </div>
            </header><div class="e-content entry-content">
                    <div id="outline-container-orgc54e73f" class="outline-2">
<h2 id="orgc54e73f">PyTables: 分层数据集</h2>
<div class="outline-text-2" id="text-orgc54e73f">
<p>
<a href="https://www.pytables.org">PyTables</a> 是基于 HDF5 格式构建的数据集，比 pandas 更底层，比 h5py 更高层。适合用在存储比 csv 表格更复杂更大的数据，同时又不想自己实现一些基本的数据操作的情况中，并且经过简单的处理就能用 pandas 进行进一步数据分析。
</p>
</div>


<div id="outline-container-org2f46282" class="outline-3">
<h3 id="org2f46282">安装</h3>
<div class="outline-text-3" id="text-org2f46282">
<div class="highlight"><pre><span></span>   # 使用 conda
   conda install pytables
   # 或者 pip
   python3 -m pip install tables
</pre></div>

<p>
测试
</p>
<div class="highlight"><pre><span></span>   <span class="kn">import</span> <span class="nn">tables</span> <span class="k">as</span> <span class="nn">tb</span>

   <span class="n">tb</span><span class="o">.</span><span class="n">test</span><span class="p">()</span>
</pre></div>
</div>
</div>

<div id="outline-container-org67cb12c" class="outline-3">
<h3 id="org67cb12c">基本使用</h3>
<div class="outline-text-3" id="text-org67cb12c">
<p>
pytables 的基本逻辑是
</p>
</div>

<div id="outline-container-orgc3ba833" class="outline-4">
<h4 id="orgc3ba833">创建一个 HDF5 文件</h4>
<div class="outline-text-4" id="text-orgc3ba833">
<div class="highlight"><pre><span></span>    <span class="n">f</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">open_file</span><span class="p">(</span><span class="s2">"filename.h5"</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">"w"</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">"file title"</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="n">tb</span><span class="o">.</span><span class="n">Filters</span><span class="p">(</span><span class="n">complevel</span><span class="o">=</span><span class="mi">9</span><span class="p">))</span>

    <span class="c1"># 别忘了还要关闭它</span>
    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>

<div id="outline-container-org005d4b5" class="outline-4">
<h4 id="org005d4b5">在文件中创建任意层的数据集</h4>
<div class="outline-text-4" id="text-org005d4b5">
<div class="highlight"><pre><span></span>    <span class="n">g</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">create_group</span><span class="p">(</span><span class="s2">"/parent/group"</span><span class="p">,</span> <span class="s2">"group_name"</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">"group title"</span><span class="p">)</span>
</pre></div>
</div>
</div>

<div id="outline-container-org9e9e3a8" class="outline-4">
<h4 id="org9e9e3a8">在数据集中创建若干个数据表</h4>
<div class="outline-text-4" id="text-org9e9e3a8">
<div class="highlight"><pre><span></span>    <span class="c1"># 需要创建对数据的描述</span>
    <span class="k">class</span> <span class="nc">data_description</span><span class="p">(</span><span class="n">tb</span><span class="o">.</span><span class="n">IsDescription</span><span class="p">):</span>
	<span class="n">name</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">StringCol</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
	<span class="n">idn</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">Int64Col</span><span class="p">()</span>
	<span class="k">class</span> <span class="nc">sub_data</span><span class="p">(</span><span class="n">tb</span><span class="o">.</span><span class="n">IsDescription</span><span class="p">):</span>
	    <span class="n">name</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">StringCol</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
	    <span class="n">id2</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">Float64Col</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>

    <span class="c1"># 然后创建空的数据表       </span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="s2">"table_name"</span><span class="p">,</span> <span class="n">data_description</span><span class="p">)</span>

    <span class="c1"># 在里面循环添加记录</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
	<span class="n">t</span><span class="o">.</span><span class="n">row</span><span class="p">[</span><span class="s2">"name"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"a"</span>
	<span class="n">t</span><span class="o">.</span><span class="n">row</span><span class="p">[</span><span class="s2">"idn"</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
	<span class="n">t</span><span class="o">.</span><span class="n">row</span><span class="p">[</span><span class="s2">"sub_data"</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s1">'asd_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">'</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
	<span class="n">t</span><span class="o">.</span><span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">()</span>

    <span class="c1"># 最后刷新一下缓存，确保数据都写入到磁盘</span>
    <span class="n">t</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>


<div id="outline-container-orgea59456" class="outline-2">
<h2 id="orgea59456">遇到的问题</h2>
<div class="outline-text-2" id="text-orgea59456">
</div>
<div id="outline-container-orga789dfa" class="outline-3">
<h3 id="orga789dfa">在不支持 <code>flock</code> 的集群上运行</h3>
<div class="outline-text-3" id="text-orga789dfa">
<p>
需要设置环境变量
</p>

<div class="highlight"><pre><span></span>   export HDF5_USE_FILE_LOCKING=FALSE
</pre></div>
</div>
</div>
</div>
                </div>
            </article>
</div>
    
        <ul class="pager postindexpager clearfix">
<li class="next"><a href="index-2.html" rel="next">Older posts</a></li>
        </ul>
<script src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js" integrity="sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"></script><script>
                renderMathInElement(document.body,
                    {
                        
delimiters: [
    {left: "$$", right: "$$", display: true},
    {left: "\\[", right: "\\]", display: true},
    {left: "\\begin{equation*}", right: "\\end{equation*}", display: true},
    {left: "$", right: "$", display: false},
    {left: "\\(", right: "\\)", display: false}
]

                    }
                );
            </script><!--End of body content--><footer id="footer">
            Contents © 2021         <a href="mailto:chimez@163.com">chimez</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
            
        </footer>
</div>
</div>


        <script src="assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script>
</body>
</html>

<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="zh_cn">
<head>
<meta charset="utf-8">
<meta name="description" content="Blog of chimez">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>chimez's blog</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="zh_cn" href="rss.xml">
<link rel="canonical" href="https://chimez.github.io/">
<link rel="next" href="index-5.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]--><link rel="prefetch" href="posts/tenpy-diao-yan/" type="text/html">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">è·³åˆ°ä¸»å†…å®¹</a>

<!-- Header and menu bar -->
<div class="container">
      <header class="blog-header py-3"><div class="row nbb-header align-items-center">
          <div class="col-md-3 col-xs-2 col-sm-2" style="width: auto;">
            <button class="navbar-toggler navbar-light bg-light nbb-navbar-toggler" type="button" data-toggle="collapse" data-target=".bs-nav-collapsible" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse bs-nav-collapsible bootblog4-search-form-holder">
                
            </div>
        </div>
          <div class="col-md-6 col-xs-10 col-sm-10 bootblog4-brand" style="width: auto;">
            <a class="navbar-brand blog-header-logo text-dark" href=".">

            <span id="blog-title">chimez's blog</span>
        </a>
          </div>
            <div class="col-md-3 justify-content-end align-items-center bs-nav-collapsible collapse flex-collapse bootblog4-right-nav">
            <nav class="navbar navbar-light bg-white"><ul class="navbar-nav bootblog4-right-nav"></ul></nav>
</div>
    </div>
</header><nav class="navbar navbar-expand-md navbar-light bg-white static-top"><div class="collapse navbar-collapse bs-nav-collapsible" id="bs-navbar">
            <ul class="navbar-nav nav-fill d-flex w-100">
<li class="nav-item">
<a href="archive.html" class="nav-link">Archive</a>
                </li>
<li class="nav-item">
<a href="categories/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="rss.xml" class="nav-link">RSS feed</a>

                
            </li>
</ul>
</div>
<!-- /.navbar-collapse -->
</nav>
</div>

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
    
        

    
        
    <div class="postindex">
            <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/tenpy-diao-yan/" class="u-url">TeNPy è°ƒç ”</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        chimez
                    </span></p>
            <p class="dateline">
            <a href="posts/tenpy-diao-yan/" rel="bookmark">
            <time class="published dt-published" datetime="2023-10-18T11:03:14+08:00" itemprop="datePublished" title="2023-10-18 11:03">2023-10-18 11:03</time></a>
            </p>
                        <p class="commentline">
    
    <a href="posts/tenpy-diao-yan/#disqus_thread" data-disqus-identifier="cache/posts/tenpy-diao-yan.html">è¯„è®º</a>


                </p>
</div>
            </header><div class="e-content entry-content">
                    <p>
DMRG / MPS / å¼ é‡ç½‘ç»œçš„å¼€æºåº“æœ‰å¾ˆå¤šï¼Œä¾‹å¦‚ <a href="https://github.com/tenpy/tenpy.git">TeNPy</a>, <a href="https://itensor.org/">ITensor</a>, <a href="https://github.com/jutho/TensorKit.jl">TensorKit</a>, <a href="https://bitbucket.org/aweichselbaum/workspace/projects/QS">QSpace</a>, <a href="https://github.com/g1257/dmrgpp">DMRG++</a>, <a href="https://uni10.gitlab.io/">uni10</a>, <a href="https://github.com/cmendl/pytenet">PyTeNet</a>, <a href="https://github.com/jcmgray/quimb">quimb</a>, <a href="https://github.com/dsuess/mpnum">mpnum</a>, <a href="https://green.physics.lsa.umich.edu/alps_legacy/index.php">ALPS project</a>, <a href="https://github.com/issp-center-dev/TeNeS">TeNeS</a>, <a href="https://syten.eu/">SyTen</a>, ç­‰ç­‰ã€‚
è¿™ä¸ªç³»åˆ—æ–‡ç« å°†ä¼šä»è¿™äº›åº“ä¸­é€‰æ‹©å‡ ä¸ªæ¥å­¦ä¹ å’Œåˆ†æä¸€ä¸‹ã€‚
</p>


<div id="org96abffc" class="figure">
<p><img src="https://imgs.xkcd.com/comics/standards.png" alt="standards.png"></p>
<p><span class="figure-number">Figure 1: </span>è®©æˆ‘ä»¬å†é€ ä¸ªè½®å­ğŸ¤£</p>
</div>

<p>
<a href="https://github.com/tenpy/tenpy">TeNPy</a>ç”±<a href="https://johannes-hauschild.de/">Johannes Hauschild</a>ä¸»è¦å¼€å‘å¹¶ç»´æŠ¤ï¼ŒHauschild çš„åšå£«å¯¼å¸ˆæ˜¯ Frank Pollmannï¼Œç°åœ¨åœ¨åˆ°å¤„åšåšåã€‚
è€ƒè™‘åˆ° Hauschild ä¸€ä½œçš„æ–‡ç« æ²¡æœ‰å‡ ä¸ªï¼Œå‘è¡¨æƒ…å†µå¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œæ‰€ä»¥æŸç§ç¨‹åº¦ä¸Šä»–æ˜¯åœ¨å…¨èŒåš TeNPy çš„å¼€å‘ã€‚
</p>


<div id="outline-container-org2e42efd" class="outline-2">
<h2 id="org2e42efd">å®‰è£…</h2>
<div class="outline-text-2" id="text-org2e42efd">
<div class="highlight"><pre><span></span># å®‰è£…ä¾èµ–
pip install -U pip numpy scipy cython setuptools wheel build
# ä¸‹è½½æºç 
git clone https://github.com/tenpy/tenpy.git
# å®‰è£…
cd tenpy
pip install -e .
# æµ‹è¯•
cd tests
pip install pytest
pytest
</pre></div>
</div>
</div>

<div id="outline-container-orgef8ce19" class="outline-2">
<h2 id="orgef8ce19">ä»£ç å±‚çº§</h2>
<div class="outline-text-2" id="text-orgef8ce19">
<p>
TeNPy çš„ä»£ç å±‚çº§å¦‚å›¾<a href="posts/tenpy-diao-yan/#org56c5e98">2</a>ã€‚
</p>

<ul class="org-ul">
<li>
<code>tenpy.simulations</code> æ˜¯ç¨‹åºçš„å…¥å£ï¼Œæä¾›è¿è¡Œç¨‹åºï¼ˆè¿›è¡Œè¯»å–å‚æ•°ã€è¿è¡Œè®¡ç®—ã€æ‰§è¡Œæµ‹é‡ã€ä¿å­˜ç»“æœå’Œä¸­é—´è¿‡ç¨‹ç­‰ç­‰ï¼‰çš„åŠŸèƒ½</li>
<li>
<code>tenpy.algorithms</code> ä¸­å®ç°äº†å¤šç§ç®—æ³•ï¼ŒåŒ…æ‹¬ DMRGã€iDMRGã€TEBDå’ŒTDVP</li>
<li>
<code>tenpy.models</code> ä¸­å®ç°äº†å„ç§æ¨¡å‹åŒ…æ‹¬è‡ªæ—‹ã€è´¹ç±³ã€æ³¢è‰²å’Œå„ç§æ™¶æ ¼ç»“æ„ã€‚äºŒç»´æ™¶æ ¼é€šè¿‡æ˜ å°„åˆ°ä¸€ç»´æ¥å®ç°ã€‚</li>
<li>
<code>tenpy.networks</code> ä¸­å®ç°äº† MPS å’Œ MPO ç±»å‹</li>
<li>
<code>tenpy.linalg</code> ä¸­å®ç°äº†å¸¦æœ‰å®ˆæ’é‡çš„å¼ é‡ä»¥åŠè¿­ä»£å¯¹è§’åŒ–ç®—æ³• Lanczos å’Œ Arnoldi</li>
<li>
<code>tenpy.tools</code> ä¸­åŒ…æ‹¬ä¸€äº›éœ€è¦ç”¨åˆ°å…¶å®ƒåŠŸèƒ½</li>
</ul>
<div id="org56c5e98" class="figure">
<p><img src="https://tenpy.readthedocs.io/en/latest/_images/overview.png" alt="overview.png"></p>
<p><span class="figure-number">Figure 2: </span>TeNPy çš„ä»£ç å±‚çº§</p>
</div>
</div>
</div>

<div id="outline-container-orgc123122" class="outline-2">
<h2 id="orgc123122"><code>tenpy.linalg.np_conserved.Array</code></h2>
<div class="outline-text-2" id="text-orgc123122">
<p>
TeNPy çš„åŸºæœ¬æ•°æ®ç»“æ„æ˜¯ <code>tenpy.linalg.np_conserved.Array</code>, å¸¦æœ‰å®ˆæ’è·çš„å¼ é‡ã€‚
TeNPy é‡‡ç”¨å¸¦æœ‰ç®­å¤´çš„ MPS è®°å·æ¥è¡¨ç¤ºä¸€ä¸ªå¼ é‡ã€‚
å¼ é‡çš„æ¯ä¸ªæŒ‡æ ‡æœ‰è‹¥å¹²å¯èƒ½çš„é‡å­æ•°ï¼Œè¿™äº›ä¿¡æ¯è®°å½•åœ¨ <code>Array.legs</code> å±æ€§é‡Œã€‚
å¯¹äºä¸€ä¸ªæœ‰ \(n\) ä¸ªæŒ‡æ ‡çš„å¼ é‡,  <code>Array.legs</code> æ˜¯é•¿åº¦ä¸º \(n\) çš„æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯ <code>tenpy.linalg.charges.LegCharge</code> , è¿™é‡Œè®°å½•äº†è¿™ä¸ªæŒ‡æ ‡æ‰€æœ‰å¯èƒ½çš„è·ä»¥åŠå®ƒæ˜¯å…¥æŒ‡æ ‡è¿˜æ˜¯å‡ºæŒ‡æ ‡ã€‚
å¼ é‡çš„å±æ€§ <code>Array.qtotal</code> è®°å½•æ€»é‡å­æ•°ï¼Œåªæœ‰é‚£äº›å’Œç­‰äºæ€»é‡å­æ•°çš„å—æ‰ä¼šè¢«ä¿å­˜ã€‚
æ¯ä¸ªä¿å­˜çš„å¼ é‡å—çš„æ•°æ®æ˜¯æ•°ç»„ <code>Array._data</code> çš„ä¸€ä¸ªå…ƒç´ ï¼Œå®ƒå¯¹äºçš„é‡å­æ•°åˆ™æ˜¯çŸ©é˜µ <code>Array._qdata</code> çš„ä¸€è¡Œã€‚
</p>

<pre class="example" id="org1c91396">
class Array{
    legs   : List[LegCharge],
    qtotal : Charge,
    _data  : List[numpy.ndarray],
    _qdata : numpy.ndarray[len(â€‹_data), len(legs)],
}
</pre>
</div>
</div>

<div id="outline-container-orgabbc1ce" class="outline-2">
<h2 id="orgabbc1ce"><code>tenpy.networks.site.Site</code></h2>
<div class="outline-text-2" id="text-orgabbc1ce">
<p>
<code>tenpy.networks.site.Site</code> æ˜¯ä¸€ä¸ªæ ¼ç‚¹æˆ–è€…ä¸€ä¸ªç‰©ç†æŒ‡æ ‡æ‰€éœ€è¦çš„æ•°æ®ã€‚
å®ƒä¿å­˜äº†ç‰©ç†æŒ‡æ ‡æ‰€éœ€è¦çš„ä¿¡æ¯ <code>LegCharge</code>, ä»¥åŠä½œç”¨åœ¨ä¸€ä¸ªæ ¼ç‚¹ä¸Šçš„æ‰€æœ‰å±€åŸŸç®—ç¬¦ <code>Site.ops</code>, å†™æ¨¡å‹çš„å“ˆå¯†é¡¿é‡æ‰€éœ€è¦çš„æ‰€æœ‰ç®—ç¬¦éƒ½æ˜¯ä»è¿™é‡Œå¾—åˆ°çš„ã€‚
é™¤äº†ä¸€èˆ¬çš„ç®—ç¬¦ä¹‹å¤–è¿˜æœ‰ Jordan-Wigner å˜æ¢ï¼ˆå¦‚æœéœ€è¦ï¼‰è¦ç”¨åˆ°çš„ä¿¡æ¯ã€‚
</p>

<p>
TeNPy ä¸­å®ç°çš„ <code>Site</code> æœ‰å¦‚ä¸‹è¿™äº›
</p>
<ul class="org-ul">
<li><code>BosonSite</code></li>
<li><code>ClockSite</code></li>
<li><code>FermionSite</code></li>
<li><code>GroupedSite</code></li>
<li><code>SpinHalfFermionSite</code></li>
<li><code>SpinHalfHoleSite</code></li>
<li><code>SpinHalfSite</code></li>
<li><code>SpinSite</code></li>
</ul>
</div>
</div>

<div id="outline-container-orgd1f8db5" class="outline-2">
<h2 id="orgd1f8db5"><code>tenpy.networks.mps.MPS</code></h2>
<div class="outline-text-2" id="text-orgd1f8db5">
<p>
å¯¹äº \(n\) æ ¼ç‚¹çš„é“¾ï¼Œ <code>tenpy.networks.mps.MPS</code> å°±æ˜¯ \(n\) ä¸ª <code>Site</code> å’Œ \(n\) ä¸ª <code>Array</code>, è¿™äº› <code>Array</code> éƒ½æ˜¯ä¸‰é˜¶å¼ é‡.
TeNPy çš„ MPS è¡¨ç¤ºè®°å½•äº†æ¯ä¸ªå—çš„å½¢å¼ï¼ˆå·¦æ­£åˆ™ã€å³æ­£åˆ™ã€å¯¹ç§°å½¢å¼æˆ–è€…å« Vidal çš„ \(\Gamma \Lambda\) å½¢å¼ï¼‰ä»¥åŠéœ€è¦çš„å¥‡å¼‚å€¼ã€‚
</p>

<pre class="example" id="org0eec316">
class MPS{
    sites: List[Site],
    _B: List[Array],
    _S: List[numpy.ndarray[1d]],
    form: List[form],
}
</pre>
</div>
</div>

<div id="outline-container-orged5a374" class="outline-2">
<h2 id="orged5a374"><code>tenpy.networks.mpo.MPO</code></h2>
<div class="outline-text-2" id="text-orged5a374">
<p>
<code>tenpy.networks.mpo.MPO</code> ä¸ MPS è¡¨ç¤ºç±»ä¼¼ï¼Œåªä¸è¿‡æ¯ä¸ªå—ç°åœ¨æ˜¯å››é˜¶å¼ é‡ã€‚
</p>
</div>
</div>

<div id="outline-container-org909028c" class="outline-2">
<h2 id="org909028c"><code>tenpy.models.model.Model</code></h2>
<div class="outline-text-2" id="text-org909028c">
<p>
<code>tenpy.models.model.Model</code> ç”¨æ¥è¡¨ç¤ºæ¨¡å‹çš„å“ˆå¯†é¡¿é‡ï¼Œéœ€è¦æŒ‡å®šå…ƒèƒæ ¼ç‚¹çš„ä¿¡æ¯ <code>Site</code> ä»¥åŠæ™¶æ ¼ç»“æ„å¦‚ä½•æ˜ å°„åˆ°ä¸€ç»´é“¾ <code>tenpy.models.lattice.Lattice</code>.
TeNPy æä¾›çš„æ„é€ æ¨¡å‹çš„æ–¹æ³•æ˜¯é€šè¿‡ <code>add_onsite</code>, <code>add_coupling</code> ç­‰è®¾ç½®å“ˆå¯†é¡¿é‡é‡Œçš„å„é¡¹ï¼Œç„¶åæ ¹æ®éœ€è¦è‡ªåŠ¨æ„é€  MPOã€‚
</p>
</div>
</div>

<div id="outline-container-org6695b2e" class="outline-2">
<h2 id="org6695b2e">DMRG ç®—æ³•</h2>
<div class="outline-text-2" id="text-org6695b2e">
<p>
TeNPy çš„æŠ½è±¡å±‚æ¬¡æ˜¯
</p>
<ul class="org-ul">
<li>ç”± <code>tenpy.algorithms.algorithm.Algorithm</code> æä¾›è¿è¡Œã€é‡å¯ç­‰åŠŸèƒ½</li>
<li>ç„¶åç”± <code>tenpy.algorithms.mps_common.Sweep</code> æä¾›æ‰«æçš„æŠ½è±¡</li>
<li>æ¯ä¸ªæ‰«ææ­¥éª¤åˆ™ä½¿ç”¨ <code>tenpy.algorithms.dmrg.DMRGEngine</code> å®ƒå¯ä»¥æ˜¯ <code>SingleSiteDMRGEngine</code> æˆ–è€… <code>TwoSiteDMRGEngine</code>
</li>
</ul>
</div>
</div>
                </div>
            </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/wsl/" class="u-url">wsl</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        chimez
                    </span></p>
            <p class="dateline">
            <a href="posts/wsl/" rel="bookmark">
            <time class="published dt-published" datetime="2021-10-21T12:27:51+08:00" itemprop="datePublished" title="2021-10-21 12:27">2021-10-21 12:27</time></a>
            </p>
                        <p class="commentline">
    
    <a href="posts/wsl/#disqus_thread" data-disqus-identifier="cache/posts/wsl.html">è¯„è®º</a>


                </p>
</div>
            </header><div class="e-content entry-content">
                    <div id="outline-container-org7ad51b4" class="outline-2">
<h2 id="org7ad51b4">WSL</h2>
<div class="outline-text-2" id="text-org7ad51b4">
</div>
<div id="outline-container-org6ea0ab6" class="outline-3">
<h3 id="org6ea0ab6">é…ç½® ssh</h3>
<div class="outline-text-3" id="text-org6ea0ab6">
<ol class="org-ol">
<li>å®‰è£… <code>openssh-server</code>
</li>
<li>
<p>
ç¼–è¾‘ <code>/etc/ssh/sshd_config</code>
</p>
<pre class="example" id="org581eb08">
# change port
Port 9922
ListenAddress 0.0.0.0
PasswordAuthentication yes
</pre>
</li>
<li>é‡å¯æœåŠ¡å™¨ <code>sudo service ssh restart</code>
</li>
<li>
<p>
windows é‡å®šå‘ç«¯å£
</p>
<pre class="example" id="org857724c">
netsh interface portproxy add v4tov4 listenaddress=0.0.0.0 listenport=9922 connectaddress=172.23.241.25 connectport=9922
</pre>
<ol class="org-ol">
<li>ç«¯å£å·å°±æ˜¯ ssh çš„</li>
<li>wsl çš„ ip åœ°å€å¯ä»¥ä» <code>ifconfig</code> å‘½ä»¤è·å¾—</li>
<li>
<code>ifconfig</code> åœ¨ <code>net-tools</code> åŒ…ä¸­</li>
</ol>
</li>
<li>åœ¨ windows é˜²ç«å¢™ä¸­æ·»åŠ ç«¯å£</li>
</ol>
</div>
</div>
</div>
                </div>
            </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/setuptools/" class="u-url">setuptools</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        chimez
                    </span></p>
            <p class="dateline">
            <a href="posts/setuptools/" rel="bookmark">
            <time class="published dt-published" datetime="2021-10-06T20:00:12+08:00" itemprop="datePublished" title="2021-10-06 20:00">2021-10-06 20:00</time></a>
            </p>
                        <p class="commentline">
    
    <a href="posts/setuptools/#disqus_thread" data-disqus-identifier="cache/posts/setuptools.html">è¯„è®º</a>


                </p>
</div>
            </header><div class="e-content entry-content">
                    <div id="outline-container-org40f4f11" class="outline-2">
<h2 id="org40f4f11">setuptools: python çš„æ‰“åŒ…å·¥å…·</h2>
<div class="outline-text-2" id="text-org40f4f11">
<p>
<a href="https://setuptools.pypa.io">setuptools</a> æ˜¯ pypa çš„é¡¹ç›®ã€‚
</p>
</div>

<div id="outline-container-org95bb1af" class="outline-3">
<h3 id="org95bb1af">åŸºæœ¬ä½¿ç”¨</h3>
<div class="outline-text-3" id="text-org95bb1af">
</div>
<div id="outline-container-org4f1113b" class="outline-4">
<h4 id="org4f1113b"><code>pyproject.toml</code></h4>
<div class="outline-text-4" id="text-org4f1113b">
<p>
PEP 517 è¦æ±‚æ‰€æœ‰ python é¡¹ç›®éœ€è¦ä¸€ä¸ªé…ç½®æ–‡ä»¶ <code>pyproject.toml</code> å…¶ä¸­æè¿°é¡¹ç›®çš„åŸºæœ¬ä¿¡æ¯å’Œä¾èµ–ç­‰ã€‚
</p>

<div class="highlight"><pre><span></span>    [build-system]
    requires = ["setuptools", "wheel"]
    build-backend = "setuptools.build_meta"
</pre></div>
</div>
</div>


<div id="outline-container-orge0ce0e0" class="outline-4">
<h4 id="orge0ce0e0">
<code>setup.cfg</code> or <code>setup.py</code>
</h4>
<div class="outline-text-4" id="text-orge0ce0e0">
<p>
<code>setup.cfg</code> æ˜¯ setuptools çš„ DSLï¼Œè€Œ <code>setup.py</code> ç”¨ä¸€èˆ¬çš„ python ä»£ç ã€‚
</p>

<div class="highlight"><pre><span></span>    <span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span>

    <span class="n">setup</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s1">'mypackage'</span><span class="p">,</span>
        <span class="n">version</span><span class="o">=</span><span class="s1">'0.0.1'</span><span class="p">,</span>
        <span class="n">packages</span><span class="o">=</span><span class="p">[</span><span class="s1">'mypackage'</span><span class="p">],</span>
        <span class="n">install_requires</span><span class="o">=</span><span class="p">[</span>
            <span class="s1">'requests'</span><span class="p">,</span>
            <span class="s1">'importlib; python_version == "2.6"'</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">)</span>
</pre></div>

<ul class="org-ul">
<li>
<code>packages</code> æŒ‡å®š setuptools è¦å¤„ç†çš„åŒ…ï¼Œå¯ä»¥ä½¿ç”¨ <code>find_packages</code>, <code>find_namespace_packages</code> æ¥è‡ªåŠ¨æ‰¾åˆ°æ‰€æœ‰åŒ…</li>
<li>
<code>install_requires</code> æŒ‡å®šå®‰è£…åŒ…éœ€è¦çš„ä¾èµ–, setuptools å¯ä»¥è‡ªåŠ¨ä» pypa å®‰è£…ä¾èµ–</li>
<li>
<code>setup_requires</code> æŒ‡å®šä¾èµ–ï¼Œä½† setuptools ä¸ä¼šè‡ªåŠ¨å®‰è£…å®ƒ</li>
</ul>
</div>
</div>
</div>


<div id="outline-container-org0743c80" class="outline-3">
<h3 id="org0743c80">å¼€å‘æ¨¡å¼</h3>
<div class="outline-text-3" id="text-org0743c80">
<p>
ä½¿ç”¨å¼€å‘æ¨¡å¼ï¼Œå¯ä»¥å®Œæˆæ„å»ºè€Œä¸éœ€è¦å°†æ–‡ä»¶å¤åˆ¶åˆ°åŒ…ç›®å½•ã€‚
</p>

<ul class="org-ul">
<li>å¼€å‘æ¨¡å¼å®‰è£… <code>setup.py develop</code>
</li>
<li>å¼€å‘æ¨¡å¼å¸è½½ <code>setup.py develop --uninstall</code>
</li>
<li>å¼€å‘æ¨¡å¼ä¸ PEP 517 ä¸å…¼å®¹ï¼Œæ‰€ä»¥ç”¨ pip å®‰è£…çš„æ–¹å¼æ˜¯ <code>pip install --editable .</code>
</li>
</ul>
</div>
</div>

<div id="outline-container-org2f4d5fa" class="outline-3">
<h3 id="org2f4d5fa">cython</h3>
<div class="outline-text-3" id="text-org2f4d5fa">
<p>
setuptools ä¼šè‡ªåŠ¨æ£€æŸ¥ cython æ˜¯å¦å®‰è£…ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±ä¼šå¿½ç•¥æ‰€æœ‰ <code>.pyx</code> æ–‡ä»¶ã€‚
</p>

<p>
PEP 517 è¦æ±‚åœ¨ <code>pyproject.toml</code> ä¸­åŠ å…¥
</p>
<div class="highlight"><pre><span></span>   [build-system]
   requires=[..., "cython"]
</pre></div>

<p>
ä¸ºäº†å…¼å®¹æ€§ï¼Œæ¨èåœ¨ <code>setup.py</code> ä¸­ä¹ŸåŠ å…¥ä¾èµ– <code>setup_requires = ['cython', ...]</code>
</p>

<p>
<code>setup.py</code>
</p>
<div class="highlight"><pre><span></span>   <span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span>
   <span class="kn">from</span> <span class="nn">Cython.Build</span> <span class="kn">import</span> <span class="n">cythonize</span>

   <span class="n">setup</span><span class="p">(</span>
       <span class="n">name</span><span class="o">=</span><span class="s1">'Hello world app'</span><span class="p">,</span>
       <span class="n">ext_modules</span><span class="o">=</span><span class="n">cythonize</span><span class="p">(</span><span class="s2">"hello.pyx"</span><span class="p">),</span>
       <span class="n">zip_safe</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
       <span class="n">setup_requires</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'cython'</span><span class="p">],</span>
   <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
                </div>
            </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/apache/" class="u-url">apache</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        chimez
                    </span></p>
            <p class="dateline">
            <a href="posts/apache/" rel="bookmark">
            <time class="published dt-published" datetime="2021-09-18T10:45:41+08:00" itemprop="datePublished" title="2021-09-18 10:45">2021-09-18 10:45</time></a>
            </p>
                        <p class="commentline">
    
    <a href="posts/apache/#disqus_thread" data-disqus-identifier="cache/posts/apache.html">è¯„è®º</a>


                </p>
</div>
            </header><div class="e-content entry-content">
                    <div id="outline-container-org30503bc" class="outline-2">
<h2 id="org30503bc">Apache HTTP æœåŠ¡å™¨</h2>
<div class="outline-text-2" id="text-org30503bc">
</div>
<div id="outline-container-org5758eb1" class="outline-3">
<h3 id="org5758eb1">é…ç½®æ–‡ä»¶</h3>
<div class="outline-text-3" id="text-org5758eb1">
<p>
å‚è€ƒï¼š <a href="https://httpd.apache.org/docs/current/configuring.html">apache-httpd/configuring</a>
</p>

<p>
é…ç½®æ–‡ä»¶å«åš <code>httpd.conf</code> åœ¨ debian æ˜¯ <code>/etc/apache2/apache.conf</code>
</p>
</div>

<div id="outline-container-org9566470" class="outline-4">
<h4 id="org9566470">è¯­æ³•</h4>
<div class="outline-text-4" id="text-org9566470">
<ul class="org-ul">
<li>æ¯è¡Œä¸€ä¸ªæŒ‡ä»¤ï¼Œåæ–œçº¿å¯ä»¥æŠ˜è¡Œ</li>
<li>æŒ‡ä»¤å¤§å°å†™ä¸æ•æ„Ÿï¼Œä½†å‚æ•°å¤§å°å†™æ•æ„Ÿ</li>
<li>æŒ‡ä»¤çš„å‚æ•°ç”¨ç©ºæ ¼åˆ†éš”</li>
<li>æŒ‡ä»¤ä¹‹å‰çš„ç©ºæ ¼éƒ½å¿½ç•¥ï¼Œæ‰€ä»¥å¯ä»¥ä»»æ„ç¼©è¿›</li>
<li>å˜é‡ç”¨ <code>Define</code> æŒ‡ä»¤å®šä¹‰ï¼Œç”¨ <code>${VAR}</code> æ ¼å¼ä½¿ç”¨</li>
<li>ä½¿ç”¨ <code>apachectl configtest</code> æ£€æŸ¥é…ç½®æ–‡ä»¶çš„è¯­æ³•é”™è¯¯</li>
</ul>
</div>
</div>
</div>
</div>


<div id="outline-container-org3a37dcd" class="outline-2">
<h2 id="org3a37dcd">é…ç½®</h2>
<div class="outline-text-2" id="text-org3a37dcd">
</div>
<div id="outline-container-org964b75f" class="outline-3">
<h3 id="org964b75f">åå‘ä»£ç† jupyterlab</h3>
<div class="outline-text-3" id="text-org964b75f">
<ul class="org-ul">
<li>éœ€è¦çš„æ¨¡å—ï¼š <code>a2enmod ssl rewrite proxy proxy_http proxy_wstunnel</code>
</li>
<li>jupyterlab éœ€è¦é…ç½®
<ul class="org-ul">
<li><code>c.ServerApp.allow_origin = '*'</code></li>
<li><code>c.ServerApp.base_url = '/jupyterlab'</code></li>
<li><code>c.ServerApp.port = 11413</code></li>
</ul>
</li>
</ul>
<div class="highlight"><pre><span></span>&lt;Location "/jupyterlab/"&gt;
    RewriteEngine On
    RewriteRule /jupyterlab/(.*) ws://127.0.0.1:11413/jupyterlab/$1 [P]
    RewriteRule /jupyterlab/(.*) http://127.0.0.1:11413/jupyterlab/$1 [P]

    ProxyPreserveHost on
    ProxyPass         http://127.0.0.1:11413/jupyterlab/
    ProxyPassReverse  http://127.0.0.1:11413/jupyterlab/
&lt;/Location&gt;
</pre></div>
</div>
</div>
</div>
                </div>
            </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/pblas-scalapack/" class="u-url">PBLAS &amp; ScaLAPACK &amp; BLACS</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        chimez
                    </span></p>
            <p class="dateline">
            <a href="posts/pblas-scalapack/" rel="bookmark">
            <time class="published dt-published" datetime="2021-08-24T12:31:22+08:00" itemprop="datePublished" title="2021-08-24 12:31">2021-08-24 12:31</time></a>
            </p>
                        <p class="commentline">
    
    <a href="posts/pblas-scalapack/#disqus_thread" data-disqus-identifier="cache/posts/pblas-scalapack.html">è¯„è®º</a>


                </p>
</div>
            </header><div class="e-content entry-content">
                    <div id="outline-container-orgd0d311c" class="outline-2">
<h2 id="orgd0d311c">PBLAS &amp; ScaLAPACK &amp; BLACS</h2>
<div class="outline-text-2" id="text-orgd0d311c">
<p>
<a href="https://www.netlib.org/scalapack/">ScaLAPACK</a> æ˜¯åŸºäº MPI çš„å¹¶è¡Œç‰ˆæœ¬ LAPACK, <a href="https://www.netlib.org/scalapack/pblas_qref.html">PBLAS</a> åˆ™æ˜¯å¹¶è¡Œç‰ˆæœ¬çš„ BLAS. å…¶ä¸­ PBLAS æ˜¯åµŒå…¥åˆ° ScaLAPACK é‡Œçš„ï¼Œè¿™ä¸ LAPACK ç»å¸¸åµŒå…¥åˆ° BLAS é‡Œåˆšå¥½åè¿‡æ¥
</p>
</div>

<div id="outline-container-orga24c039" class="outline-3">
<h3 id="orga24c039">ç¼–è¯‘</h3>
<div class="outline-text-3" id="text-orga24c039">
<ol class="org-ol">
<li>ä» github ä¸‹è½½ <a href="https://github.com/Reference-ScaLAPACK/scalapack/">https://github.com/Reference-ScaLAPACK/scalapack/</a>
</li>
<li>ä¿®æ”¹ <code>SLmake.inc</code> æ–‡ä»¶ä¸­çš„ <code>FC</code>, <code>CC</code>, <code>BLASLIB</code>, <code>LAPACKLIB</code>
</li>
</ol>
<p>
ç¤ºä¾‹
</p>
<pre class="example" id="orgd39f8ba">
FC            = /home/beacon/app/openmpi/bin/mpif90
CC            = /home/beacon/app/openmpi/bin/mpicc 
NOOPT         = -O0 -std=legacy
FCFLAGS       = -O3 -std=legacy
CCFLAGS       = -O3


BLASLIB       = -L/usr/lib/x86_64-linux-gnu/openblas-openmp/ -lblas
LAPACKLIB     = -L/usr/lib/x86_64-linux-gnu/openblas-openmp/ -llapack

</pre>
</div>

<div id="outline-container-org396273f" class="outline-4">
<h4 id="org396273f">GCC 10 ä¸å…¼å®¹</h4>
<div class="outline-text-4" id="text-org396273f">
<p>
ç”±äº GCC 10 æ ¹æ®æœ€æ–°çš„ fortran æ ‡å‡†ï¼Œè¦æ±‚å‚æ•°ç±»å‹åŒ¹é…ï¼Œæ‰€ä»¥è€ä»£ç ä¸ç»™é€šè¿‡ï¼Œå¯ä»¥æ·»åŠ  <code>-fallow-argument-mismatch</code> æˆ– <code>-std=legacy</code> æ¥ç¼–è¯‘ã€‚
</p>

<p>
å‚è€ƒ <a href="https://gcc.gnu.org/gcc-10/porting_to.html">Porting to GCC 10</a>
</p>
</div>
</div>
</div>

<div id="outline-container-org138c6dc" class="outline-3">
<h3 id="org138c6dc">BLACS</h3>
<div class="outline-text-3" id="text-org138c6dc">
<p>
<a href="https://www.netlib.org/blacs/index.html">BLACS</a> çš„ç›®çš„æ˜¯æä¾›ä¸€ç»„åœ¨åˆ†å¸ƒå†…å­˜ç³»ç»Ÿä¸Šçš„çº¿æ€§ä»£æ•°çš„æ ‡å‡†é€šä¿¡æ¥å£ï¼Œä¸»è¦æ˜¯ä½œä¸º ScaLAPACK çš„é€šä¿¡å±‚ã€‚
</p>

<p>
é™¤äº† MPI å¤–, BLACS è¿˜æ”¯æŒå¤šç§é€šä¿¡æ–¹æ¡ˆã€‚å½“ç„¶ç°åœ¨ MPI åŸºæœ¬æˆä¸ºä¸»æµï¼Œ è¿™éƒ¨åˆ†ä½œç”¨å·²ç»æ„ä¹‰ä¸å¤§äº†ã€‚
</p>

<p>
<a href="https://software.intel.com/content/www/us/en/develop/documentation/onemkl-developer-reference-c/top/blacs-routines.html">oneAPI/MKL/BLACS</a>
</p>
</div>
<div id="outline-container-org802eb8e" class="outline-4">
<h4 id="org802eb8e">åŸºæœ¬æ¦‚å¿µ</h4>
<div class="outline-text-4" id="text-org802eb8e">
</div>
<ul class="org-ul">
<li>
<a id="orgb6b084a"></a>è¿›ç¨‹ç½‘æ ¼å’ŒèŒƒå›´æ“ä½œ<br><div class="outline-text-5" id="text-orgb6b084a">
<p>
ä¸€ä¸ªåˆ†å¸ƒå¼æœºå™¨ä¸Šæœ‰ \(P\) ä¸ªè¿›ç¨‹ï¼Œç¼–å·ä» \(0\) åˆ° \(P-1\), æˆ‘ä»¬äººä¸ºåœ°å°†å®ƒä»¬æ’åˆ—æˆ \(R\) è¡Œ \(C\) åˆ—çš„ç½‘æ ¼ï¼Œç”¨è¡Œåˆ—æŒ‡æ ‡ \((i,j)\) æ¥è¡¨ç¤ºå…¶ä¸­ä¸€ä¸ªè¿›ç¨‹ã€‚
</p>

<p>
è¿™æ ·åˆ’åˆ†çš„å¥½å¤„åœ¨äºçº¿æ€§ä»£æ•°æ“ä½œæ—¶ï¼ŒäºŒç»´æ•°ç»„è¢«åˆ†æ•£åˆ° <b>è¿›ç¨‹ç½‘æ ¼</b> (process grid)ä¸­ï¼Œæ•°æ®çš„è¡Œåˆ—ä¸è¿›ç¨‹çš„è¡Œåˆ—æœ‰ç›´æ¥çš„å¯¹åº”ï¼Œå¾ˆé€‚åˆç¼–ç¨‹ã€‚
</p>

<p>
å½“è¿›è¡Œçš„é€šä¿¡æ¶‰åŠä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹æ—¶ï¼Œå°±å°†è¿™ç§æ“ä½œç§°ä½œ <b>èŒƒå›´æ“ä½œ</b> (scoped operations)ã€‚
åŸºæœ¬çš„èŒƒå›´æ“ä½œæœ‰
</p>
<ul class="org-ul">
<li>è¡Œé€šä¿¡</li>
<li>åˆ—é€šä¿¡</li>
<li>å…¨éƒ¨é€šä¿¡</li>
</ul>
</div>
</li>

<li>
<a id="org8484ac9"></a>ä¸Šä¸‹æ–‡<br><div class="outline-text-5" id="text-org8484ac9">
<p>
<b>ä¸Šä¸‹æ–‡</b> (context) è¡¨ç¤ºä¸€ä¸ªé€šä¿¡ç©ºé—´ï¼Œæ¯ä¸ªè¿›ç¨‹ç½‘æ ¼éƒ½æœ‰è‡ªå·±çš„ä¸Šä¸‹æ–‡ï¼Œåœ¨åŒä¸€ä¸ªä¸Šä¸‹æ–‡å†…éƒ¨çš„é€šä¿¡ä¸ä¼šè¢«å…¶å®ƒä¸Šä¸‹æ–‡çš„è¦†ç›–ã€‚
</p>

<p>
ä¸Šä¸‹æ–‡çš„ä¸»è¦ä½œç”¨æ˜¯å¯ä»¥å°†åŒä¸€ç»„è¿›ç¨‹æ ‡è®°æˆä¸åŒçš„è¿›ç¨‹ç½‘æ ¼ï¼Œæ¥æ–¹ä¾¿è¿›è¡Œé€šä¿¡æ“ä½œã€‚
</p>

<p>
BLACS ä¸­æœ‰å…³ä¸Šä¸‹æ–‡çš„å‡½æ•°æœ‰
</p>
<ul class="org-ul">
<li>
<code>BLACS_GRIDINIT</code>, <code>BLACS_GRIDMAP</code>
</li>
<li>
<code>BLACS_GRIDEXIT</code>, <code>BLACS_EXIT</code>
</li>
</ul>
</div>
</li>

<li>
<a id="orge8ceca2"></a>åŸºäºæ•°ç»„çš„é€šä¿¡<br><div class="outline-text-5" id="text-orge8ceca2">
<p>
BLACS ä¸­æœ‰ä¸¤ä¸ªåŸºæœ¬çš„æ•°æ®æ¨¡å‹
</p>
</div>

<ul class="org-ul">
<li>
<a id="org87ebe14"></a>çŸ©å½¢çŸ©é˜µ<br><div class="outline-text-6" id="text-org87ebe14">
<p>
ä¸€ç»´å‘é‡æ˜¯ç‰¹æ®Šçš„çŸ©å½¢çŸ©é˜µã€‚
</p>

<p>
çŸ©å½¢çŸ©é˜µæ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œ <code>M</code> è¡Œ <code>N</code> åˆ—ï¼Œä¸»ç»´æ•°æ˜¯ <code>LDA</code>, ä¸»ç»´æ•°å°±æ˜¯ç›¸é‚»çš„ä¸¤åˆ—æ•°åœ¨å†…å­˜ä¸­çš„é—´éš”.
</p>
</div>
</li>

<li>
<a id="org30adce6"></a>æ¢¯å½¢çŸ©é˜µ<br><div class="outline-text-6" id="text-org30adce6">
<p>
ä¸‰è§’çŸ©é˜µå’Œå¯¹è§’çŸ©é˜µæ˜¯ç‰¹æ®Šçš„æ¢¯å½¢çŸ©é˜µã€‚
</p>

<p>
æ¢¯å½¢çŸ©é˜µçš„æœ€å¤§åº•è¾¹æ˜¯ <code>M,N</code> ä¸­æœ€å¤§çš„æ•°ï¼Œå¦ä¸€ä¸ªæ˜¯æ¢¯å½¢çš„é«˜ï¼Œæ¢¯å½¢çš„çŸ­åº•è¾¹æ˜¯é•¿åº•è¾¹å’Œé«˜çš„å·®ã€‚
</p>

<ul class="org-ul">
<li>
<code>UPLO</code>: æ¢¯å½¢çŸ©é˜µï¼Œ <code>'U','L'</code> ä¸Šä¸‹æ¢¯å½¢</li>
<li>
<code>DIAG</code>: å•ä½å¯¹è§’çŸ©é˜µ</li>
</ul>
</div>
</li>
</ul>
</li>

<li>
<a id="org3852787"></a>æ— ç¼–å·é€šä¿¡<br><div class="outline-text-5" id="text-org3852787">
<p>
BLACS ä¸å…¶å®ƒé€šä¿¡å±‚çš„åŒºåˆ«ä¹‹ä¸€æ˜¯ï¼ŒBLACSä¸éœ€è¦ç”¨æˆ·æŒ‡å®šæ¶ˆæ¯çš„ç¼–å· (ä¾‹å¦‚ MPI çš„ tag) ,å› ä¸ºç¼–å·çš„é€‰æ‹©æœ‰æ—¶ä¼šå¯¼è‡´ç¼–ç¨‹çš„å›°éš¾ï¼Œæ‰€ä»¥ BLACS é€šè¿‡ä¸€ä¸ªç‰¹å®šçš„ç®—æ³•è‡ªåŠ¨ç”Ÿæˆæ¶ˆæ¯ç¼–å·ï¼Œç”¨æˆ·å¯ä»¥ç”¨ <code>SHIFT_RANGE</code> æ¥å°† BLACS çš„æ¶ˆæ¯ç¼–å·é™åˆ¶åœ¨ä¸€ä¸ªèŒƒå›´é‡Œï¼Œæ¥å’Œç”¨æˆ·è‡ªå®šä¹‰çš„æ¶ˆæ¯ç¼–å·éš”ç¦»ã€‚
</p>

<p>
BLACS çš„é€šä¿¡ä¿è¯
</p>
<ol class="org-ol">
<li>æ¥æ”¶ç«¯çŸ¥é“æ¶ˆæ¯çš„æ¥æº</li>
<li>æ¥æ”¶çš„é¡ºåºä¸å‘é€çš„é¡ºåºä¸€è‡´</li>
</ol>
</div>
</li>
</ul>
</div>

<div id="outline-container-orga4a0ea1" class="outline-4">
<h4 id="orga4a0ea1">ç»“æ„</h4>
<div class="outline-text-4" id="text-orga4a0ea1">
<p>
BLACS ç”± 4 ä¸ªéƒ¨åˆ†æ„æˆ
</p>
<ul class="org-ul">
<li>ç‚¹åˆ°ç‚¹é€šä¿¡</li>
<li>å¹¿æ’­</li>
<li>ç»„åˆ</li>
<li>æ”¯æŒæ¨¡å—</li>
</ul>
<p>
<a href="https://www.netlib.org/blacs/BLACS/QRef.html">å‡½æ•°å‚è€ƒ</a>
</p>
</div>

<ul class="org-ul">
<li>
<a id="org9d41958"></a>å‘½åè§„åˆ™<br><div class="outline-text-5" id="text-org9d41958">
<ul class="org-ul">
<li>ç‚¹åˆ°ç‚¹é€šä¿¡ä¸å¹¿æ’­ï¼š <code>vXXYY2D</code>
<ul class="org-ul">
<li>
<code>v</code> è¡¨ç¤ºæ•°æ®ç±»å‹</li>
<li>
<code>XX</code> è¡¨ç¤ºçŸ©é˜µçš„å½¢çŠ¶</li>
<li>
<code>YY</code> è¡¨ç¤ºé€šä¿¡çš„ç±»å‹</li>
</ul>
</li>
<li>ç»„åˆ: <code>vGZZZ2D</code>
<ul class="org-ul">
<li>
<code>v</code> è¡¨ç¤ºæ•°æ®ç±»å‹</li>
<li>
<code>ZZZ</code> è¡¨ç¤ºæ“ä½œç±»å‹</li>
</ul>
</li>
<li>æ”¯æŒæ¨¡å—: <code>BLACS_&lt;name&gt;</code>
</li>
</ul>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-left">
</colgroup>
<thead><tr>
<th scope="col" class="org-left"><code>v</code></th>
<th scope="col" class="org-left">æ„ä¹‰</th>
</tr></thead>
<tbody>
<tr>
<td class="org-left"><code>I</code></td>
<td class="org-left">æ•´æ•°</td>
</tr>
<tr>
<td class="org-left"><code>S</code></td>
<td class="org-left">å•ç²¾åº¦</td>
</tr>
<tr>
<td class="org-left"><code>D</code></td>
<td class="org-left">åŒç²¾åº¦</td>
</tr>
<tr>
<td class="org-left"><code>C</code></td>
<td class="org-left">å•ç²¾åº¦å¤æ•°</td>
</tr>
<tr>
<td class="org-left"><code>Z</code></td>
<td class="org-left">åŒç²¾åº¦å¤æ•°</td>
</tr>
</tbody>
</table>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-left">
</colgroup>
<thead><tr>
<th scope="col" class="org-left"><code>XX</code></th>
<th scope="col" class="org-left">æ„ä¹‰</th>
</tr></thead>
<tbody>
<tr>
<td class="org-left"><code>GE</code></td>
<td class="org-left">çŸ©å½¢çŸ©é˜µ</td>
</tr>
<tr>
<td class="org-left"><code>TR</code></td>
<td class="org-left">æ¢¯å½¢çŸ©é˜µ</td>
</tr>
</tbody>
</table>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-left">
</colgroup>
<thead><tr>
<th scope="col" class="org-left"><code>YY</code></th>
<th scope="col" class="org-left">æ„ä¹‰</th>
</tr></thead>
<tbody>
<tr>
<td class="org-left"><code>SD</code></td>
<td class="org-left">ç‚¹åˆ°ç‚¹å‘é€</td>
</tr>
<tr>
<td class="org-left"><code>RV</code></td>
<td class="org-left">ç‚¹åˆ°ç‚¹æ¥æ”¶</td>
</tr>
<tr>
<td class="org-left"><code>BS</code></td>
<td class="org-left">å¹¿æ’­å‘é€</td>
</tr>
<tr>
<td class="org-left"><code>BR</code></td>
<td class="org-left">å¹¿æ’­æ¥æ”¶</td>
</tr>
</tbody>
</table>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-left">
</colgroup>
<thead><tr>
<th scope="col" class="org-left"><code>ZZZ</code></th>
<th scope="col" class="org-left">æ„ä¹‰</th>
</tr></thead>
<tbody>
<tr>
<td class="org-left"><code>AMX</code></td>
<td class="org-left">æœ€å¤§ç»å¯¹å€¼</td>
</tr>
<tr>
<td class="org-left"><code>AMN</code></td>
<td class="org-left">æœ€å°ç»å¯¹å€¼</td>
</tr>
<tr>
<td class="org-left"><code>SUM</code></td>
<td class="org-left">æ±‚å’Œ</td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-org5a18175" class="outline-3">
<h3 id="org5a18175">PBLAS</h3>
<div class="outline-text-3" id="text-org5a18175">
<p>
<a href="https://www.netlib.org/scalapack/pblas_qref.html">PBLAS</a> çš„å‡½æ•°ç±»ä¼¼ BLAS, ç”±äºæ˜¯ä½œä¸º ScaLAPACK çš„ä¸€éƒ¨åˆ†åˆ†å‘çš„ï¼Œæ‰€ä»¥ä¸æä¾›ç»Ÿä¸€çš„ <code>.h</code> å¤´æ–‡ä»¶ï¼Œå¾—è‡ªå·±å†™ã€‚
</p>

<p>
<a href="https://software.intel.com/content/www/us/en/develop/documentation/onemkl-developer-reference-c/top/pblas-routines.html">oneAPI/MKL/PBLAS</a>
</p>
</div>
</div>
<div id="outline-container-org5be52fd" class="outline-3">
<h3 id="org5be52fd">ScaLAPACK</h3>
<div class="outline-text-3" id="text-org5be52fd">
</div>
<div id="outline-container-orgba3e4ab" class="outline-4">
<h4 id="orgba3e4ab">åŸºæœ¬æ–¹æ³•</h4>
</div>
</div>
</div>
                </div>
            </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/rust-macro/" class="u-url">Rust macro</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        chimez
                    </span></p>
            <p class="dateline">
            <a href="posts/rust-macro/" rel="bookmark">
            <time class="published dt-published" datetime="2021-08-20T13:32:43+08:00" itemprop="datePublished" title="2021-08-20 13:32">2021-08-20 13:32</time></a>
            </p>
                        <p class="commentline">
    
    <a href="posts/rust-macro/#disqus_thread" data-disqus-identifier="cache/posts/rust-macro.html">è¯„è®º</a>


                </p>
</div>
            </header><div class="e-content entry-content">
                    <div id="outline-container-org11b95ce" class="outline-2">
<h2 id="org11b95ce">Rust å®</h2>
<div class="outline-text-2" id="text-org11b95ce">
<p>
Rust çš„å®åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç§æ˜¯å£°æ˜å® <code>macro_rules!</code> ,å¦ä¸€ç§æ˜¯è¿‡ç¨‹å® <code>#[...]</code> .
</p>
</div>


<div id="outline-container-org97af11e" class="outline-3">
<h3 id="org97af11e">å£°æ˜å® <code>macro_rules!</code>
</h3>
<div class="outline-text-3" id="text-org97af11e">
<p>
å£°æ˜å®æ˜¯ Rust ä¸­æœ€å¸¸ç”¨çš„å®ï¼Œé€šè¿‡å¯¹æºç çš„æ¨¡å¼åŒ¹é…æ¥å®ç°åŠŸèƒ½ã€‚
</p>
</div>

<div id="outline-container-orge25f8bf" class="outline-4">
<h4 id="orge25f8bf">è¯­æ³•</h4>
<div class="outline-text-4" id="text-orge25f8bf">
<p>
å‚è€ƒï¼š <a href="https://doc.rust-lang.org/reference/macros-by-example.html">reference/macro</a>
</p>

<ul class="org-ul">
<li>
<code>#[macro_export]</code> å¯¼å‡ºå®</li>
<li>
<code>$x:expr</code> è¡¨æ˜æ¨¡å¼åŒ¹é…ä¸€ä¸ª <code>expr</code> ç±»å‹çš„æºç å—ï¼Œå¹¶ç”¨ <code>$x</code> è¡¨ç¤ºå®ƒ</li>
<li>
<code>$( ... ),*$</code> è¡¨æ˜åŒ¹é…æ‹¬å·ä¸­çš„å†…å®¹ 0 æ¬¡æˆ–å¤šæ¬¡ï¼Œæ¯ä¸ªé‡å¤çš„å†…å®¹ç›´æ¥ç”± <code>,</code> åˆ†éš”</li>
</ul>
</div>
</div>

<div id="outline-container-org7f6fcd9" class="outline-4">
<h4 id="org7f6fcd9">ä¾‹å­ï¼š <code>vec!</code>
</h4>
<div class="outline-text-4" id="text-org7f6fcd9">
<div class="highlight"><pre><span></span>    #[macro_export]
    macro_rules! vec {
        ( $( $x:expr ),* ) =&gt; {
            {
                let mut temp_vec = Vec::new();
                $(
                    temp_vec.push($x);
                )*
                    temp_vec
            }
        };
    }
</pre></div>
</div>
</div>
</div>


<div id="outline-container-org1ff4cea" class="outline-3">
<h3 id="org1ff4cea">è¿‡ç¨‹å®</h3>
<div class="outline-text-3" id="text-org1ff4cea">
<p>
è¿‡ç¨‹å®æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸è¿‡å®ƒçš„è¾“å…¥è¾“å‡ºç±»å‹æ˜¯è¯æ³•å¯¹è±¡ <code>TokenStream</code> ï¼Œç”±ç¼–è¯‘å™¨åœ¨ç¼–è¯‘å‰è°ƒç”¨ã€‚
</p>
</div>

<div id="outline-container-org3cba940" class="outline-4">
<h4 id="org3cba940">crate</h4>
<div class="outline-text-4" id="text-org3cba940">
<p>
ç”±äºæŠ€æœ¯é™åˆ¶ï¼Œç›®å‰è¿‡ç¨‹å®å¿…é¡»åˆ†ç¦»åœ¨ä¸€ä¸ªå•ç‹¬çš„ crate ä¸­, è¿™ä¸ª crate æ˜¯ <code>proc-macro</code> ç±»å‹çš„
</p>


<p>
<code>Cargo.toml</code>
</p>
<div class="highlight"><pre><span></span>    [lib]
    proc-macro = true
</pre></div>
</div>
</div>

<div id="outline-container-org27ae0e7" class="outline-4">
<h4 id="org27ae0e7">
<code>derive</code> å®</h4>
<div class="outline-text-4" id="text-org27ae0e7">
<p>
<code>derive</code> å®ç”¨æ¥ä¸ºç»“æ„ä½“ç­‰åˆ›å»ºé»˜è®¤çš„ trait å®ç°ã€‚
</p>

<p>
ä¸‹é¢çš„ä¾‹å­åˆ›å»ºä¸€ä¸ª <code>HelloMacro</code> trait çš„é»˜è®¤å®ç°å®ã€‚
</p>
</div>

<ul class="org-ul">
<li>
<a id="orgd39921f"></a>ä½¿ç”¨<br><div class="outline-text-5" id="text-orgd39921f">
<p>
ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†ä¸º <code>struct Pancakes</code> åˆ›å»º trait <code>HelloMacro</code> çš„é»˜è®¤å®ç°çš„æ–¹æ³•ï¼Œè¿™ä¸ª trait ä¸­åªæœ‰ä¸€ä¸ªå‡½æ•° <code>hello_macro()</code>
</p>

<p>
<code>src/main.rs</code>
</p>
<div class="highlight"><pre><span></span>     use hello_macro::HelloMacro;
     use hello_macro_derive::HelloMacro;

     #[derive(HelloMacro)]
     struct Pancakes;

     fn main() {
         Pancakes::hello_macro();
     }
</pre></div>
</div>
</li>

<li>
<a id="org12bb42a"></a>trait å®šä¹‰<br><div class="outline-text-5" id="text-org12bb42a">
<p>
<code>hello_macro/src/lib.rs</code>
</p>
<div class="highlight"><pre><span></span>     pub trait HelloMacro {
         fn hello_macro();
     }
</pre></div>
</div>
</li>

<li>
<a id="orgfcaf5df"></a>å®å®šä¹‰<br><div class="outline-text-5" id="text-orgfcaf5df">
<p>
<code>hello_macro_derive/Cargo.toml</code>
</p>
<div class="highlight"><pre><span></span>     [lib]
     proc-macro = true

     [dependencies]
     syn = "1.0"
     quote = "1.0"
</pre></div>

<p>
<code>hello_macro_derive/src/lib.rs</code>
</p>
<div class="highlight"><pre><span></span>     extern crate proc_macro;

     use proc_macro::TokenStream;
     use quote::quote;
     use syn;

     #[proc_macro_derive(HelloMacro)]
     pub fn hello_macro_derive(input: TokenStream) -&gt; TokenStream {
         // Construct a representation of Rust code as a syntax tree
         // that we can manipulate
         let ast = syn::parse(input).unwrap();

         // Build the trait implementation
         impl_hello_macro(&amp;ast)
     }

     fn impl_hello_macro(ast: &amp;syn::DeriveInput) -&gt; TokenStream {
         let name = &amp;ast.ident;
         let gen = quote! {
             impl HelloMacro for #name {
                 fn hello_macro() {
                     println!("Hello, Macro! My name is {}!", stringify!(#name));
                 }
             }
         };
         gen.into()
     }
</pre></div>
</div>
</li>
</ul>
</div>

<div id="outline-container-orga6a5158" class="outline-4">
<h4 id="orga6a5158">
<code>Attribute-like</code> å®</h4>
<div class="outline-text-4" id="text-orga6a5158">
<p>
å±æ€§å®å¯ä»¥åˆ›å»ºæ–°çš„å±æ€§, ä¸ <code>derive</code> å®çš„åŒºåˆ«åœ¨äºå‚æ•°å¤šäº†ä¸€ä¸ªå±æ€§ <code>attr</code>, ä¹Ÿå°±æ˜¯æ‹¬å·é‡Œé¢çš„éƒ¨åˆ†ï¼Œå¦ä¸€ä¸ªå‚æ•° <code>item</code> å°±æ˜¯ä¸ <code>derive</code> å®ä¸€æ ·çš„å†…å®¹äº†ã€‚
</p>
</div>

<ul class="org-ul">
<li>
<a id="orgdb44b9d"></a>ç”¨æ³•<br><div class="outline-text-5" id="text-orgdb44b9d">
<div class="highlight"><pre><span></span>     #[route(GET, "/")]
     fn index() { ... }
</pre></div>
</div>
</li>

<li>
<a id="orgeea496d"></a>å®å®šä¹‰<br><div class="outline-text-5" id="text-orgeea496d">
<div class="highlight"><pre><span></span>     #[proc_macro_attribute]
     pub fn route(attr: TokenStream, item: TokenStream) -&gt; TokenStream { ... }
</pre></div>
</div>
</li>
</ul>
</div>

<div id="outline-container-orgbf1ba5f" class="outline-4">
<h4 id="orgbf1ba5f">
<code>Function-like</code> å®</h4>
<div class="outline-text-4" id="text-orgbf1ba5f">
<p>
å‡½æ•°å®å¯ä»¥å®šä¹‰åƒå‡½æ•°ä¸€æ ·è°ƒç”¨çš„å®ã€‚å¯ä»¥ç”¨æ¥å®šä¹‰ DSL
</p>
</div>

<ul class="org-ul">
<li>
<a id="orged7e4a7"></a>ç”¨æ³•<br><div class="outline-text-5" id="text-orged7e4a7">
<div class="highlight"><pre><span></span>     let sql = sql!(SELECT * FROM posts WHERE id=1);
</pre></div>
</div>
</li>

<li>
<a id="orgd9b0c46"></a>å®å®šä¹‰<br><div class="outline-text-5" id="text-orgd9b0c46">
<div class="highlight"><pre><span></span>     #[proc_macro]
     pub fn sql(input: TokenStream) -&gt; TokenStream { ... }
</pre></div>
</div>
</li>
</ul>
</div>

<div id="outline-container-org49db44c" class="outline-4">
<h4 id="org49db44c">syn: rust parser</h4>
<div class="outline-text-4" id="text-org49db44c">
<p>
<a href="https://crates.io/crates/syn">syn</a> æ˜¯ rust ä»£ç çš„ parserï¼Œå¯ä»¥å°†æºç å­—ç¬¦ä¸² <code>TokenStream</code> è½¬æ¢æˆè¯­æ³•æ ‘ <code>syn::DeriveInput</code> ã€‚
</p>
</div>

<ul class="org-ul">
<li>
<a id="orgcdbcf20"></a><code>syn::DeriveInput</code><br><div class="outline-text-5" id="text-orgcdbcf20">
<p>
å¯¹äºè¾“å…¥ <code>TokenStream</code> ä½¿ç”¨ <code>parse_macro_input!</code> å°†å®ƒè§£æä¸ºè¯­æ³•æ ‘ <code>DeriveInput</code> ï¼Œä¹‹åå°±å¯ä»¥é€šè¿‡å¯¹è¯­æ³•æ ‘çš„æ“ä½œç”Ÿæˆæ–°çš„è¯­æ³•æ ‘
</p>
</div>
</li>

<li>
<a id="orgbc29f4a"></a><code>syn::spanned::Spanned</code><br><div class="outline-text-5" id="text-orgbc29f4a">
<p>
å¯¹é‡å¤ç»“æ„çš„æ“ä½œï¼Œä½¿ç”¨ <code>span()</code> é…åˆ <code>quote::qoute_spanned!</code> å®ç°
</p>
</div>
</li>
</ul>
</div>

<div id="outline-container-org83c7fa7" class="outline-4">
<h4 id="org83c7fa7">quote: rust ä»£ç æ¨¡æ¿</h4>
<div class="outline-text-4" id="text-org83c7fa7">
<p>
<a href="https://crates.io/crates/quote">quote</a> çš„ <code>quote!</code> å®å¯ä»¥å°† rust è¯­æ³•æ•°æ®ç»“æ„å˜æˆ <code>TokenStream</code>
</p>

<p>
<code>qoute_spanned!</code> å®å¯ä»¥å°†é‡å¤ç»“æ„ä¸­çš„ä¸€ä¸ªå…ƒç´ å•ç‹¬æ“ä½œã€‚
</p>

<p>
qoute çš„å®ç±»ä¼¼äº <code>macro_rules!</code> åªæ˜¯æŠŠ <code>$</code> æ¢æˆ  <code>#</code>
</p>
</div>
</div>
</div>
</div>
                </div>
            </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/rust-c-ffi/" class="u-url">rust c ffi</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        chimez
                    </span></p>
            <p class="dateline">
            <a href="posts/rust-c-ffi/" rel="bookmark">
            <time class="published dt-published" datetime="2021-08-19T09:49:34+08:00" itemprop="datePublished" title="2021-08-19 09:49">2021-08-19 09:49</time></a>
            </p>
                        <p class="commentline">
    
    <a href="posts/rust-c-ffi/#disqus_thread" data-disqus-identifier="cache/posts/rust-c-ffi.html">è¯„è®º</a>


                </p>
</div>
            </header><div class="e-content entry-content">
                    <div id="outline-container-org8da9284" class="outline-2">
<h2 id="org8da9284">Rust C FFI</h2>
<div class="outline-text-2" id="text-org8da9284">
</div>
<div id="outline-container-org8337bea" class="outline-3">
<h3 id="org8337bea">rust-bindgen: rust è°ƒç”¨ c</h3>
<div class="outline-text-3" id="text-org8337bea">
<p>
<a href="https://github.com/rust-lang/rust-bindgen">rust-bindgen</a> æ˜¯åœ¨ç¼–è¯‘æ—¶ç”±å¤´æ–‡ä»¶ç”Ÿæˆç»‘å®šä»£ç çš„å·¥å…·ã€‚ç”±å®ƒå°è£…çš„åº“ç§°ä¸º <code>xxx-sys</code>
</p>
</div>

<div id="outline-container-orgd8358b4" class="outline-4">
<h4 id="orgd8358b4">å¸¸é‡å®</h4>
<div class="outline-text-4" id="text-orgd8358b4">
<p>
å¯¹äºå½¢å¦‚ <code>#define XX (int)0</code> è¿™æ ·çš„æœ‰ç±»å‹è½¬æ¢çš„å®æ˜¯ä¸èƒ½è‡ªåŠ¨ç”Ÿæˆç»‘å®šçš„ï¼Œå¯ä»¥åœ¨ <code>wrapper.h</code> ä¸­å†™
</p>
<div class="highlight"><pre><span></span><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">_XX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">XX</span><span class="p">;</span>
</pre></div>
<p>
æ¥åˆ›å»ºç»‘å®šã€‚
</p>
</div>
</div>
</div>

<div id="outline-container-org43ac55a" class="outline-3">
<h3 id="org43ac55a">libc: ç³»ç»Ÿåº“</h3>
</div>


<div id="outline-container-org1ac8fe7" class="outline-3">
<h3 id="org1ac8fe7">c ç±»å‹</h3>
<div class="outline-text-3" id="text-org1ac8fe7">
<p>
ä¸€èˆ¬çš„ç±»å‹åœ¨ <code>std::os::raw</code> ä¸­ï¼Œæˆ–è€…ä½¿ç”¨åœ¨ <code>libc</code> ä¸­çš„é‡æ–°ç»‘å®šã€‚
</p>
</div>

<div id="outline-container-org24e360a" class="outline-4">
<h4 id="org24e360a">å­—ç¬¦ä¸²</h4>
<div class="outline-text-4" id="text-org24e360a">
<p>
c çš„å­—ç¬¦ä¸²å®é™…ä¸Šæ˜¯ <code>&amp;[u8]</code> æ•°ç»„ï¼Œå¯ä»¥ç”¨ <code>std::ffi::CString</code> å’Œ <code>std::ffi::CStr</code>, å…¶ä¸­ <code>CString</code> æ‹¥æœ‰æ‰€æœ‰æƒï¼Œ <code>CStr</code> æ˜¯å€Ÿç”¨ã€‚
</p>
</div>
</div>

<div id="outline-container-orgbf77fbf" class="outline-4">
<h4 id="orgbf77fbf">æŒ‡é’ˆ</h4>
<div class="outline-text-4" id="text-orgbf77fbf">
<p>
c çš„å¸¸é‡æŒ‡é’ˆ <code>const int *</code> å¯¹åº” <code>*const i32</code>, ä¸€èˆ¬æŒ‡é’ˆ <code>int *</code> å¯¹åº” <code>*mut i32</code>. ä¸¤çº§æŒ‡é’ˆ <code>int **</code> å¯¹åº” <code>*mut *mut int</code> ä»¥æ­¤ç±»æ¨ã€‚
</p>
</div>
</div>

<div id="outline-container-orgfb4f39e" class="outline-4">
<h4 id="orgfb4f39e">ç»“æ„ä½“</h4>
<div class="outline-text-4" id="text-orgfb4f39e">
<p>
rust ä¸­å®šä¹‰ä¸ c å…¼å®¹çš„ç»“æ„ä½“çš„æ–¹æ³•ä¸º
</p>
<div class="highlight"><pre><span></span>    #[repr(C)]
    #[derive(Debug, Copy, Clone)]
    pub struct MyStruct {
        pub a: ::std::os::raw::c_int,
    }
</pre></div>
</div>
</div>

<div id="outline-container-org920090c" class="outline-4">
<h4 id="org920090c"><code>sizeof</code></h4>
<div class="outline-text-4" id="text-org920090c">
<p>
ä¸ c çš„ <code>sizeof</code> ç›¸åŒçš„æ˜¯ <code>std::mem::sizeof</code>
</p>
</div>
</div>

<div id="outline-container-org48b63c8" class="outline-4">
<h4 id="org48b63c8"><code>offsetof</code></h4>
<div class="outline-text-4" id="text-org48b63c8">
<p>
ä½¿ç”¨ <a href="https://github.com/Gilnaa/memoffset">memoffset</a> çš„ <code>offset_of!</code> å®æ¥è·å¾—ã€‚
</p>

<p>
å¦‚æœä¸å¸Œæœ›ç»“æ„ä½“å†…å­˜å¯¹é½ï¼Œä½¿ç”¨ <code>#[repr(packed)]</code>
</p>
</div>
</div>
</div>

<div id="outline-container-org49d02ef" class="outline-3">
<h3 id="org49d02ef">é—®é¢˜è§£å†³</h3>
<div class="outline-text-3" id="text-org49d02ef">
</div>
<div id="outline-container-org6cc93dd" class="outline-4">
<h4 id="org6cc93dd">ä¼ é€’ <code>argc, argv</code>
</h4>
<div class="outline-text-4" id="text-org6cc93dd">
<p>
å‚è€ƒ <a href="https://stackoverflow.com/questions/34379641/how-do-i-convert-rust-args-into-the-argc-and-argv-c-equivalents">stackoverflow</a>
</p>

<div class="highlight"><pre><span></span>    extern crate libc;

    use libc::{c_char, c_int, c_void};
    use std::ffi::CString;

    extern "C" {
        fn foo(argc: *mut c_int, argv: *mut *mut *mut c_char);
    }

    fn main() {
        let mut c_args: Vec&lt;*mut c_char&gt; = std::env::args()
            .map(|arg| CString::new(arg).unwrap().into_raw())
            .collect();
        unsafe {
            let mut c_argc: c_int = c_args.len() as c_int;
            let mut c_argv: *mut *mut c_char = c_args.as_mut_ptr();

            foo(&amp;mut c_argc as *mut c_int, &amp;mut c_argv);
        }
    }
</pre></div>
</div>
</div>
</div>
</div>
                </div>
            </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/restructuredtext/" class="u-url">reStructuredText</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        chimez
                    </span></p>
            <p class="dateline">
            <a href="posts/restructuredtext/" rel="bookmark">
            <time class="published dt-published" datetime="2021-08-16T10:46:27+08:00" itemprop="datePublished" title="2021-08-16 10:46">2021-08-16 10:46</time></a>
            </p>
                        <p class="commentline">
    
    <a href="posts/restructuredtext/#disqus_thread" data-disqus-identifier="cache/posts/restructuredtext.html">è¯„è®º</a>


                </p>
</div>
            </header><div class="e-content entry-content">
                    <div id="outline-container-org5becc00" class="outline-2">
<h2 id="org5becc00">reStructuredText</h2>
<div class="outline-text-2" id="text-org5becc00">
<p>
reST, æ–‡ä»¶åç¼€ <code>*.rst</code> æ˜¯ç±»ä¼¼ markdown çš„æ ‡è®°è¯­è¨€ï¼Œæ˜¯ python çš„ <img src="sphinx-documentation-generator.org" alt="Sphinx"> é»˜è®¤è¯­è¨€ã€‚
</p>
</div>

<div id="outline-container-org5811382" class="outline-3">
<h3 id="org5811382">åŸºæœ¬è¯­æ³•</h3>
<div class="outline-text-3" id="text-org5811382">
</div>
<div id="outline-container-orgb765f2d" class="outline-4">
<h4 id="orgb765f2d">æ®µè½</h4>
<div class="outline-text-4" id="text-orgb765f2d">
<p>
ä¸ python ç±»ä¼¼ï¼ŒreST ä¸­ç”¨ç¼©è¿›è¡¨ç¤ºä¸åŒçš„å±‚çº§ã€‚
</p>
</div>
</div>

<div id="outline-container-orga82456c" class="outline-4">
<h4 id="orga82456c">è¡Œå†…æ ‡è®°</h4>
<div class="outline-text-4" id="text-orga82456c">
<pre class="example" id="orgf7ce19d">
*something*               | æ–œä½“
**something**             | ç²—ä½“
``code``                  | è¡Œå†…ä»£ç 
`title &lt;http://to.link&gt;`_ | å¤–éƒ¨é“¾æ¥
`my link`_                | åˆ†å¼€çš„é“¾æ¥
.. _my link: http::/a.link
</pre>
</div>
</div>

<div id="outline-container-org5d253c7" class="outline-4">
<h4 id="org5d253c7">åˆ—è¡¨</h4>
<div class="outline-text-4" id="text-org5d253c7">
<div class="highlight"><pre><span></span>    1. ç¼–å·åˆ—è¡¨
    2. ç¼–å·åˆ—è¡¨

    * æ— ç¼–å·åˆ—è¡¨
    * æ— ç¼–å·åˆ—è¡¨

    #. è¿˜æ˜¯ç¼–å·åˆ—è¡¨
    #. è¿˜æ˜¯ç¼–å·åˆ—è¡¨


    * åˆ—è¡¨å¯ä»¥åµŒå¥—

      * ä½†æ˜¯è¦ç©ºä¸€è¡Œ
      * å¹¶ä¸”ç¼©è¿›
</pre></div>
</div>
</div>

<div id="outline-container-org82391f4" class="outline-4">
<h4 id="org82391f4">å¼•ç”¨å—</h4>
<div class="outline-text-4" id="text-org82391f4">
<div class="highlight"><pre><span></span>    å¼•ç”¨å—ï¼Œæœ«å°¾ç”¨åŒå†’å·::

      ç©ºä¸€è¡Œ

      å¹¶ä¸”ç¼©è¿›

    ç©ºä¸€è¡Œå°±ç»“æŸ
</pre></div>
</div>
</div>

<div id="outline-container-orgb32b1ea" class="outline-4">
<h4 id="orgb32b1ea">è¡¨æ ¼</h4>
<div class="outline-text-4" id="text-orgb32b1ea">
<div class="highlight"><pre><span></span>    å®Œæ•´çš„è¡¨æ ¼

    +------------------------+------------+----------+----------+
    | Header row, column 1   | Header 2   | Header 3 | Header 4 |
    | (header rows optional) |            |          |          |
    +========================+============+==========+==========+
    | body row 1, column 1   | column 2   | column 3 | column 4 |
    +------------------------+------------+----------+----------+
    | body row 2             | ...        | ...      |          |
    +------------------------+------------+----------+----------+

    ç®€åŒ–çš„è¡¨æ ¼

    =====  =====  =======
    A      B      A and B
    =====  =====  =======
    False  False  False
    True   False  False
    False  True   False
    True   True   True
    =====  =====  =======
</pre></div>
</div>
</div>

<div id="outline-container-org0ad2d1e" class="outline-4">
<h4 id="org0ad2d1e">æ ‡é¢˜</h4>
<div class="outline-text-4" id="text-org0ad2d1e">
<pre class="example" id="orgeb136c3">
# | parts
* | chapters
= | sections
- | subsections
^ | subsubsections
" | paragraphs
</pre>
</div>
</div>
</div>

<div id="outline-container-orga281f0d" class="outline-3">
<h3 id="orga281f0d">æŒ‡ä»¤</h3>
<div class="outline-text-3" id="text-orga281f0d">
<p>
reST æ”¯æŒå¾ˆå¤šæŒ‡ä»¤ï¼Œè¿™é‡Œæ˜¯å¸¸ç”¨çš„å‡ ä¸ª
</p>
</div>

<ul class="org-ul">
<li>
<a id="orgde4d6af"></a><code>image</code> å›¾ç‰‡<br>
</li>

<li>
<a id="orgd95b6d6"></a><code>[#footnote]_</code> è„šæ³¨<br>
</li>

<li>
<a id="org8d4dce1"></a><code>..</code> æ³¨é‡Š<br>
</li>
</ul>
</div>

<div id="outline-container-org28e55f6" class="outline-3">
<h3 id="org28e55f6">è§’è‰²</h3>
<div class="outline-text-3" id="text-org28e55f6">
<p>
reST ä½¿ç”¨ <code>:rolename:`content`</code> è¯­æ³•æ¥åšä¸€äº›å¤æ‚çš„è¡Œå†…æ ‡è®°
</p>
</div>

<div id="outline-container-orgb6224f5" class="outline-4">
<h4 id="orgb6224f5">
<code>:ref:</code> äº¤å‰å¼•ç”¨</h4>
</div>

<div id="outline-container-org8b36dd4" class="outline-4">
<h4 id="org8b36dd4">
<code>:math:</code> æ•°å­¦å…¬å¼</h4>
</div>
</div>
</div>
                </div>
            </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/sphinx-documentation-generator/" class="u-url">Sphinx: Documentation Generator</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        chimez
                    </span></p>
            <p class="dateline">
            <a href="posts/sphinx-documentation-generator/" rel="bookmark">
            <time class="published dt-published" datetime="2021-08-16T10:00:41+08:00" itemprop="datePublished" title="2021-08-16 10:00">2021-08-16 10:00</time></a>
            </p>
                        <p class="commentline">
    
    <a href="posts/sphinx-documentation-generator/#disqus_thread" data-disqus-identifier="cache/posts/sphinx-documentation-generator.html">è¯„è®º</a>


                </p>
</div>
            </header><div class="e-content entry-content">
                    <div id="outline-container-orga2f31c7" class="outline-2">
<h2 id="orga2f31c7">Sphinx: æ–‡æ¡£ç”Ÿæˆ</h2>
<div class="outline-text-2" id="text-orga2f31c7">
<p>
<a href="https://www.sphinx-doc.org/en/master/usage/quickstart.html">sphinx/getting started</a>
</p>
</div>

<div id="outline-container-org9f97d0c" class="outline-3">
<h3 id="org9f97d0c">åˆ›å»ºä¸é…ç½®é¡¹ç›®</h3>
<div class="outline-text-3" id="text-org9f97d0c">
</div>
<div id="outline-container-orged7c631" class="outline-4">
<h4 id="orged7c631"><code>sphinx-quickstart</code></h4>
<div class="outline-text-4" id="text-orged7c631">
<p>
ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ï¼Œå¿«é€Ÿåˆ›å»ºé¡¹ç›®ã€‚è·ŸéšæŒ‡å¯¼åšä¸€äº›é€‰é¡¹ã€‚
</p>
</div>
</div>

<div id="outline-container-org354ffb8" class="outline-4">
<h4 id="org354ffb8">ç”Ÿæˆæ–‡æ¡£</h4>
<div class="outline-text-4" id="text-org354ffb8">
<p>
ä½¿ç”¨å‘½ä»¤ <code>sphinx-build -b html sourcedir builddir</code> æˆ–è€… <code>make html</code>
</p>
</div>
</div>

<div id="outline-container-org6eef871" class="outline-4">
<h4 id="org6eef871">åŸºæœ¬é…ç½®</h4>
<div class="outline-text-4" id="text-org6eef871">
<p>
åŸºæœ¬é…ç½®åœ¨ <code>conf.py</code> æ–‡ä»¶ä¸­ã€‚è¿™ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªpython è„šæœ¬ï¼Œå¯ä»¥æ‰§è¡Œå„ç§pythonå‡½æ•°å’Œå¯¼å…¥å…¶å®ƒåº“ç­‰ã€‚
</p>

<p>
é…ç½®å‚è€ƒ<a href="https://www.sphinx-doc.org/en/master/usage/configuration.html">configuration</a>
</p>
</div>
</div>
</div>

<div id="outline-container-orge1e8ff9" class="outline-3">
<h3 id="orge1e8ff9">å†™æ–‡æ¡£</h3>
<div class="outline-text-3" id="text-orge1e8ff9">
</div>
<div id="outline-container-org684aab9" class="outline-4">
<h4 id="org684aab9">æ–‡æ¡£ç»“æ„</h4>
<div class="outline-text-4" id="text-org684aab9">
<ol class="org-ol">
<li>
<code>index.rst</code> æ–‡ä»¶æ˜¯æ–‡æ¡£çš„æ¬¢è¿é¡µé¢ï¼Œå…¶ä¸­åŒ…æ‹¬
<ol class="org-ol">
<li>ç›®å½•æ ‘ <code>toctree</code>
</li>
</ol>
</li>
</ol>
</div>
</div>

<div id="outline-container-org83cde33" class="outline-4">
<h4 id="org83cde33">reStructuredText directives</h4>
<div class="outline-text-4" id="text-org83cde33">
<p>
rst æŒ‡ä»¤çš„æ ¼å¼ä¸­åŒ…æ‹¬
</p>
<ol class="org-ol">
<li>å‚æ•°ï¼šåœ¨æŒ‡ä»¤ååé¢çš„å†’å·ä¹‹åï¼Œæ¯ä¸ªæŒ‡ä»¤å¯ä»¥æœ‰è‹¥å¹²ä¸ªå‚æ•°</li>
<li>é€‰é¡¹ï¼šåœ¨å‚æ•°ä¹‹åï¼Œé€‰é¡¹çš„å½¢å¼æ˜¯ <code>å-å€¼</code> çš„åˆ—è¡¨ï¼Œä¸€è¡Œä¸€ä¸ª</li>
<li>å†…å®¹ï¼šåœ¨å‚æ•°ä¹‹åç©ºä¸€è¡Œ</li>
</ol>
</div>

<ul class="org-ul">
<li>
<a id="orgf658e78"></a><code>toctree</code> ç›®å½•<br><div class="outline-text-5" id="text-orgf658e78">
<p>
å‚è€ƒï¼š<a href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/directives.html#toctree-directive">directives/toctree-directive</a>
</p>

<div class="highlight"><pre><span></span>     .. toctree::
        :maxdepth: 2

        intro
        strings
        datatypes
        numeric
        (many more documents listed here)
</pre></div>
</div>

<ul class="org-ul">
<li>
<a id="org107a9ec"></a>å†…å®¹<br><div class="outline-text-6" id="text-org107a9ec">
<p>
å†…å®¹ä¸­æ¯ä¸€è¡Œå°±æ˜¯è¦é“¾æ¥åˆ°çš„æ–‡ä»¶å, å¯ä»¥ç”¨ <code>Net Title &lt;filename&gt;</code> é‡æ–°æŒ‡å®šæ˜¾ç¤ºçš„æ ‡é¢˜
</p>
</div>
</li>

<li>
<a id="org0ae467b"></a>é€‰é¡¹<br><div class="outline-text-6" id="text-org0ae467b">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-left">
</colgroup>
<thead><tr>
<th scope="col" class="org-left">é€‰é¡¹</th>
<th scope="col" class="org-left">ä½œç”¨</th>
</tr></thead>
<tbody>
<tr>
<td class="org-left"><code>:numbered:</code></td>
<td class="org-left">ç»™ç›®å½•ç¼–å·</td>
</tr>
<tr>
<td class="org-left"><code>:caption: Table of Contents</code></td>
<td class="org-left">ç›®å½•çš„æ ‡é¢˜</td>
</tr>
<tr>
<td class="org-left"><code>:name: mastertoc</code></td>
<td class="org-left">è®¾ç½® <code>ref</code> ç”¨çš„åå­—</td>
</tr>
<tr>
<td class="org-left"><code>:titlesonly:</code></td>
<td class="org-left">åªæ˜¾ç¤ºæ–‡ä»¶æ ‡é¢˜</td>
</tr>
<tr>
<td class="org-left"><code>:glob:</code></td>
<td class="org-left">å¯ä»¥ä½¿ç”¨ <code>*</code> åŒ¹é…å¾ˆå¤šæ–‡ä»¶</td>
</tr>
<tr>
<td class="org-left"><code>:hidden:</code></td>
<td class="org-left">é“¾æ¥ï¼Œä½†ä¸æ˜¾ç¤º</td>
</tr>
<tr>
<td class="org-left"><code>:includehidden:</code></td>
<td class="org-left">åªé“¾æ¥ä¸€çº§æ ‡é¢˜ï¼Œéšè—å…¶å®ƒçš„</td>
</tr>
<tr>
<td class="org-left"><code>:maxdepth: 2</code></td>
<td class="org-left">ç›®å½•å±‚çº§æ·±åº¦</td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</li>
</ul>
</div>

<div id="outline-container-org9b459e5" class="outline-4">
<h4 id="org9b459e5">Domains</h4>
<div class="outline-text-4" id="text-org9b459e5">
<p>
ä¸ºäº†å¯¹åº” python/c++ ä¸­çš„åå­—ç©ºé—´ï¼Œé˜²æ­¢å‡½æ•°åå†²çªï¼Œè¦æŠŠå‡½æ•°çš„æ–‡æ¡£å†™åœ¨ domain é‡Œã€‚
</p>

<p>
å‚è€ƒ <a href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/domains.html">domains</a>
</p>
</div>

<ul class="org-ul">
<li>
<a id="org25a201d"></a>åŸºæœ¬è¯­æ³•<br><div class="outline-text-5" id="text-org25a201d">
<p>
å¯ä»¥ä¸€æ¬¡ç”Ÿæˆä¸¤ä¸ªå‡½æ•°
</p>
<div class="highlight"><pre><span></span>     .. py:function:: spam(eggs)
                      ham(eggs)

        Spam or ham the foo.
</pre></div>

<p>
å¦‚æœä¸€ä¸ªå‡½æ•°å¾ˆé•¿ï¼Œå¯ä»¥æŠ˜è¡Œå¹¶åŠ ä¸Š <code>:noindex:</code>
</p>
<div class="highlight"><pre><span></span>     .. py:function:: filterwarnings(action, message='', category=Warning, \
                                     module='', lineno=0, append=False)
        :noindex:
</pre></div>

<p>
é»˜è®¤çš„ domain æ˜¯ pythonï¼Œå¯ä»¥ç”¨ <code>.. default-domain:: name</code> ä¿®æ”¹
</p>
</div>
</li>

<li>
<a id="orge592616"></a>äº¤å‰å¼•ç”¨<br><div class="outline-text-5" id="text-orge592616">
<p>
åŸºæœ¬è¯­æ³•æ˜¯ <code>:role:`title &lt;target&gt;`</code> è¿™ä¼šå¼•ç”¨ <code>target</code> ä½†æ˜¾ç¤ºçš„æ˜¯ <code>title</code>
</p>
<ol class="org-ol">
<li>å‰é¢åŠ  <code>!</code> ä¸ç”Ÿæˆå¼•ç”¨</li>
<li>å‰é¢åŠ  æ³¢æµªçº¿ <code>\~</code> åªä¼šæ˜¾ç¤ºæœ€åä¸€ä¸ªå…ƒç´ çš„å¼•ç”¨ <code>:py:meth:`\~Queue.Queue.get`</code> åªæ˜¾ç¤º <code>get</code>
</li>
</ol>
</div>
</li>
<li>
<a id="org07742d7"></a>C++<br><div class="outline-text-5" id="text-org07742d7">
<p>
å‚è€ƒ <a href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/domains.html#cpp-domain">domains/cpp-domain</a>     
</p>
</div>
</li>
</ul>
</div>
</div>


<div id="outline-container-org6bb665c" class="outline-3">
<h3 id="org6bb665c">Autodoc: æ³¨é‡Šæ–‡æ¡£</h3>
<div class="outline-text-3" id="text-org6bb665c">
<p>
é€šè¿‡ autodoc å¯ä»¥ä»æºç çš„æ³¨é‡Šç”Ÿæˆæ–‡æ¡£ã€‚éœ€è¦åœ¨ <code>conf.py</code> çš„ <code>extensions</code> ä¸­åŠ å…¥ <code>'sphinx.ext.autodoc'</code> . ä¹‹åå°±å¯ä»¥åˆ©ç”¨ <code>autofunction</code> <code>automodule</code> ç­‰æŒ‡ä»¤ï¼Œå°†æ³¨é‡Šä½œä¸ºæ–‡æ¡£å¯¼å…¥ã€‚
</p>
</div>
</div>


<div id="outline-container-org935b529" class="outline-3">
<h3 id="org935b529">breathe</h3>
<div class="outline-text-3" id="text-org935b529">
<p>
<a href="https://breathe.readthedocs.io/en/latest/index.html">breathe</a> æ˜¯é€šè¿‡ doxygen ç”Ÿæˆ c/c++ çš„æ–‡æ¡£çš„å·¥å…·
</p>
</div>

<div id="outline-container-org8f4be7d" class="outline-4">
<h4 id="org8f4be7d">åŸºæœ¬ä½¿ç”¨</h4>
<div class="outline-text-4" id="text-org8f4be7d">
<p>
è®¾ç½® <code>conf.py</code>
</p>
<div class="highlight"><pre><span></span>    <span class="n">breathe_projects_source</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">"my_proj"</span><span class="p">:</span> <span class="p">(</span><span class="s2">"../src"</span><span class="p">,</span> <span class="p">[</span><span class="s2">"oneheader.h"</span><span class="p">]),</span>
    <span class="p">}</span>
    <span class="n">breathe_default_project</span> <span class="o">=</span> <span class="s2">"my_proj"</span>
</pre></div>

<p>
å°±å¯ä»¥åœ¨ <code>index.rst</code> ä¸­ä½¿ç”¨
</p>

<div class="highlight"><pre><span></span>    .. autodoxygenfile:: oneheader.h
</pre></div>
</div>
</div>
</div>
</div>
                </div>
            </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/xxhash/" class="u-url">xxhash</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        chimez
                    </span></p>
            <p class="dateline">
            <a href="posts/xxhash/" rel="bookmark">
            <time class="published dt-published" datetime="2021-08-07T00:30:25+08:00" itemprop="datePublished" title="2021-08-07 00:30">2021-08-07 00:30</time></a>
            </p>
                        <p class="commentline">
    
    <a href="posts/xxhash/#disqus_thread" data-disqus-identifier="cache/posts/xxhash.html">è¯„è®º</a>


                </p>
</div>
            </header><div class="e-content entry-content">
                    <div id="outline-container-orga581fb7" class="outline-2">
<h2 id="orga581fb7">xxHash: å¿«é€Ÿçš„å“ˆå¸Œå‡½æ•°</h2>
<div class="outline-text-2" id="text-orga581fb7">
<p>
<a href="https://github.com/Cyan4973/xxHash">Cyan4973/xxHash</a>
</p>
</div>

<div id="outline-container-org77fa072" class="outline-3">
<h3 id="org77fa072">å®‰è£…</h3>
<div class="outline-text-3" id="text-org77fa072">
<p>
meson çš„ wrapDB ä¸­æœ‰ï¼Œæ‰€ä»¥åªéœ€è¦ <code>meson wrap install xxhash</code>
</p>

<p>
ç¼–è¯‘æ—¶ä½¿ç”¨ <code>XXH_INLINE_ALL</code> é€‰é¡¹æé«˜æ€§èƒ½ï¼Œå¯¹äº meson æ¥è¯´éœ€è¦å†™ <code>xxhash_dep = dependency('libxxhash', default_options: ['inline-all=true'])</code>
</p>
</div>
</div>

<div id="outline-container-orgdfd2451" class="outline-3">
<h3 id="orgdfd2451">åŸºæœ¬ä½¿ç”¨</h3>
<div class="outline-text-3" id="text-orgdfd2451">
<p>
æœ€å¿«çš„å“ˆå¸Œå‡½æ•°æ˜¯ <code>XXH3_64bits</code>
</p>
<div class="highlight"><pre><span></span><span class="w">   </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">"xxhash.h"</span>

<span class="w">   </span><span class="k">static</span><span class="w"> </span><span class="kr">inline</span>
<span class="w">   </span><span class="n">XXH64_hash_t</span>
<span class="w">   </span><span class="nf">hash_func</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="k">return</span><span class="w"> </span><span class="n">XXH3_64bits</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="o">*</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span><span class="w">	</span>
<span class="w">   </span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
                </div>
            </article>
</div>
    
        <ul class="pager postindexpager clearfix">
<li class="next"><a href="index-5.html" rel="next">ä»¥å‰çš„æ–‡ç« </a></li>
        </ul>
<script>var disqus_shortname="chimezz";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><script src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js" integrity="sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"></script><script>
                renderMathInElement(document.body,
                    {
                        
delimiters: [
    {left: "$$", right: "$$", display: true},
    {left: "\\[", right: "\\]", display: true},
    {left: "\\begin{equation*}", right: "\\end{equation*}", display: true},
    {left: "$", right: "$", display: false},
    {left: "\\(", right: "\\)", display: false}
]

                    }
                );
            </script><!--End of body content--><footer id="footer">
            Contents Â© 2023         <a href="mailto:chimez@163.com">chimez</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
            
        </footer>
</div>
</div>


        <script src="assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script>
</body>
</html>
